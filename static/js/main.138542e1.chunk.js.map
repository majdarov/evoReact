{"version":3,"sources":["components/Commodity/Forms/FormSearch.module.css","components/Game/Game.js","Assets/img/terminal-5.png","components/common/ProgressBar/ProgressBar.js","api/api_evotor/createRequestAxios.js","api/api_evotor/fetchEvoAxios.js","api/api.js","api/apiIDB.js","api/apiUtils.js","components/Navbar/Navbar.jsx","redux/Types/appTypes.js","redux/Types/navigationTypes.js","redux/Types/commodityTypes.js","redux/Types/settingsTypes.js","redux/Actions/appActions.js","redux/Actions/navigationActions.js","components/Errors/SequelizeErrors.js","components/Errors/EvoErrors.js","components/Errors/chooseError.js","redux/Actions/commodityActions.js","components/Navbar/NavLinkContainer.js","components/Navbar/NavbarContainer.jsx","components/Header/Header.jsx","components/Header/HeaderContainer.jsx","Assets/img/placeholder.svg","components/common/Preloader/Preloader.js","components/common/utillites/utilites.ts","components/Commodity/Forms/frmUtilites.js","components/common/Tree/treeFunction.js","components/common/Tree/Node.jsx","components/common/Tree/Tree.jsx","components/Commodity/Forms/schemas/ComponentsProducts.jsx","components/Commodity/Forms/FormImg.jsx","components/common/Modal/FormModalWrapper.jsx","components/common/Modal/Modal.jsx","components/common/BlockMod/components/AddElement.tsx","components/common/BlockMod/components/FormChangeName.tsx","components/common/BlockMod/components/LiElement.tsx","components/common/BlockMod/Hooks/useAttributes.js","components/common/BlockMod/utilites.ts","components/common/BlockMod/BlockMod.tsx","components/Commodity/Forms/FormProduct.jsx","components/Commodity/Forms/schemas/useModifications.js","Hooks/useSortableData.js","components/common/Table/utilsTable.js","components/common/Table/Table.jsx","components/common/ProgressBar/ProgressBar2.js","components/Commodity/Forms/schemas/ComponentsSearch.jsx","components/Commodity/Forms/FormSearch.jsx","Hooks/useFilteredData.js","components/common/GroupsTree/GroupsTree.jsx","components/Commodity/Commodity.jsx","components/Commodity/CommodityContainer.js","components/ImpExcel/News/News.jsx","components/ImpExcel/ImpExcel.jsx","components/Example/Example.jsx","components/Example/Wrapper.jsx","components/IdbTest/IdbTest.jsx","api/apiFile.js","components/Settings/MainSettings.jsx","components/Documents/components/CardSell/CardSell.tsx","components/Documents/Documents.jsx","components/App/App.jsx","redux/navReduser.js","redux/commodityReduser.js","redux/appReducer.js","redux/settingsReduser.js","redux/redux-store.js","index.js","components/common/BlockMod/BlockMod.module.css","components/Header/Header.module.css","components/Commodity/Commodity.module.css","components/common/GroupsTree/GroupsTree.module.css","components/ImpExcel/ImpExcel.module.css","components/common/Modal/FormModalWrapper.module.css","components/Documents/components/CardSell/CardSell.module.css","components/common/Table/Table.module.css","components/common/Tree/Tree.module.css","components/Navbar/Navbar.module.css","components/common/Modal/Modal.module.css","components/Commodity/Forms/Form.module.css"],"names":["module","exports","Square","props","className","onClick","value","Board","i","sqSel","this","sq","setTimeout","squares","rows","t","j","push","renderSquare","React","Component","calculateWinner","lines","a","b","c","document","querySelectorAll","forEach","item","index","classList","remove","line","toggle","interval","setInterval","clearInterval","length","Game","state","history","Array","fill","square","xIsNext","stepNumber","slice","setState","concat","firstElementChild","step","e","target","status","current","winner","moves","map","move","coords","Math","floor","desc","jumpTo","handleClick","ProgressBar","useState","p","setP","useEffect","limit","timer","delay","style","display","text","backgroundColor","color","action","api_v2","headers","localStorage","appKey","storeUuid","storeKey","params","cursor","request","selectOption","type","url","method","body","JSON","stringify","period","dateStart","dateEnd","until","date","Date","setDate","getDate","getTime","docType","employee_id","id","deviceId","from","getFullYear","getMonth","to","createRequest","fetchEvo","baseURL","data","Axios","response","result","paging","next_cursor","items","apiForIdb","getStores","stores","getSchemes","schemes","postSchemes","fetchGroupsEvo","fetchProductsEvo","postData","path","putData","deleteData","getDocuments","getOfdDocuments","getEmoloyees","initDb","openDB","upgrade","db","oldVersion","newVersion","alert","console","log","objectStoreNames","contains","store","createObjectStore","keyPath","createIndex","apiIDB","getAll","group","name","get","product","pid","getAllFromIndex","products","resItems","tx","transaction","promises","put","done","Promise","all","nameDb","deleteDB","storeName","delete","clear","compose","fns","x","reduceRight","acc","fn","testNeedUpdate","periodUpdate","needUpdate","now","syncGroupsProducts","callback","res","groups","parent_id","barcodes","photos","created_at","parse","updated_at","setItem","lastUpdate","error","message","Navbar","navElements","SET_APP_KEY","SET_STORE_KEY","INIT_APP","SET_STORES","SET_LAST_UPDATE","SET_PERIOD_UPDATE","SET_SYNC_DATA","CLEAR_SYNC_DATA","GET_TITLE","CHOOSE_LANG","SET_GROUPS","SET_PID","SET_COMMODITIES","SET_ERROR","VIEW_FORM","SET_FORM_DATA","TOGGLE_FORM_POST","SET_FORM_ERROR","SET_FORM_PHOTOS","SET_SCHEMA","setAppKeyAC","key","setStoreKeyAC","toggleInitAppAC","init","setLastUpdateAC","dateUpdate","setAppKey","dispatch","setStoreKey","toggleInitApp","setLastUpdate","getState","setPeriodUpdate","isNaN","setPeriodUpdateAC","getTitle","getTitleAC","SequelizeError","Error","SequelizeValidationError","errors","SequelizeUniqueConstraintError","EvoError","EvoValidationError","err","subject","toUpperCase","reason","violations","EvoPutError","code","chooseError","setGroupsAC","setPidAC","setCommoditiesAC","commodities","setErrorAC","setFormErrorAC","viewFormAC","view","viewForm","setFormDataAC","formData","isGroup","toggleFormPostAC","formPost","NavLinkContainer","connect","ownProps","exact","activeClassName","NavLink","getNavElements","currentLang","navigation","navBar","nav","idx","ex","link","s","active","title","NavbarContainer","Header","isInit","setIsInit","updated","setUpdated","setNeedUpdate","setText","setGroups","toString","styleH5","src","logo","alt","lng","ev","chooseLang","checked","onChange","app","chooseLangAC","withRouter","location","pathname","split","Preloader","spiner","randomMax","max","random","getUUID4","arr","byte","parseInt","newStr","join","strUuid","dateToString","strDate","dblDigit","dgt","getMinData","getItem","min","year","month","day","setNewCode","codes","maxCode","apply","newCode","viewBarcode","barcode","f1","f2","bcStr","n","Number","String","fromCharCode","substr","str","validateBarcode","includes","testBarcode","dateToLocaleString","days","getDay","toLocaleString","addNode","subNode","parentNode","pNode","findNode","undefined","childs","sort","label","find","node","createTree","root","notFoundNodes","notFoundNode","createNode","Node","context","useContext","CurrentPidContext","icon","setIcon","isOpen","setIsOpen","hasChildren","children","hidden","setHidden","selected","setSelected","pId","arrNotHidden","stopPropagation","tagName","classSelected","viewEdit","createContext","Tree","nodeRoot","price","tree","treeLabel","setArrNotHidden","startId","g","elem","chooseNotHiddenGroups","Provider","createSubTree","lvl","ComponentsProducts","measure_name","handleChange","disabled","schema","measure_names","m","types","description","tax","taxes","gLabel","onDivClick","treeView","callbackTree","setView","delBcClick","allow_edit","closest","deleteFromArray","defaultValue","bc","onBlur","handleBlur","divPicture","pictureClick","photo","URL","createObjectURL","tabIndex","attributes","clickChoice","attributes_choices","toggleAttrSelected","useCallback","Object","keys","getElementById","add","attr","choices","FormImg","width","position","top","left","verticalAlign","FormModalWrapper","useLayoutEffect","overflow","container","modalRoot","Modal","setChildren","zIndex","childElementCount","child","ReactDOM","createPortal","AddElement","typeElem","data-action","FormChangeName","nameOfAttr","data-name","htmlFor","autoFocus","LiElement","typeLi","inputHidden","clsN","createSubLi","useAttributes","setAttributes","setInputHidden","attrId","setAttrId","setId","setAction","paramName","setParamName","getAttribut","_id","toggleHidden","onBlocModClick","dataset","typeOfParam","nameOfParam","param","getAttrChoice","addParam","paramId","newName","choice","findIndex","splice","editParam","changeParamName","BlockMod","FormProduct","isNewData","setIsNewData","fileInput","createRef","setIsGroup","bigImg","currentBarcode","setTreeView","mod","setMod","attrChoices","setAttrChoices","setViewForm","setFormData","cancelClick","then","formError","setFormError","parentId","attributesP","getAttributes","useModifications","revokeObjectURL","handler","addEventListener","removeEventListener","formatPrice","isFinite","toFixed","required","files","form","values","elements","uuid","removeAttribute","currentTarget","newValue","prefix","window","prompt","A1","A2","newBarcode","warn","valBc","handleSubmit","preventDefault","changes","formChanged","confirm","createdAt","updatedAt","alcocodes","missData","reqData","validateRequiredData","strMessage","getElementsByName","curr","validateZeroData","typeQuery","postFormData","toggleFormPost","elemId","arrName","gProps","mnProps","tProps","taxProps","bProps","pProps","picture","prevElem","previousElementSibling","onSubmit","copy","close","defaultChecked","allow_to_sell","ph","multiple","ref","click","code_article","article_number","propertyes","placeholder","el","prices","cost_price","buttons","cancel","useSortableData","config","sortConfig","setSortConfig","sortedItems","useMemo","sortedProducts","direction","requestSort","clickCell","row","column","getAttribute","cell","innerText","delRowCallback","del","Table","getClassName","clickTable","deleteProduct","ComponentsSearch","SearchPeriod","head","viewPeriod","changeFormElement","changePeriod","lblFrom","match","lblTo","getInputEl","textName","Button","filter","initialPeriod","FormSearch","setPid","setPeriod","setName","propsSearchProducts","searchProducts","setIsSearching","obj","getObj","chk","forms","idxName","elemValue","search","returnBeforeSearch","wrapper","args","_this","prototype","RegExp","test","call","createSearchRequest","arrSearchReuests","searchRequest","testBarcodes","val","replace","createRegexp","isArray","useFilteredData","setSearch","setItems","filteredItems","reduce","searchResult","filterProd","setFilterConfig","GroupsTree","parentGroup","getProductId","edit","isEmpty","Commodity","setPidSearch","setIsEmpty","labelGroup","setLabelGroup","isSearching","setCommodities","sch","lbl","showTreeView","setShowTreeView","propsSetPid","isLoaded","getGroups","comIsLoaded","getProducts","setError","formSearchProps","eId","list","settings","table","commodityPage","dir","typeData","callbackApi","catch","News","element","article","ImpExcel","childElements","setChildElements","page","readXlsxFile","archive","Example","count","Wrapper","setFilteredItems","setCount","appId","resSchemes","IdbTest","isLoading","setIsLoading","getGroupsEvo","butGetGroups","blobFromObj","rest","json","blob","Blob","blobToUrl","fileName","ext","createElement","download","href","getObjfromLocalStorage","getObjfromIdb","saveConfig","readJsonFile","input","file","reader","FileReader","readAsText","resolve","reject","onload","onerror","addKey","setStores","setStoresAC","inpRef","toJSON","setAppKeyAndStores","liClick","clean","setClean","storageName","reload","setPUpdate","cleareStorage","CardSell","number","positions","product_name","quantity","sum","result_sum","typesOfDocs","docs","setDocs","setDocType","dateMin","changeDate","setHours","docClick","doc","styleSpan","border","paddingTop","paddingLeft","paddingRight","background","margin","initializeApp","getProductsForIdb","component","MainSettings","CommodityContainer","Documents","initialState","langs","ru","en","navReduser","isUpdated","resMessage","commodityReduser","syncData","appReducer","initialSettings","settingsReducer","newState","redusers","combineReducers","createStore","applyMiddleware","thunkMidleware","render"],"mappings":"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","file":"static/js/main.138542e1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form-container\":\"FormSearch_form-container__nL_jW\",\"form-search\":\"FormSearch_form-search__4Tbhm\",\"search\":\"FormSearch_search__36Xnu\",\"search-name\":\"FormSearch_search-name__1V_P8\",\"form-search-row\":\"FormSearch_form-search-row__3xK21\",\"filter-button\":\"FormSearch_filter-button__1-GiX\",\"filter\":\"FormSearch_filter__3iscQ\",\"hidden\":\"FormSearch_hidden__2u_sA\",\"form-search-price\":\"FormSearch_form-search-price__9GTdv\",\"form-search-date\":\"FormSearch_form-search-date__1G6F-\",\"price-row\":\"FormSearch_price-row__2qDoM\",\"date-row\":\"FormSearch_date-row__UbyR8\",\"input-row\":\"FormSearch_input-row__2ZUZ8\"};","import React from \"react\";\r\nimport \"./Game.css\";\r\n\r\nfunction Square(props) {\r\n  return (\r\n    <button className={props.className} onClick={props.onClick}>\r\n      {props.value}\r\n    </button>\r\n  );\r\n}\r\n\r\nclass Board extends React.Component {\r\n  renderSquare(i) {\r\n    let sqSel =\r\n      this.props.sq === i && this.props.sqSel ? \"square selected\" : \"square\";\r\n    setTimeout(() => (sqSel = \"square\"), 500);\r\n    return (\r\n      <Square\r\n        value={this.props.squares[i]}\r\n        className={sqSel}\r\n        key={i}\r\n        onClick={() => this.props.onClick(i)}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const rows = [];\r\n    let t = 0;\r\n    while (t < 9) {\r\n      for (let j = 1; j <= 3; j++) {\r\n        const sq = [];\r\n        for (let i = 1; i <= 3; i++) {\r\n          sq.push(this.renderSquare(t));\r\n          t++;\r\n        }\r\n        rows.push(\r\n          <div className=\"board-row\" key={j}>\r\n            {sq}\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n    return <div>{rows}</div>;\r\n  }\r\n}\r\n\r\nclass Game extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      history: [\r\n        {\r\n          squares: Array(9).fill(null),\r\n          square: null\r\n        }\r\n      ],\r\n      xIsNext: true,\r\n      stepNumber: 0\r\n    };\r\n  }\r\n\r\n  handleClick(i) {\r\n    const history = this.state.history.slice(0, this.state.stepNumber + 1);\r\n    const current = history[history.length - 1];\r\n    const squares = current.squares.slice();\r\n\r\n    if (calculateWinner(squares) || squares[i]) {\r\n      return;\r\n    }\r\n    squares[i] = this.state.xIsNext ? \"X\" : \"O\";\r\n    this.setState({\r\n      history: history.concat([{ squares: squares, square: i }]),\r\n      stepNumber: history.length,\r\n      xIsNext: !this.state.xIsNext\r\n    });\r\n    let arrLi = document.querySelectorAll(\"li\");\r\n    arrLi.forEach(item => {\r\n      item.firstElementChild.classList.remove(\"selected\");\r\n    });\r\n  }\r\n\r\n  jumpTo(step, e) {\r\n    let arrLi = document.querySelectorAll(\"li\");\r\n    arrLi.forEach(item => {\r\n      item.firstElementChild.classList.remove(\"selected\");\r\n    });\r\n    e.target.classList.toggle(\"selected\");\r\n    this.setState({\r\n      stepNumber: step,\r\n      xIsNext: step % 2 === 0\r\n    });\r\n    this.setState({ sqSel: true });\r\n    setTimeout(() => this.setState({ sqSel: false }), 500);\r\n  }\r\n\r\n  render() {\r\n    const history = this.state.history;\r\n    const current = history[this.state.stepNumber];\r\n    const winner = calculateWinner(current.squares);\r\n\r\n    const moves = history.map((step, move) => {\r\n      let i = step.square;\r\n      if (move) {\r\n        var coords =\r\n          \" row: \" + (Math.floor(i / 3) + 1) + \" col: \" + ((i % 3) + 1);\r\n        var desc = \"Goto step #\" + move;\r\n      } else {\r\n        desc = \"Goto Start\";\r\n        coords = \"\";\r\n      }\r\n\r\n      return (\r\n        <li key={move}>\r\n          <button onClick={e => this.jumpTo(move, e)}>{desc}</button>\r\n          {coords}\r\n        </li>\r\n      );\r\n    });\r\n\r\n    let status;\r\n\r\n    if (winner) {\r\n      status = \"Winner \" + winner;\r\n    } else if (history.length === 10) {\r\n      status = \"X === O\";\r\n    } else {\r\n      status = \"Next step \" + (this.state.xIsNext ? \"X\" : \"O\");\r\n    }\r\n\r\n    return (\r\n      <div className=\"game\">\r\n        <h2>Game X vs O</h2>\r\n        <div className=\"game-wrapper\">\r\n          <div className=\"game-board\">\r\n            <Board\r\n              squares={current.squares}\r\n              onClick={i => this.handleClick(i)}\r\n              sqSel={this.state.sqSel}\r\n              sq={current.square}\r\n            />\r\n          </div>\r\n          <div className=\"game-info\">\r\n            <div>{status}</div>\r\n            <ol>{moves}</ol>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction calculateWinner(squares) {\r\n  const lines = [\r\n    [0, 1, 2],\r\n    [3, 4, 5],\r\n    [6, 7, 8],\r\n    [0, 3, 6],\r\n    [1, 4, 7],\r\n    [2, 5, 8],\r\n    [0, 4, 8],\r\n    [2, 4, 6]\r\n  ];\r\n  for (let i = 0; i < lines.length; i++) {\r\n    const [a, b, c] = lines[i];\r\n    if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {\r\n      let arrSq = document.querySelectorAll(\".square\");\r\n      arrSq.forEach((item, index) => {\r\n        item.classList.remove(\"selected\");\r\n        lines[i].forEach(line => {\r\n          if (index === line) {\r\n            item.classList.toggle(\"selected\");\r\n            let interval = setInterval(() => {\r\n              item.classList.toggle(\"selected\");\r\n            }, 500);\r\n            setTimeout(() => {\r\n              clearInterval(interval);\r\n              item.classList.remove(\"selected\");\r\n            }, 3000);\r\n          }\r\n        });\r\n      });\r\n\r\n      return squares[a];\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default Game;\r\n","export default __webpack_public_path__ + \"static/media/terminal-5.6357e026.png\";","import React, { useEffect, useState } from 'react';\r\n\r\nconst ProgressBar = (props) => {\r\n  const [p, setP] = useState('_');\r\n\r\n  useEffect(() => {\r\n    let limit = props.limit;\r\n    let c = 0;\r\n    let timer = setInterval(() => {\r\n      c++;\r\n      if (c > limit) {\r\n        c = 0;\r\n        setP('_');\r\n      }\r\n      setP((p) => (p += '_'));\r\n    }, props.delay);\r\n    return () => clearInterval(timer);\r\n  }, [props.delay, props.limit]);\r\n\r\n  const styleSpan = {\r\n    backgroundColor: 'blue',\r\n    color: 'blue',\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h5 style={{display: 'inline'}}>{props.text}</h5><span style={styleSpan}>{p}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProgressBar;\r\n","import api_v2 from './api_v2_axios.json';\r\n\r\nasync function createRequest(action) {\r\n  api_v2.headers['X-Authorization'] = localStorage.appKey;\r\n\r\n  action.storeUuid = localStorage.storeKey;\r\n\r\n  api_v2.params = action.cursor ? { cursor: action.cursor } : null;\r\n\r\n  let request = selectOption(action);\r\n\r\n  return { ...request, action: action.type };\r\n}\r\n\r\nfunction selectOption(action) {\r\n  let url, method, body, headers;\r\n\r\n  switch (action.type) {\r\n    case 'store_v2':\r\n      url = 'stores';\r\n      return { ...api_v2, method: 'GET', url };\r\n\r\n    case 'bulks_v1':\r\n      if (action.value) {\r\n        url = 'bulks/' + action.value;\r\n      } else {\r\n        url = 'bulks';\r\n      }\r\n      return { ...api_v2, method: 'GET', url };\r\n\r\n    /* Схемы товаров */\r\n    case 'get_schemes':\r\n      method = 'GET';\r\n      url = `/api/v1/inventories/stores/${action.storeUuid}/products/schemes`;\r\n      return { ...api_v2, method, url };\r\n\r\n    case 'post_schemes':\r\n      method = 'POST';\r\n      url = `/api/v1/inventories/stores/${action.storeUuid}/products/schemes`;\r\n      return { ...api_v2, method, url, body: JSON.stringify(action.body) };\r\n\r\n    /* Получить товар по ID или все товары */\r\n    case 'products_v2':\r\n      method = 'GET';\r\n      url = 'stores/' + action.storeUuid + '/products';\r\n      if (action.value) {\r\n        url += '/' + action.value;\r\n        action.value = '';\r\n      }\r\n      return { ...api_v2, method, url };\r\n    /*-------------------------------------*/\r\n\r\n    /* Получить группу по ID или список групп */\r\n    case 'groups_v2':\r\n      method = 'GET';\r\n      if (action.value) {\r\n        url = 'stores/' + action.storeUuid + '/product-groups/' + action.value;\r\n        action.value = '';\r\n      } else {\r\n        url = 'stores/' + action.storeUuid + '/product-groups';\r\n      }\r\n      return { ...api_v2, method, url };\r\n    /*--------------------------------------*/\r\n\r\n    /* Получить документы (за пред. месяц, продажа) */\r\n    /*\r\n      ACCEPT - Приемка товаров,\r\n      INVENTORY - Документ инвентаризации,\r\n      REVALUATION - Переоценка,\r\n      RETURN - Возврат поставщику,\r\n      WRITE_OFF - Списание,\r\n      SELL - Продажа,\r\n      PAYBACK - Возврат,\r\n\r\n    */\r\n    case 'documents_v2':\r\n      method = 'GET';\r\n      if (action.value) {\r\n        url = 'stores/' + action.storeUuid + '/documents/' + action.value;\r\n      } else {\r\n        url = 'stores/' + action.storeUuid + '/documents';\r\n        if (!api_v2.cursor) {\r\n          if (action.period) {\r\n            let dateStart = action.period.dateStart;\r\n            let dateEnd = action.period.dateEnd;\r\n            let until = dateEnd ? `&until=${dateEnd}` : null;\r\n            url += `?since=${dateStart}${until}`;\r\n          } else {\r\n            let date = new Date();\r\n            date.setDate(date.getDate() - 1);\r\n            url += `?since=${date.getTime()}`;\r\n          }\r\n          url += `&type=${action.docType}`;\r\n        }\r\n      }\r\n      return { ...api_v2, method, url };\r\n    /*----------------------------------------------*/\r\n\r\n    /* Получить список сотрудников */\r\n    case 'get_employees':\r\n      method = 'GET';\r\n      if (action.employee_id) {\r\n        url = 'employees/' + action.employee_id;\r\n        action.employee_id = '';\r\n      } else {\r\n        url = 'employees';\r\n      }\r\n      return { ...api_v2, method, url };\r\n    /*---------------------------------------------*/\r\n\r\n    case 'put_product_v2':\r\n      method = 'PUT';\r\n      url = 'stores/' + action.storeUuid + '/products/' + action.body.id;\r\n      body = JSON.stringify(action.body);\r\n      // console.log(body);\r\n      return { ...api_v2, method, url, body };\r\n\r\n    case 'post_product_v2':\r\n      method = 'POST';\r\n      url = 'stores/' + action.storeUuid + '/products';\r\n      body = JSON.stringify(action.body);\r\n      return { ...api_v2, method, url, body };\r\n\r\n    case 'delete_product_v2':\r\n      method = 'DELETE';\r\n      url = 'stores/' + action.storeUuid + '/products/' + action.id;\r\n      return { ...api_v2, method, url };\r\n\r\n    case 'put_group_v2':\r\n      method = 'PUT';\r\n      url = 'stores/' + action.storeUuid + '/product-groups/' + action.body.id;\r\n      body = JSON.stringify(action.body);\r\n      return { ...api_v2, method, url, body };\r\n\r\n    case 'post_group_v2':\r\n      method = 'POST';\r\n      url = 'stores/' + action.storeUuid + '/product-groups/';\r\n      body = JSON.stringify(action.body);\r\n      return { ...api_v2, method, url, body };\r\n\r\n    case 'delete_group_v2':\r\n      method = 'DELETE';\r\n      url = 'stores/' + action.storeUuid + '/product-groups/' + action.id;\r\n      return { ...api_v2, method, url };\r\n\r\n    case 'put_array_products_v2':\r\n      if (!action.body || !action.body.length) {\r\n        return {};\r\n      }\r\n      method = 'PUT';\r\n      headers = {\r\n        ...api_v2.headers,\r\n        'Content-Type': 'application/vnd.evotor.v2+bulk+json',\r\n      };\r\n      url = 'stores/' + action.storeUuid + '/products';\r\n      body = JSON.stringify(action.body);\r\n      return { ...api_v2, method, headers, url, body };\r\n\r\n    case 'put_array_groups_v2':\r\n      method = 'PUT';\r\n      headers = {\r\n        ...api_v2.headers,\r\n        'Content-Type': 'application/vnd.evotor.v2+bulk+json',\r\n      };\r\n      url = 'stores/' + action.storeUuid + '/product-groups';\r\n      body = JSON.stringify(action.body);\r\n      return { ...api_v2, method, headers, url, body };\r\n\r\n    case 'get_ofd_documents':\r\n      method = 'GET';\r\n      url = `/api/v1/ofd/documents/${action.storeUuid}`;\r\n      let date = new Date();\r\n      /* let dateFrom = date.getTime();\r\n      date.setDate(date.getDate() - 1);\r\n      let dateTo = date.getTime(); */\r\n      let dateFrom = `${date.getFullYear()}-0${date.getMonth() + 1}-${\r\n        date.getDate() - 1\r\n      }T00:00:00.000Z`;\r\n      let dateTo = `${date.getFullYear()}-0${\r\n        date.getMonth() + 1\r\n      }-${date.getDate()}T00:00:00.000Z`;\r\n      let params = {\r\n        deviceId: '20180608-D09E-409D-8015-A35AAA2D3487',\r\n        type: 'SELL',\r\n        from: dateFrom,\r\n        to: dateTo,\r\n      };\r\n      return { ...api_v2, method, url, params };\r\n\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nexport default createRequest;\r\n","import { default as Axios } from 'axios';\r\n\r\nasync function fetchEvo({\r\n  baseURL,\r\n  url,\r\n  headers,\r\n  method,\r\n  body,\r\n  params,\r\n  action,\r\n}) {\r\n  try {\r\n    let request = { baseURL, url, headers, method, params };\r\n    // console.log(request);\r\n    if (body) {\r\n      request.data = body;\r\n    }\r\n    let response = await Axios(request);\r\n    let result;\r\n    if (method === 'DELETE') {\r\n      result = response;\r\n    } else {\r\n      result = await response.data;\r\n    }\r\n    if (result.paging && result.paging.next_cursor) {\r\n      request.params = { cursor: result.paging.next_cursor };\r\n      let response = await fetchEvo(request);\r\n      result.items = result.items.concat(response.items);\r\n    }\r\n    result.paging = {};\r\n    return result;\r\n  } catch (err) {\r\n    return err;\r\n  }\r\n}\r\n\r\nexport default fetchEvo;\r\n","import { createRequest, fetchEvo } from './api_evotor';\r\n\r\nexport const apiForIdb = {\r\n\r\n  async getStores() {\r\n    let request = await createRequest({ type: 'store_v2' });\r\n    let stores = await fetchEvo(request);\r\n    return stores.items;\r\n  },\r\n\r\n  async getSchemes() {\r\n    let request = await createRequest({ type: 'get_schemes' });\r\n    let schemes = await fetchEvo(request);\r\n    return schemes;\r\n  },\r\n\r\n  async postSchemes(body) {\r\n    let request = await createRequest({ type: 'post_schemes', body });\r\n    let schemes = await fetchEvo(request);\r\n    return schemes;\r\n  },\r\n\r\n  async fetchGroupsEvo() {\r\n    let request = await createRequest({ type: 'groups_v2' });\r\n    return await fetchEvo(request);\r\n  },\r\n\r\n  async fetchProductsEvo() {\r\n    let request = await createRequest({ type: 'products_v2' });\r\n    return await fetchEvo(request);\r\n  },\r\n\r\n  async postData(path, body) {\r\n    let request = await createRequest({ type: `post_${path}_v2`, body });\r\n    return await fetchEvo(request);\r\n  },\r\n  async putData(path, body) {\r\n    let request = await createRequest({ type: `put_${path}_v2`, body });\r\n    return await fetchEvo(request);\r\n  },\r\n  async deleteData(path, id) {\r\n    let request = await createRequest({ type: `delete_${path}_v2`, id });\r\n    return await fetchEvo(request);\r\n  },\r\n  async getDocuments(docType, period = null, value = null) {\r\n    let request = await createRequest({ type: 'documents_v2', docType, period, value });\r\n    return await fetchEvo(request);\r\n  },\r\n  async getOfdDocuments() {\r\n    // let request = await createRequest({ type: 'get_ofd_documents' });\r\n    // return await fetchEvo(request);\r\n    return {items: [{id: 'Временно не работает!'}]};\r\n  },\r\n  async getEmoloyees(employee_id = null) {\r\n    let request = await createRequest({ type: 'get_employees', employee_id });\r\n    return await fetchEvo(request);\r\n  },\r\n};\r\n","import { deleteDB, openDB } from 'idb';\r\n\r\nexport async function initDb() {\r\n  const db = await openDB('Evo', 4, {\r\n    async upgrade(db, oldVersion, newVersion) {\r\n      if (oldVersion < newVersion) {\r\n        alert('База данных будет обновлена до версии: ' + newVersion);\r\n        // await db.delete();\r\n        console.log(`New version: ${newVersion}`);\r\n      }\r\n      if (!db.objectStoreNames.contains('groups')) {\r\n        const store = db.createObjectStore('groups', { keyPath: 'id' });\r\n        store.createIndex('name', 'name');\r\n        store.createIndex('date', 'created_at');\r\n        store.createIndex('parent_id', 'parent_id');\r\n      }\r\n      if (!db.objectStoreNames.contains('products')) {\r\n        const store = db.createObjectStore('products', { keyPath: 'id' });\r\n        store.createIndex('name', 'name');\r\n        store.createIndex('date', 'created_at');\r\n        store.createIndex('parent_id', 'parent_id');\r\n        store.createIndex('code', 'code');\r\n        store.createIndex('price', 'price');\r\n      }\r\n    },\r\n  });\r\n\r\n  return db;\r\n}\r\n\r\nexport const apiIDB = {\r\n  async getGroup(id) {\r\n    const db = await initDb();\r\n    let group;\r\n    if (id === 'all') {\r\n      group = await db.getAll('groups');\r\n    } else if (id === '0') {\r\n      return { name: 'Root', id: '0' };\r\n    } else {\r\n      group = await db.get('groups', id);\r\n    }\r\n    return group;\r\n  },\r\n\r\n  async getProduct(id) {\r\n    const db = await initDb();\r\n    let product;\r\n    if (id === 'all' || !id) {\r\n      product = await db.getAll('products');\r\n    } else {\r\n      product = await db.get('products', id);\r\n    }\r\n    return product;\r\n  },\r\n\r\n  async getGroupsPid(pid) {\r\n    const db = await initDb();\r\n    const groups = await db.getAllFromIndex('groups', 'parent_id', pid);\r\n    return groups;\r\n  },\r\n  async getProductsPid(pid) {\r\n    const db = await initDb();\r\n    const products = await db.getAllFromIndex('products', 'parent_id', pid);\r\n    return products;\r\n  },\r\n\r\n  async getProductsName(name) {\r\n    const db = await initDb();\r\n    const products = await db.getAllFromIndex('products', 'name', name);\r\n    return products;\r\n  },\r\n\r\n  async pushItems(store, items) {\r\n    let resItems = [];\r\n    items.forEach((item) => {\r\n      resItems.push(item);\r\n    });\r\n    /* Init IDB */\r\n    const db = await initDb();\r\n    const tx = db.transaction(store, 'readwrite');\r\n    const promises = resItems.map((item) => {\r\n      return tx.store.put(item);\r\n    });\r\n    promises.push(tx.done);\r\n    await Promise.all(promises);\r\n  },\r\n\r\n  async delDb(nameDb) {\r\n    await deleteDB(nameDb);\r\n  },\r\n\r\n  async putData(storeName, data) {\r\n    const db = await initDb();\r\n    await db.put(storeName, data);\r\n    return data;\r\n  },\r\n\r\n  async deleteData(storeName, id) {\r\n    const db = await initDb();\r\n    await db.delete(storeName, id);\r\n    return id;\r\n  },\r\n\r\n  async clearStore(storeName) {\r\n    const db = await initDb();\r\n    await db.clear(storeName);\r\n    return true;\r\n  },\r\n};\r\n","import { apiForIdb } from './api';\r\nimport { apiIDB } from './apiIDB';\r\n\r\nexport function compose(...fns) {\r\n  return (x) => fns.reduceRight((acc, fn) => fn(acc), x);\r\n}\r\n\r\nexport function map(cb) {\r\n  return (arr) => arr.map(cb);\r\n}\r\n\r\nexport function testNeedUpdate(date, periodUpdate = 24) {\r\n  // debugger\r\n  if (typeof date === 'string') {\r\n    date = new Date(date).getTime();\r\n  }\r\n  if (!date) return true;\r\n  let needUpdate = (Date.now() - date) / 1000 / 3600;\r\n  if (needUpdate > periodUpdate) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport async function fetchGroupsProducts() {\r\n  // Get groups\r\n  try {\r\n    let res = await apiForIdb.fetchGroupsEvo();\r\n    let groups = await res.items;\r\n    await apiIDB.pushItems('groups', groups);\r\n    // Get products\r\n    res = await apiForIdb.getProductsEvo();\r\n    let products = await res.items;\r\n    products = products.map((item) => {\r\n      if (!item.parent_id) item.parent_id = '0';\r\n      if (!item.barcodes) item.barcodes = [];\r\n      if (!item.photos) item.photos = [];\r\n      return item;\r\n    });\r\n    await apiIDB.pushItems('products', products);\r\n    localStorage.setItem('lastUpdate', Date.now());\r\n    console.log('LS: ' + new Date(+localStorage.lastUpdate));\r\n    return true;\r\n    // return { groups, products, load: true };\r\n  } catch (e) {\r\n    console.error(e.message);\r\n    return e;\r\n  }\r\n}\r\n\r\nexport async function isEmptyGroup(pId) {\r\n  let groupsLength = (await apiIDB.getGroupsPid(pId)).length;\r\n  let productsLength = (await apiIDB.getProductsPid(pId)).length;\r\n  if (pId === '0' || !pId) return false;\r\n  if (!(groupsLength + productsLength)) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport async function syncGroupsProducts(callback = null) {\r\n  const log = text => {\r\n    console.log(text);\r\n    if (callback) callback(text);\r\n  }\r\n  try {\r\n    // Get groups\r\n    log('Get groups...');\r\n    let res = await apiForIdb.fetchGroupsEvo();\r\n    let groups = await res.items;\r\n    // Get products\r\n    log('Get products...');\r\n    res = await apiForIdb.fetchProductsEvo();\r\n    let products = await res.items;\r\n    products = products.map((item) => {\r\n      if (!item.parent_id) item.parent_id = '0';\r\n      if (!item.barcodes) item.barcodes = [];\r\n      if (!item.photos) item.photos = [];\r\n      item.created_at = Date.parse(item.created_at);\r\n      item.updated_at = Date.parse(item.updated_at);\r\n      return item;\r\n    });\r\n    localStorage.setItem('lastUpdate', Date.now());\r\n    console.log('LS: ' + new Date(+localStorage.lastUpdate));\r\n    log('Clear storage...');\r\n    await apiIDB.clearStore('products');\r\n    await apiIDB.clearStore('groups');\r\n    log('Write groups in IDB...');\r\n    await apiIDB.pushItems('groups', groups);\r\n    log('Write products in IDB...');\r\n    await apiIDB.pushItems('products', products);\r\n    return groups;\r\n  } catch (e) {\r\n    console.error(e.message);\r\n    return e;\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nconst Navbar = props => {\r\n\r\n  return (\r\n    <nav className='navbar'>\r\n      {props.navElements}\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Navbar;","export const SET_APP_KEY = 'SET-APP-KEY';\r\nexport const SET_STORE_KEY = 'SET-STORE-KEY';\r\nexport const INIT_APP = 'INIT-APP';\r\nexport const SET_STORES = 'SET-STORES';\r\nexport const SET_LAST_UPDATE = 'SET-LAST-UPDATE';\r\nexport const SET_PERIOD_UPDATE = 'SET-PERIOD-UPDATE';\r\nexport const SET_SYNC_DATA = 'SET-SYNC-DATA';\r\nexport const CLEAR_SYNC_DATA = 'CLEAR-SYNC-DATA';\r\n","export const GET_TITLE = 'GET-TITLE';\r\nexport const CHOOSE_LANG = 'CHOOSE-LANG';\r\n","export const SET_GROUPS = 'GET-GROUPS';\r\nexport const SET_PID = 'SET-PID';\r\nexport const SET_COMMODITIES = 'GET-COMMODITIES';\r\nexport const SET_ERROR = 'SET-ERROR';\r\nexport const VIEW_FORM = 'VIEW-FORM';\r\nexport const SET_FORM_DATA = 'SET-FORM-DATA';\r\nexport const TOGGLE_FORM_POST = 'TOGGLE-FORM-POST';\r\nexport const SET_FORM_ERROR = 'SET-FORM-ERROR';\r\nexport const SET_FORM_PHOTOS = 'SET-FORM-FOTOS';\r\n","export const SET_SCHEMA = 'SET-SCHEMA';\r\n","import {\r\n  INIT_APP,\r\n  SET_APP_KEY,\r\n  SET_LAST_UPDATE,\r\n  SET_PERIOD_UPDATE,\r\n  SET_STORES,\r\n  SET_STORE_KEY,\r\n  SET_SYNC_DATA,\r\n  CLEAR_SYNC_DATA,\r\n} from '../Types';\r\n\r\nconst setAppKeyAC = (key) => {\r\n  return { type: SET_APP_KEY, key };\r\n};\r\n\r\nconst setStoreKeyAC = (key) => {\r\n  return { type: SET_STORE_KEY, key };\r\n};\r\n\r\nconst toggleInitAppAC = (init) => {\r\n  return { type: INIT_APP, init };\r\n};\r\n\r\nconst setStoresAC = (stores) => {\r\n  return { type: SET_STORES, stores };\r\n};\r\n\r\nconst setLastUpdateAC = (dateUpdate) => {\r\n  return { type: SET_LAST_UPDATE, dateUpdate };\r\n};\r\n\r\nconst setPeriodUpdateAC = (periodUpdate) => {\r\n  if (isNaN(+periodUpdate)) {\r\n    periodUpdate = 24;\r\n  } else if (+periodUpdate < 1) {\r\n    periodUpdate = 1;\r\n  } else if (+periodUpdate > 24) {\r\n    periodUpdate = 24;\r\n  } else {\r\n    periodUpdate = +periodUpdate;\r\n  }\r\n  return { type: SET_PERIOD_UPDATE, periodUpdate };\r\n};\r\n\r\nconst setSyncDataAC = ({ products, groups }) => {\r\n  return { type: SET_SYNC_DATA, products, groups };\r\n};\r\nconst clearSyncDataAC = () => {\r\n  return { type: CLEAR_SYNC_DATA };\r\n};\r\n\r\nexport const setAppKey = (key) => (dispatch) => {\r\n  dispatch(setAppKeyAC(key));\r\n};\r\n\r\nexport const setStoreKey = (key) => (dispatch) => {\r\n  dispatch(setStoreKeyAC(key));\r\n};\r\n\r\nexport const toggleInitApp = (init) => (dispatch) => {\r\n  dispatch(toggleInitAppAC(init));\r\n};\r\n\r\nexport const setStores = (stores) => (dispatch) => {\r\n  dispatch(setStoresAC(stores));\r\n};\r\n\r\nexport const initializeApp = () => (dispatch) => {\r\n  if (localStorage.appKey) {\r\n    dispatch(setAppKeyAC(localStorage.appKey));\r\n    if (localStorage.storeKey) {\r\n      dispatch(setStoreKeyAC(localStorage.storeKey));\r\n    }\r\n    if (localStorage.lastUpdate) {\r\n      dispatch(setLastUpdateAC(localStorage.lastUpdate));\r\n      dispatch(toggleInitAppAC(true));\r\n    }\r\n    if (localStorage.periodUpdate) {\r\n      dispatch(setPeriodUpdate(localStorage.periodUpdate));\r\n    }\r\n  }\r\n};\r\n\r\nexport const setLastUpdate = () => (dispatch, getState) => {\r\n  // const dateBefore = getState().app.lastUpdate;\r\n  // console.log('Date Before: ' + new Date(dateBefore).toString());\r\n  dispatch(setLastUpdateAC(localStorage.lastUpdate));\r\n  // const dateAfter = getState().app.lastUpdate;\r\n  // console.log('Date After: ' + new Date(dateAfter).toString());\r\n};\r\n\r\nexport const setPeriodUpdate = (periodUpdate) => (dispatch) => {\r\n  dispatch(setPeriodUpdateAC(periodUpdate));\r\n};\r\n\r\nexport const setSyncData = ({ products, groups }) => (dispatch) => {\r\n  dispatch(setSyncDataAC({ products, groups }));\r\n};\r\n\r\nexport const clearSyncData = () => (dispatch) => {\r\n  dispatch(clearSyncDataAC());\r\n};\r\n","import { CHOOSE_LANG, GET_TITLE } from '../Types';\r\n\r\nconst getTitleAC = (path) => ({ type: GET_TITLE, path });\r\n\r\nconst chooseLangAC = (lng) => ({ type: CHOOSE_LANG, lng });\r\n\r\nexport const getTitle = (path) => {\r\n  return (dispatch) => {\r\n    dispatch(getTitleAC(path));\r\n  };\r\n};\r\n\r\nexport const chooseLang = (lng) => {\r\n  return (dispatch) => {\r\n    dispatch(chooseLangAC(lng));\r\n  };\r\n};\r\n","export class SequelizeError extends Error {};\r\n\r\nexport class SequelizeValidationError extends SequelizeError {\r\n  constructor(errors = []) {\r\n    super(`Ошибка базы данных:\\n\\r ${errors[0].message}`);\r\n    this.name = 'SequelizeValidationError';\r\n    this.errors = errors;\r\n  }\r\n}\r\nexport class SequelizeUniqueConstraintError extends SequelizeError {\r\n  constructor(errors = []) {\r\n    super(\r\n      `Ошибка уникальности ключа:\r\n        ${errors[0].path}: ${errors[0].value}\r\n        Попробуйте обновить данные с помощью метода PUT`,\r\n    );\r\n    this.name = 'SequelizeUniqueConstraintError';\r\n    this.errors = errors;\r\n  }\r\n}\r\n","export class EvoError extends Error {}\r\n\r\n/*\r\n  errorFromEvo = {\r\n    \"value\":\"line 1, column 161\",\r\n    \"code\":\"invalid_format\",\r\n    \"message\":\"invalid value format for field\",\r\n    \"violations\":[{\"reason\":\"недейсвительное значение\",\"subject\":\"allow_to_sell\"}]\r\n  }\r\n*/\r\n\r\n/*\r\nerrorFromEvo = {\r\n  code: 'validation_failed',\r\n  message: 'validation failed for specified payload',\r\n  violations: [\r\n    {\r\n      reason: 'размер должен находиться в диапазоне от 0 до 160',\r\n      subject: 'name',\r\n    },\r\n  ],\r\n};\r\n */\r\n\r\nexport class EvoValidationError extends EvoError {\r\n  constructor(err) {\r\n    let message = err.message;\r\n    err.errors.forEach((item) => {\r\n      message += `\\n${item.subject.toUpperCase()} -> ${item.reason}`;\r\n    });\r\n    super(`Ошибка записи в облако!\\n${message}`);\r\n    this.name = 'EvoValidationError';\r\n    this.errors = err.violations;\r\n  }\r\n}\r\nexport class EvoPutError extends EvoError {\r\n  constructor(err) {\r\n    let message = err.message;\r\n    err.violations.forEach((item) => {\r\n      message += `\\n${item.subject.toUpperCase()} -> ${item.reason}`;\r\n    });\r\n    super(`Ошибка записи в облако!\\n${message}`);\r\n    this.name = err.code;\r\n    this.violations = err.violations;\r\n  }\r\n}\r\n","import {\r\n  SequelizeValidationError,\r\n  SequelizeUniqueConstraintError,\r\n} from './SequelizeErrors';\r\nimport { /* EvoError, */ EvoValidationError, EvoPutError } from './EvoErrors';\r\n\r\n/*\r\n  errorFromEvo = {\r\n    \"value\":\"line 1, column 161\",\r\n    \"code\":\"invalid_format\",\r\n    \"message\":\"invalid value format for field\",\r\n    \"violations\":[\r\n      {\r\n        \"reason\":\"недейсвительное значение\",\r\n        \"subject\":\"allow_to_sell\"\r\n      }\r\n    ]\r\n  }\r\n*/\r\n/*\r\nerrorFromEvo = {\r\n  code: 'validation_failed',\r\n  message: 'validation failed for specified payload',\r\n  violations: [\r\n    {\r\n      reason: 'размер должен находиться в диапазоне от 0 до 160',\r\n      subject: 'name',\r\n    },\r\n  ],\r\n};\r\n */\r\nexport const chooseError = (err) => {\r\n  if (err?.response) {\r\n    let res = err.response;\r\n    if (res.data?.name === 'SequelizeValidationError') {\r\n      return new SequelizeValidationError(res.data.errors);\r\n    } else if (\r\n      res.data.name &&\r\n      res.data.name === 'SequelizeUniqueConstraintError'\r\n    ) {\r\n      return new SequelizeUniqueConstraintError(res.data.errors);\r\n    } else if (res.data?.code === 'validation_failed') {\r\n      return new EvoValidationError({\r\n        message: res.data.message,\r\n        errors: res.data.errors || res.data.violations,\r\n      });\r\n    } else {\r\n      return new EvoPutError(res.data);\r\n    }\r\n  }\r\n};\r\n","import { apiForIdb } from '../../api/api';\r\nimport { apiIDB } from '../../api/apiIDB';\r\nimport { chooseError } from '../../components/Errors/chooseError';\r\nimport {\r\n  SET_COMMODITIES,\r\n  SET_GROUPS,\r\n  SET_ERROR,\r\n  SET_FORM_DATA,\r\n  SET_FORM_ERROR,\r\n  SET_FORM_PHOTOS,\r\n  SET_PID,\r\n  TOGGLE_FORM_POST,\r\n  VIEW_FORM,\r\n} from '../Types';\r\n\r\nconst setGroupsAC = (groups) => {\r\n  return { type: SET_GROUPS, groups };\r\n};\r\nconst setPidAC = (pid) => {\r\n  return { type: SET_PID, pid: pid };\r\n};\r\nconst setCommoditiesAC = (commodities) => {\r\n  return { type: SET_COMMODITIES, commodities };\r\n};\r\nconst setErrorAC = (error) => {\r\n  return { type: SET_ERROR, error };\r\n};\r\nconst setFormErrorAC = (error) => {\r\n  return { type: SET_FORM_ERROR, error };\r\n};\r\nconst viewFormAC = (view) => {\r\n  return { type: VIEW_FORM, viewForm: view };\r\n};\r\nconst setFormDataAC = (formData, isGroup = false) => {\r\n  return { type: SET_FORM_DATA, formData, isGroup };\r\n};\r\nconst toggleFormPostAC = (formPost) => {\r\n  return { type: TOGGLE_FORM_POST, formPost };\r\n};\r\nconst setFormPhotosAC = (photos) => {\r\n  return { type: SET_FORM_PHOTOS, photos };\r\n};\r\n\r\nexport const getProducts = (pId) => {\r\n  return (dispatch) => {\r\n    apiIDB.getProductsPid(pId).then((res) => {\r\n      // console.log(res)\r\n      dispatch(setCommoditiesAC(res));\r\n    });\r\n  };\r\n};\r\n\r\nexport const getProductId = (id, isGroup = false) => {\r\n  if (!id) return (dispatch) => dispatch(viewFormAC(true));\r\n  return (dispatch) => {\r\n    let getData;\r\n    if (isGroup) {\r\n      getData = apiIDB.getGroup;\r\n    } else {\r\n      getData = apiIDB.getProduct;\r\n    }\r\n    getData(id)\r\n      .then((res) => {\r\n        // console.log(res)\r\n        dispatch(setFormDataAC(res, isGroup));\r\n        return true;\r\n      })\r\n      .then((result) => {\r\n        if (result) dispatch(viewFormAC(true));\r\n      });\r\n  };\r\n};\r\n\r\nexport const getGroups = () => {\r\n  return (dispatch) => {\r\n    apiIDB.getGroup('all').then((res) => {\r\n      dispatch(setGroupsAC(res));\r\n    });\r\n  };\r\n};\r\n\r\nexport const setGroups = (groups) => (dispatch) => {\r\n  dispatch(setGroupsAC(groups));\r\n};\r\n\r\nexport const setViewForm = (view) => (dispatch) => {\r\n  dispatch(viewFormAC(view));\r\n};\r\n\r\nexport const setFormData = (formData) => (dispatch) => {\r\n  dispatch(setFormDataAC(formData));\r\n};\r\n\r\nexport const postFormData = (typeData, typeQuery, body) => (dispatch) => {\r\n  // debugger\r\n  let path;\r\n  switch (typeData) {\r\n    case 'product':\r\n      path = 'product';\r\n      break;\r\n    case 'group':\r\n      path = 'group';\r\n      break;\r\n    default:\r\n      path = 'product';\r\n      break;\r\n  }\r\n  let callbackApi;\r\n  switch (typeQuery) {\r\n    case 'post':\r\n      callbackApi = apiForIdb.postData;\r\n      break;\r\n    case 'put':\r\n      callbackApi = apiForIdb.putData;\r\n      break;\r\n    default:\r\n      callbackApi = apiForIdb.postData;\r\n      break;\r\n  }\r\n  callbackApi(path, body)\r\n    .then((res) => {\r\n      if (res.status < 400 || res.id) {\r\n        apiIDB.putData(`${path}s`, res);\r\n      } else {\r\n        throw chooseError(res);\r\n      }\r\n      return res;\r\n    })\r\n    .then((res) => {\r\n      if (typeData === 'group') return res.id;\r\n      return res.parent_id ? res.parent_id : '0';\r\n    })\r\n    .then((pid) => {\r\n      dispatch(toggleFormPostAC(false));\r\n      dispatch(viewFormAC(false));\r\n      dispatch(setFormDataAC(null));\r\n      if (typeData === 'group') {\r\n        apiIDB\r\n          .getGroup('all')\r\n          .then((res) => dispatch(setGroupsAC(res)))\r\n          .then(dispatch(setPidAC(pid)));\r\n      } else {\r\n        dispatch(setPidAC(pid));\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.dir(err);\r\n      alert(err);\r\n      dispatch(setFormErrorAC(chooseError(err)));\r\n      dispatch(toggleFormPostAC(false));\r\n    });\r\n};\r\n\r\nexport const deleteProduct = (id, pid, path = 'product') => async (\r\n  dispatch,\r\n  getState,\r\n) => {\r\n  try {\r\n    pid = !pid ? getState().commodityPage.pid : pid;\r\n    let res = await apiForIdb.deleteData(path, id);\r\n    // console.log(res.status);\r\n    if (res.status >= 400) {\r\n      throw new Error(`Error deleting object \\n\\r id: ${id}`);\r\n    } else {\r\n      await apiIDB.deleteData(`${path}s`, id);\r\n      if (path === 'group') {\r\n        let groups = await apiIDB.getGroup('all');\r\n        dispatch(setGroupsAC(groups));\r\n        pid = '0';\r\n      }\r\n      dispatch(setPidAC(pid || '0'));\r\n      return id;\r\n    }\r\n  } catch (err) {\r\n    console.dir(err);\r\n    dispatch(setErrorAC(chooseError(err)));\r\n  }\r\n};\r\n\r\nexport const setCommodities = (commodities) => (dispatch) =>\r\n  dispatch(setCommoditiesAC(commodities));\r\n\r\nexport const setFormPhotos = (photos) => (dispatch) =>\r\n  dispatch(setFormPhotosAC(photos));\r\n\r\nexport const setPid = (pId) => (dispatch) => dispatch(setPidAC(pId));\r\n\r\nexport const setError = (err) => (dispatch) => dispatch(setErrorAC(err));\r\n\r\nexport const setFormError = (err) => (dispatch) =>\r\n  dispatch(setFormErrorAC(err));\r\n\r\nexport const toggleFormPost = (formPost) => (dispatch) =>\r\n  dispatch(toggleFormPostAC(formPost));\r\n","import { NavLink } from \"react-router-dom\";\r\nimport { getTitle } from \"../../redux/Actions\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst mapState = (state, ownProps) => {\r\n  let { to, exact, activeClassName } = ownProps;\r\n  return { activeClassName, to, exact };\r\n};\r\n\r\nconst mapDispatch = (dispatch, ownProps) => {\r\n  let { to } = ownProps;\r\n  return {\r\n    onClick: () => {\r\n      getTitle(to);\r\n    },\r\n  };\r\n};\r\n\r\nconst NavLinkContainer = connect(mapState, mapDispatch)(NavLink);\r\n\r\nexport default NavLinkContainer;\r\n","import React from 'react';\r\nimport s from './Navbar.module.css';\r\nimport Navbar from './Navbar';\r\nimport { connect } from 'react-redux';\r\nimport NavLinkContainer from './NavLinkContainer';\r\n\r\nfunction getNavElements(state) {\r\n\r\n  let currentLang = state.navigation.currentLang;\r\n  let navElements = state.navigation.navBar.map((nav, idx) => {\r\n    let ex;\r\n    nav.link === \"/\" ? ex = true : ex = false;\r\n    return (\r\n      <div className={s.item} key={idx}>\r\n        <NavLinkContainer\r\n          exact={ex}\r\n          to={nav.link}\r\n          activeClassName={s.active}>\r\n          {nav.title[currentLang]}\r\n        </NavLinkContainer>\r\n      </div>\r\n    );\r\n  });\r\n  return navElements;\r\n}\r\n\r\nconst mapState = state => {\r\n  return {\r\n    navElements: getNavElements(state)\r\n  }\r\n}\r\n\r\nconst NavbarContainer = connect(mapState)(Navbar);\r\n\r\nexport default NavbarContainer;","import React, { useEffect, useState } from 'react';\r\nimport s from './Header.module.css';\r\nimport logo from '../../Assets/img/terminal-5.png';\r\nimport ProgressBar from '../common/ProgressBar/ProgressBar';\r\nimport { /* fetchGroupsProducts, */ syncGroupsProducts, testNeedUpdate } from '../../api/apiUtils';\r\nimport NavbarContainer from '../Navbar/NavbarContainer';\r\n// import ProgressBar2 from '../common/ProgressBar/ProgressBar2';\r\n\r\nconst Header = (props) => {\r\n\r\n    const [isInit, setIsInit] = useState(false);\r\n    const [lastUpdate, setLastUpdate] = useState(null);\r\n    const [updated, setUpdated] = useState(false);\r\n    const [needUpdate, setNeedUpdate] = useState(false);\r\n    const [text, setText] = useState('');\r\n\r\n    function clickLang(ev) {\r\n        let lng;\r\n        if (ev.target.name === 'lng') {\r\n            lng = ev.target.value;\r\n            props.chooseLang(lng);\r\n            props.getTitle(props.path);\r\n        } else {\r\n            return;\r\n        }\r\n    }\r\n    async function clickDateUpdate() {\r\n        setUpdated(true);\r\n        let result = await syncGroupsProducts(setText);\r\n        console.log('fetchGroupsProducts - ' + result.length);\r\n        props.setLastUpdate();\r\n        props.setGroups(result);\r\n        setText('');\r\n        setUpdated(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (props.isInit) {\r\n            setIsInit(true)\r\n            setTimeout(() => {\r\n                setIsInit(false)\r\n                let date = new Date(+props.lastUpdate);\r\n                setLastUpdate(date.toString());\r\n            }, 500);\r\n        }\r\n    }, [props.isInit, props.lastUpdate])\r\n\r\n    useEffect(() => {\r\n        setNeedUpdate(testNeedUpdate(lastUpdate, props.periodUpdate));\r\n    }, [lastUpdate, props.periodUpdate])\r\n\r\n    let styleH5 = (needUpdate && { color: 'red' }) || { color: 'blue' };\r\n\r\n    return (\r\n        <header>\r\n            <div className={s['column-1']}>\r\n                <div className={s['info']}>\r\n                    {!props.isInit && <h4>Initializing App...</h4>}\r\n                    {isInit && <h4>App Is Init!</h4>}\r\n                    {updated && <ProgressBar limit={20} delay={500} text={text} />}\r\n                    {!isInit && !updated &&\r\n                        <div style={{ cursor: 'pointer' }} onClick={clickDateUpdate}>\r\n                            <h5 style={styleH5}>{lastUpdate && 'Синхронизировано - '}{lastUpdate}</h5>\r\n                        </div>}\r\n                </div>\r\n                <div className={s['navbar']}>\r\n                    <NavbarContainer />\r\n                </div>\r\n            </div>\r\n            <div className={s['column-2']}>\r\n                <div className={s['title']}>\r\n                    <h2>{props.title}</h2>\r\n                    <img src={logo} alt='Logo'></img>\r\n                </div>\r\n                <div className={s.lng} onClick={clickLang}>\r\n                    <input name=\"lng\" type=\"radio\" value='ru' checked={!props.currentLang}\r\n                        onChange={(ev) => ev.target.checked = !props.currentLang} />RU\r\n                    <input name=\"lng\" type=\"radio\" value='en' checked={props.currentLang}\r\n                        onChange={(ev) => ev.target.checked = props.currentLang} />EN\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Header from './Header';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { useEffect } from 'react';\r\nimport { getTitle, chooseLang, setLastUpdate, setGroups } from '../../redux/Actions';\r\n\r\nconst HeaderContainer = props => {\r\n\r\n    let path = '/' + props.location.pathname.split('/')[1];\r\n\r\n    const getTitle = props.getTitle;\r\n    useEffect(() => {\r\n        getTitle(path);\r\n    }, [path, getTitle])\r\n\r\n    return <Header {...props} path={path} />\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\r\n    let className;\r\n    return {\r\n        navBar: state.navigation.navBar,\r\n        title: state.navigation.title,\r\n        className,\r\n        currentLang: state.navigation.currentLang,\r\n        isInit: state.app.isInit,\r\n        lastUpdate: state.app.lastUpdate,\r\n        periodUpdate: state.app.periodUpdate,\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    { getTitle, chooseLang, setLastUpdate, setGroups }\r\n)(withRouter(HeaderContainer));\r\n","export default __webpack_public_path__ + \"static/media/placeholder.e2f04097.svg\";","import React from \"react\";\r\nimport spiner from \"../../../Assets/img/placeholder.svg\";\r\n\r\nlet Preloader = (props) => {\r\n  return (\r\n    <div>\r\n      <img src={spiner} alt=\"\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Preloader;","export function randomMax(max: number): number {\r\n  return Math.floor(Math.random() * Math.floor(max));\r\n}\r\n\r\nexport function getUUID4(): string {\r\n\r\n  let arr = [];\r\n  while (arr.length < 16) {\r\n    let byte = randomMax(16).toString(16).concat(randomMax(16).toString(16));\r\n    if (arr.length === 6)\r\n      byte = ((parseInt('0x' + byte, 16) & 0x0f) | 0x40).toString(16);\r\n    if (arr.length === 8)\r\n      byte = ((parseInt('0x' + byte, 16) & 0x3f) | 0x80).toString(16);\r\n    arr.push(byte);\r\n  }\r\n\r\n  let newStr = arr.join('');\r\n  let strUuid = newStr.slice(0, 8);\r\n  strUuid += '-' + newStr.slice(8, 12);\r\n  strUuid += '-' + newStr.slice(12, 16);\r\n  strUuid += '-' + newStr.slice(16, 20);\r\n  strUuid += '-' + newStr.slice(20);\r\n  return strUuid;\r\n}\r\n\r\nexport function dateToString(date: Date = new Date()) {\r\n  if (!date) return;\r\n  function dblDigit(dgt: number) {\r\n      if (dgt.toString().length < 2) {\r\n          return `0${dgt}`;\r\n      } else { return dgt };\r\n  }\r\n  let strDate = `${date.getFullYear()}-${dblDigit(date.getMonth() + 1)}-${dblDigit(date.getDate())}`;\r\n  return strDate;\r\n}\r\n\r\nexport function getMinData() {\r\n  let key = localStorage.getItem('storeKey');\r\n  if (!key) return '';\r\n  try {\r\n      let min = key.split('-')[0];\r\n      let year = min.slice(0, 4);\r\n      let month = min.slice(4, 6);\r\n      let day = min.slice(6)\r\n      return `${year}-${month}-${day}`;\r\n  } catch (e) {\r\n      console.error(e.message)\r\n  }\r\n}\r\n","import { apiIDB } from '../../../api/apiIDB';\r\nimport { randomMax } from '../../common/utillites/utilites';\r\n\r\nexport const setNewCode = async () => {\r\n  //let maxCode = Math.floor(Math.random() * 1e5);//await productsApi.getData('products', { max: 'code' });\r\n  let arr = await apiIDB.getProduct();\r\n  // debugger\r\n  let codes = arr.map((item) => +item.code || 0);\r\n  let maxCode = Math.max.apply(null, codes);\r\n  let newCode = maxCode + 1;\r\n  return newCode;\r\n};\r\n\r\nexport function newBarcode(code, prefix = '0000') {\r\n  // if (!prefix) prefix = '0000';\r\n  code = '';\r\n  for (let i = 1; i <= 6; i++) {\r\n    code += randomMax(9).toString();\r\n  }\r\n  let A1 =\r\n    '20'.concat(prefix) + code;\r\n    // '0'.repeat(6 - code.toString().length) + code.toString();\r\n  let A2 = 0;\r\n  A1.split('').forEach((item, i) => {\r\n    if (i % 2 !== 0) {\r\n      A2 += Number(item) * 3;\r\n    } else {\r\n      A2 += Number(item);\r\n    }\r\n  });\r\n  A2 = (10 - (A2 % 10)) % 10;\r\n  return A1.concat(A2);\r\n}\r\n\r\nexport function viewBarcode(barcode) {\r\n  let f1 = 65;\r\n  let f2 = 75;\r\n  let s = [\r\n    [f1, f1, f1, f1, f1, f1],\r\n    [f1, f1, f2, f1, f2, f2],\r\n    [f1, f1, f2, f2, f1, f2],\r\n    [f1, f1, f2, f2, f2, f1],\r\n    [f1, f2, f1, f1, f2, f2],\r\n    [f1, f2, f2, f1, f1, f2],\r\n    [f1, f2, f2, f2, f1, f1],\r\n    [f1, f2, f1, f2, f1, f2],\r\n    [f1, f2, f1, f2, f2, f1],\r\n    [f1, f2, f2, f1, f2, f1],\r\n  ];\r\n\r\n  try {\r\n    let bcStr = barcode.split('')[0];\r\n    let n = Number(bcStr);\r\n\r\n    for (let i = 1; i <= 6; i++) {\r\n      bcStr += String.fromCharCode(Number(barcode.substr(i, 1)) + s[n][i - 1]);\r\n    }\r\n    bcStr += String.fromCharCode(42);\r\n    for (let i = 7; i <= 12; i++) {\r\n      bcStr += String.fromCharCode(Number(barcode.substr(i, 1)) + 97);\r\n    }\r\n\r\n    bcStr += String.fromCharCode(43);\r\n    return { str: bcStr, err: null };\r\n  } catch (err) {\r\n    return { str: null, err: err.message };\r\n  }\r\n}\r\n\r\nexport function validateBarcode(barcode) {\r\n  function testBarcode() {\r\n    if (isNaN(Number(barcode))) return false;\r\n    if (![7, 8, 12, 13].includes(barcode.length)) {\r\n      return false;//`Not valid Length barcode: ${barcode.length}`;\r\n    }\r\n    let res = 0;\r\n    barcode.split('').forEach((item, i) => {\r\n      if (i % 2 !== 0) {\r\n        res += Number(item) * 3;\r\n        res = res % 10;\r\n      } else {\r\n        res += Number(item);\r\n        res = res % 10;\r\n      }\r\n    });\r\n    return res;\r\n  }\r\n\r\n  let res = testBarcode(barcode);\r\n\r\n  if (res !== 0) {\r\n    let message = '';\r\n    if (barcode.length === 13 || barcode.length === 8) {\r\n      let errDig = barcode.slice(-1);\r\n      message += 'Not valid control digit: ' + errDig + '\\r\\n';\r\n      message += validateBarcode(barcode.slice(0, -1));\r\n    } else if (barcode.length === 12 || barcode.length === 7) {\r\n      let newRes = 10 - res;\r\n      message += 'Need add control digit: ' + newRes;\r\n    } else {\r\n      message += 'Not valid Length barcode: ' + barcode.length;\r\n    }\r\n    return message;\r\n  }\r\n  return res;\r\n}\r\n\r\nexport function validateZeroData(curr/* , prev */) {\r\n  for (let key in curr) {\r\n    /* let arrNotChanged = false;\r\n    if (Array.isArray(curr[key])) {\r\n      let compare = arrCompare(curr[key], prev[key]);\r\n      arrNotChanged = !compare.resArrMinus.length && !compare.resArrPlus.length;\r\n    } */\r\n\r\n    let isNotData = curr[key] === null || curr[key] === undefined;\r\n    // (curr.isNewData && !curr[key]);\r\n\r\n    // let isNotChanged = !curr.isNewData && curr[key] === prev[key];\r\n\r\n    if (/* arrNotChanged || */ isNotData /* || isNotChanged */) {\r\n      delete curr[key];\r\n    }\r\n  }\r\n}\r\n\r\nexport function validateRequiredData(body, isGroup = false) {\r\n  let reqData;\r\n\r\n  if (isGroup) {\r\n    reqData = ['name'];\r\n  } else {\r\n    reqData = [\r\n      'type',\r\n      'name',\r\n      // 'price',\r\n      'measure_name',\r\n      'tax',\r\n      'allow_to_sell',\r\n    ];\r\n  }\r\n  let missData = [];\r\n\r\n  Object.keys(body).forEach((key) => {\r\n    if (!body[key] && reqData.includes(key)) {\r\n      missData.push(key);\r\n    }\r\n  });\r\n\r\n  return missData;\r\n}\r\n\r\nexport function arrCompare(arr1 = [], arr2 = []) {\r\n  let resArrPlus = [];\r\n  arr2.forEach((item) => {\r\n    if (!arr1.includes(item)) {\r\n      resArrPlus.push(item);\r\n    }\r\n  });\r\n  let resArrMinus = [];\r\n  arr1.forEach((item) => {\r\n    if (!arr2.includes(item)) {\r\n      resArrMinus.push(item);\r\n    }\r\n  });\r\n  return { resArrPlus, resArrMinus };\r\n}\r\n\r\nexport function dateToLocaleString(date = new Date()) {\r\n  let days = ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пят', 'Суб'];\r\n  let day = date.getDay();\r\n  return `${days[day]} ${date.toLocaleString()}`;\r\n}\r\n","/* Target\r\n    tree = {\r\n        id:'root',\r\n        label: 'root'\r\n        childs: [\r\n            node:{\r\n                id: 'id',\r\n                pid: 'pid',\r\n                label: 'label',\r\n                childs: [\r\n                    node: {\r\n                        id: 'id',\r\n                        pid: 'pid',\r\n                        label: 'label',\r\n                        childs: []\r\n                    },\r\n                    node: {...},\r\n                    node: {...},\r\n                    node: {...},\r\n                ]\r\n            },\r\n            node: {...},\r\n            node: {...},\r\n        ]\r\n    }\r\n*/\r\n\r\nfunction createNode(item) {\r\n  let node = { ...item };\r\n  node.childs = [];\r\n  return node;\r\n}\r\n\r\nfunction addNode(subNode, parentNode) {\r\n  let pNode = findNode(subNode.pid, parentNode);\r\n  try {\r\n    if (pNode === undefined) return subNode;\r\n    pNode.childs.push(subNode);\r\n    pNode.childs.sort((a, b) => {\r\n      if (a.label > b.label) return 1;\r\n      if (a.label < b.label) return -1;\r\n      return 0;\r\n    });\r\n    return false;\r\n  } catch (e) {\r\n    console.error(e.message);\r\n  }\r\n}\r\n\r\nfunction findNode(pid, pNode) {\r\n  if (pid === null) pid = '0';\r\n  let result = pNode.childs.find((item) => item.id === pid);\r\n\r\n  if (result === undefined) {\r\n    for (let node of pNode.childs) {\r\n      result = findNode(pid, node);\r\n      if (result) break;\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction createTree(data, root) {\r\n  let notFoundNodes = [];\r\n  data.forEach((item) => {\r\n    let node = createNode(item);\r\n    let notFoundNode = addNode(node, root);\r\n    if (notFoundNode) {\r\n      notFoundNodes.push(notFoundNode);\r\n    }\r\n  });\r\n  if (notFoundNodes.length) {\r\n    createTree(notFoundNodes, root);\r\n  }\r\n  notFoundNodes = [];\r\n  return root;\r\n}\r\nexport default createTree;\r\n\r\nexport function chooseNotHiddenGroups(startId = '0', groups = []) {\r\n  if (!startId || startId === '0' || !groups.length) return [];\r\n  let arr = [];\r\n  let current = groups.find((g) => g.id === startId);\r\n  if (!current || !current.pid) return [];\r\n  while (current.pid !== '0') {\r\n    let elem = groups.find((g) => g.id === current.pid);\r\n    if (!elem) break;\r\n    arr.push(elem.id);\r\n    current = elem;\r\n  }\r\n  return arr;\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { CurrentPidContext } from './Tree';\r\n\r\nconst Node = props => {\r\n\r\n  const context = useContext(CurrentPidContext);\r\n\r\n  const [icon, setIcon] = useState(null/* props.hidden ? 'far fa-folder' : 'far fa-folder-open' */);\r\n\r\n  const [isOpen, setIsOpen] = useState(null/* props.hidden ? 'closed' : 'open' */);\r\n\r\n  const hasChildren = !!props.children.length;\r\n\r\n  const [hidden, setHidden] = useState(props.hidden);\r\n\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (hidden) {\r\n      setIcon(\"far fa-folder\");\r\n      setIsOpen(hasChildren ? \"closed children\" : \"closed\");\r\n    } else {\r\n      setIcon(\"far fa-folder-open\");\r\n      setIsOpen(hasChildren ? \"open children\" : \"open\");\r\n    }\r\n  }, [hidden, hasChildren, props.id])\r\n\r\n  useEffect(() => {\r\n    if (props.id === context.pId) {\r\n      setSelected(true);\r\n    }\r\n    if (context.arrNotHidden.length) {\r\n      if (context.arrNotHidden.includes(props.id)) setHidden(false);\r\n    }\r\n    return () => setSelected(false);\r\n  }, [context.arrNotHidden, context.pId, props.id])\r\n\r\n  const clickGroup = (ev) => {\r\n    ev.stopPropagation();\r\n    if (props.id !== '0') setHidden(hidden => !hidden);\r\n    if (props.callback) {\r\n      let tagName = ev.target.tagName;\r\n      let className = ev.target.className;\r\n      props.callback(props.id.toString(), tagName, className);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <li id={props.id} className={isOpen} onClick={clickGroup}>\r\n        <i className={icon}></i>\r\n        <span className={(selected && props.classSelected) || ''}>\r\n          {props.label}\r\n        </span>\r\n        {(props.id !== '0') && hasChildren &&\r\n          <span className={props.className}>\r\n            {props.children.length}\r\n          </span>}\r\n          {props.viewEdit && props.id !== '0' && <i className='fa fa-edit'></i>}\r\n        {hasChildren && <ul hidden={hidden}>{props.children}</ul>}\r\n      </li>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Node;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport s from \"./Tree.module.css\";\r\nimport createTree, { chooseNotHiddenGroups } from \"./treeFunction\";\r\nimport Node from \"./Node\";\r\n\r\nexport const CurrentPidContext = React.createContext({ pId: 'no' });\r\n\r\nconst Tree = props => {\r\n\r\n  const nodeRoot = { id: '0', label: props.price, childs: [] };\r\n  const tree = { id: \"Tree\", label: props.treeLabel, childs: [nodeRoot] };\r\n  const [arrNotHidden, setArrNotHidden] = useState([]);\r\n  const context = { pId: props.pId, arrNotHidden };\r\n\r\n  createTree(props.data, tree);\r\n\r\n  function createSubTree(item, lvl = 0) {\r\n    let hidden;\r\n    lvl += 1;\r\n    let children = [];\r\n    if (item.childs?.length) {\r\n      children = item.childs.map(elem => {\r\n        return createSubTree(elem, lvl);\r\n      });\r\n    }\r\n    hidden = lvl > 1 && !arrNotHidden.includes(({id}) => id === item.id);\r\n    return (\r\n      <Node\r\n        id={item.id}\r\n        parent_id={item.pid}\r\n        key={item.id}\r\n        label={item.label}\r\n        children={children}\r\n        hidden={hidden}\r\n        className={s['children-length']}\r\n        classSelected={s.selected}\r\n        callback={true && props.callback}\r\n        viewEdit={props.viewEdit}\r\n      />\r\n    );\r\n  }\r\n\r\n  useEffect(() => {\r\n    let arr = chooseNotHiddenGroups(props.pId, props.data);\r\n    setArrNotHidden([...arr]);\r\n  }, [props.data, props.pId])\r\n\r\n  return (\r\n    <CurrentPidContext.Provider value={context}>\r\n      <div id={tree.id} className={s.tree}>\r\n        {/* <h3>{tree.label}</h3> */}\r\n        <ul>{createSubTree(nodeRoot)}</ul>\r\n      </div>\r\n    </CurrentPidContext.Provider>\r\n\r\n  );\r\n};\r\n\r\nexport default Tree;\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport schema from './products.json';\r\nimport { viewBarcode } from '../frmUtilites';\r\nimport Tree from '../../../common/Tree/Tree';\r\nimport s from '../Form.module.css';\r\n\r\nexport const ComponentsProducts = {\r\n    MeasureNames: props => {\r\n        return (\r\n            <label>\r\n                Measure Name\r\n                <select name=\"measure_name\"\r\n                    id={props.id}\r\n                    value={props.measure_name}\r\n                    onChange={props.handleChange}\r\n                    disabled={props.disabled}>\r\n                    {\r\n                        schema.measure_names.map((m, i) => {\r\n                            return <option key={i} value={m}>{m}</option>\r\n                        })\r\n                    }\r\n                </select>\r\n            </label>\r\n        )\r\n    },\r\n    Types: props => {\r\n        return (\r\n            <label>\r\n                Type\r\n                <select name=\"type\"\r\n                    id={props.id}\r\n                    value={props.type}\r\n                    onChange={props.handleChange}\r\n                    disabled={props.disabled}>\r\n                    {\r\n                        schema.types.map((t, i) => {\r\n                            return <option key={i} value={t.type}>{t.description}</option>\r\n                        })\r\n                    }\r\n                </select>\r\n            </label>\r\n        )\r\n    },\r\n    Taxes: props => {\r\n        return (\r\n            <label className={s.tax}>\r\n                Tax\r\n                <select name=\"tax\"\r\n                    id={props.id}\r\n                    value={props.tax}\r\n                    onChange={props.handleChange}\r\n                    disabled={props.disabled}>\r\n                    {\r\n                        schema.taxes.map((t, i) => {\r\n                            return <option key={i} value={t.tax}>{t.description}</option>\r\n                        })\r\n                    }\r\n                </select>\r\n            </label>\r\n        )\r\n    },\r\n    Groups: props => {\r\n        let groups = props.groups.sort((a, b) => {\r\n            if (a.label > b.label) return 1;\r\n            if (a.label < b.label) return -1;\r\n            return 0;\r\n        })\r\n        return (\r\n            <label>\r\n                Group:\r\n                <select name=\"parent_id\" id={props.id}\r\n                    value={props.parent_id} onChange={props.handleChange} disabled={props.disabled}>\r\n                    <option key='0' value='0'>Root</option>\r\n                    {groups.map(g => {\r\n                        return <option key={g.id} value={g.id}>{g.label}</option>\r\n                    })}\r\n                </select>\r\n            </label>\r\n        )\r\n    },\r\n    GroupsTree: props => {\r\n        const groups = [...props.groups];\r\n        let g = groups.find(item => item.id === props.parent_id);\r\n        let gLabel = g ? g.label : 'Root';\r\n        let onDivClick = props.disabled ? null : props.onClick;\r\n\r\n        return (\r\n            <div className={s['tree-container']}>\r\n                {props.treeView &&\r\n                    <div className={s.tree} >\r\n                        <Tree\r\n                            data={groups}\r\n                            price=\"Price\"\r\n                            treeLabel=\"Groups\"\r\n                            callback={props.callbackTree}\r\n                            pId={props.parent_id}\r\n                        />\r\n                    </div>\r\n                }\r\n                <div className={s['g-tree']} onClick={onDivClick}>\r\n                    <div name='parent_id'>\r\n                        {gLabel}\r\n                        <i className='fa fa-share-alt fa-1x'></i>\r\n                    </div>\r\n                </div >\r\n            </div>\r\n        )\r\n    },\r\n\r\n    // classDiv: s['g-tree'], classTree: s.tree,\r\n\r\n    Barcodes: props => {\r\n\r\n        const [view, setView] = useState(false);\r\n\r\n        let barcodes = [];\r\n        if (props.barcodes?.length) {\r\n            barcodes = [...props.barcodes];\r\n        }\r\n\r\n        const delBcClick = ev => {\r\n            if (!props.allow_edit) return;\r\n            let elem;\r\n            if (ev.target.className === s['del-bc']) {\r\n                elem = ev.target.closest('li');\r\n            }\r\n            if (!elem) return;\r\n            props.deleteFromArray(elem.id, 'barcodes');\r\n        }\r\n\r\n        const toggleViewBarcodes = () => {\r\n            setView(view => !view);\r\n        }\r\n\r\n        return (\r\n            <fieldset name='img_barcodes'>\r\n                <legend onClick={toggleViewBarcodes} style={{ cursor: 'pointer' }}>Barcodes</legend>\r\n                <div className={view ? s['barcodes'] : `${s['barcodes']} ${s['barcodes-hidden']}`}>\r\n                    <div className={s['view-barcode']}>\r\n                        <ul>\r\n                            {barcodes.map(b => {\r\n                                return (\r\n                                    <li key={b} id={b} onClick={delBcClick}>\r\n                                        <div className={s['barcode']}>\r\n                                            {\r\n                                                viewBarcode(b).str ||\r\n                                                <div className={s['barcode-err']}>\r\n                                                    {viewBarcode(b).err} <br />\r\n                                                    <b>'Ошибочный штрихкод!!!'</b>\r\n                                                </div>\r\n                                            }\r\n                                            <span>{b}</span>\r\n                                        </div>\r\n                                        {props.allow_edit && <span className={s['del-bc']}></span>}\r\n                                    </li>\r\n                                )\r\n                            })}\r\n                        </ul>\r\n                    </div>\r\n                    <input name='barcodes' type=\"text\" defaultValue={props.bc}\r\n                        onChange={props.handleChange} onBlur={props.handleBlur}\r\n                        disabled={props.disabled} />\r\n                    <span className={s['add-bc']}></span>\r\n                </div>\r\n            </fieldset >\r\n        )\r\n    },\r\n    Picture: props => {\r\n        return (\r\n            <div className={props.divPicture} onClick={props.pictureClick}>\r\n                <img id={props.photo.name} className={props.className}\r\n                    src={URL.createObjectURL(props.photo)}\r\n                    alt=\"no\" tabIndex='-1'\r\n                />\r\n                <span></span>\r\n            </div>\r\n        )\r\n    },\r\n    Attributes: ({ attributes, clickChoice, disabled, attributes_choices }) => {\r\n\r\n        const toggleAttrSelected = useCallback(() => {\r\n            if (!!attributes_choices && Object.keys(attributes_choices)?.length) {\r\n                Object.keys(attributes_choices).forEach(key => {\r\n                    let elem = document.getElementById(attributes_choices[key]);\r\n                    if (elem) {\r\n                        elem.classList.add(s['selected'])\r\n                    }\r\n                })\r\n            }\r\n        }, [attributes_choices])\r\n        useEffect(() => {\r\n            toggleAttrSelected();\r\n        }, [toggleAttrSelected])\r\n\r\n        return (\r\n            <div className={s['attr-container']}>\r\n                <label>Аттрибуты</label>\r\n                <div className={s.attr}>\r\n                    {!!attributes?.length &&\r\n                        attributes.map(attr => {\r\n                            if (!disabled || attributes_choices[attr.id]) {\r\n                                return (\r\n                                    <div className={s['attr-select']} key={attr.id}>\r\n                                        <h4>{attr.name}</h4>\r\n                                        <div id={attr.id} className={s['attr-choices']}\r\n                                            onClick={!disabled ? clickChoice : undefined}>\r\n                                            {\r\n                                                attr.choices.map(item => {\r\n                                                    if (!disabled || attributes_choices[attr.id] === item.id) {\r\n                                                        return (\r\n                                                            <span id={item.id} key={item.id} className={s['choice']}>\r\n                                                                {item.name}\r\n                                                            </span>\r\n                                                        )\r\n                                                    } else {\r\n                                                        return null;\r\n                                                    }\r\n                                                })\r\n                                            }\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            } else {\r\n                                return null;\r\n                            }\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport s from './Form.module.css';\r\n\r\nconst FormImg = ({photo}) => {\r\n\r\n  return (\r\n    <>\r\n      <img className={s['big-img']}\r\n        src={photo}\r\n        alt=\"no\" tabIndex='-1'\r\n        style={{display: 'inline-block', width: '100vh',\r\n               position: 'fixed', top: '10vh', left: 'calc((100vw - 100vh)/2)',\r\n               verticalAlign: 'middle'}}\r\n      /><span></span>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FormImg;\r\n","import React, { useLayoutEffect } from \"react\";\r\nimport s from './FormModalWrapper.module.css';\r\n\r\nconst FormModalWrapper = props => {\r\n\r\n  const showForm = () => {\r\n    document.body.style.overflow = 'hidden';\r\n    setTimeout(() => {\r\n      let container = document.getElementById(s['container']);\r\n      container.style.top = '1rem'\r\n    }, 0);\r\n  }\r\n\r\n  useLayoutEffect(showForm, []);\r\n\r\n  return (\r\n    <>\r\n      <div id={s['cover-div']}></div>\r\n      <div className={s.container} id={s.container}>\r\n        {props.children}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\n\r\n\r\nexport default FormModalWrapper;\r\n","import { useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport style from './Modal.module.css';\r\n\r\nconst modalRoot = document.getElementById('modal-root');\r\n\r\nexport function Modal(props) {\r\n\r\n  const [children, setChildren] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const modalRootChildCount = modalRoot.childElementCount;\r\n    const zIndex = 9000 + modalRootChildCount + 1\r\n    const child =\r\n      <>\r\n        <div className={style['div-cover']} style={{zIndex}}></div>\r\n        <div className={style['div-container']} style={{zIndex: zIndex + 1}}>{props.children}</div>\r\n      </>\r\n    setChildren(child);\r\n    document.body.style.overflow = 'hidden';\r\n    return () => {\r\n      setChildren(null);\r\n      document.body.style.overflow = 'auto';\r\n    }\r\n  }, [props.children])\r\n\r\n  return ReactDOM.createPortal(children, modalRoot)\r\n}\r\n","import React from 'react';\r\n\r\nexport function AddElement(props: {\r\n  action: string;\r\n  typeElem: string;\r\n  label: string;\r\n}) {\r\n\r\n  const { action, typeElem, label } = props;\r\n\r\n  return (\r\n    <div style={{ cursor: 'pointer' }}>\r\n      <strong data-action={`${action}-${typeElem}`}>\r\n        + {label}\r\n      </strong>\r\n    </div>)\r\n}\r\n","import React from 'react';\r\nimport { FormChangeNameProps } from \"../BlockModTypes\";\r\nimport s from '../BlockMod.module.css';\r\n\r\nexport function FormChangeName(props: FormChangeNameProps) {\r\n\r\n  let { value, label, nameOfAttr, onChange, handleClick } = props;\r\n\r\n  return (\r\n    <>\r\n      <div data-name='form-change-name' className={s['form-change-name']}>\r\n        {!!nameOfAttr && <h3>Аттрибут: {nameOfAttr}</h3>}\r\n        <label htmlFor='input-name'>{label}</label>\r\n        <input type=\"text\" name='input-name' value={value} onChange={onChange} autoFocus/>\r\n        <i className='fa fa-plus' onClick={handleClick}></i>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { AttrChoice } from '../BlockModTypes';\r\nimport s from '../BlockMod.module.css';\r\nimport { AddElement } from './AddElement';\r\n\r\nexport function LiElement({ id, name, className, disabled, children, typeLi, inputHidden }: {\r\n  typeLi?: string;\r\n  inputHidden: boolean;\r\n  id: string;\r\n  name: string;\r\n  className: string;\r\n  disabled: boolean;\r\n  children?: AttrChoice[] | null;\r\n}) {\r\n\r\n  const createSubLi = () => {\r\n    if (children?.length) {\r\n      let map = children.map((item: AttrChoice) => {\r\n        let choices, clsN;\r\n        if (item.choices) {\r\n          choices = item.choices;\r\n          clsN = s['attribut'];\r\n        } else {\r\n          choices = null;\r\n          clsN = s['choice'];\r\n        }\r\n        return (\r\n          <LiElement\r\n            key={item.id}\r\n            id={item.id}\r\n            name={item.name}\r\n            children={choices}\r\n            className={clsN}\r\n            disabled={disabled}\r\n            typeLi={typeLi === 'attr' ? 'choice' : 'attr'}\r\n            inputHidden={inputHidden}\r\n          />\r\n        )\r\n      })\r\n      return map;\r\n    }\r\n    return;\r\n  }\r\n\r\n  return (\r\n    <li id={id} data-name={name} className={className}>\r\n      <label>{name}</label>\r\n      {!disabled && <i data-action={`edit-${typeLi}`} className='fa fa-edit'></i>}\r\n      <ul className={s['choices-ul']}>\r\n        {createSubLi()}\r\n        {typeLi === 'attr' && !disabled && inputHidden &&\r\n          <AddElement\r\n            key='add-choice'\r\n            action='add'\r\n            typeElem='choice'\r\n            label='Значение'\r\n          />\r\n        }\r\n      </ul>\r\n    </li>\r\n  )\r\n}\r\n","// @ts-check\r\nimport { useState } from 'react';\r\nimport { deleteFromArray, getAttrChoice } from '../utilites';\r\n\r\n/**\r\n * augments\r\n * @param {import('../BlockModTypes').AttrChoice[]} attributes - Attribut[]\r\n * @param {Function} setAttributes - set\r\n */\r\nexport function useAttributes(attributes, setAttributes) {\r\n  const [inputHidden, setInputHidden] = useState(true);\r\n  const [attrId, setAttrId] = useState('');\r\n  const [id, setId] = useState('');\r\n  const [action, setAction] = useState('')\r\n  const [paramName, setParamName] = useState('');\r\n\r\n  /**@type {import('react').EventHandler<ev>}*/\r\n  function changeParamName(ev) {\r\n    setParamName(ev.target.value || '');\r\n  }\r\n\r\n  /**@type {import('react').MouseEventHandler<ev>}*/\r\n  function handleClick(ev) {\r\n    ev.stopPropagation();\r\n    let key = action.split('-')[0];\r\n    let typeOfParam = action.split('-')[1];\r\n    if (key === 'add') {\r\n      addParam(typeOfParam, paramName, attrId);\r\n    } else if (key === 'edit') {\r\n      editParam(id, paramName, typeOfParam, attrId);\r\n    }\r\n    setParamName('');\r\n    setId('');\r\n    setAttrId('');\r\n    setAction('');\r\n    toggleHidden();\r\n  }\r\n\r\n  /**@type {import('react').EventHandler<ev>} */\r\n  function onBlocModClick(ev) {\r\n    if (ev.target.tagName !== 'I' && ev.target.tagName !== 'STRONG') return;\r\n    let action = ev.target.dataset.action;\r\n    setAction(action)\r\n    let elem = ev.target;\r\n    let attrId = '';\r\n    let id = '';\r\n    let name = '';\r\n    switch (action) {\r\n      case 'edit-choice':\r\n        id = elem.closest('li').id;\r\n        name = elem.closest('li').dataset.name;\r\n        setId(id);\r\n        setParamName(name);\r\n        attrId = elem.closest('ul').closest('li').id;\r\n        setAttrId(attrId);\r\n        break;\r\n      case 'add-choice':\r\n        attrId = elem.closest('li').id;\r\n        setAttrId(attrId);\r\n        break;\r\n      case 'edit-attr':\r\n        id = elem.closest('li').id;\r\n        name = elem.closest('li').dataset.name;\r\n        setId(id);\r\n        setParamName(name);\r\n        break;\r\n      case 'add-attr':\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    // console.log(action, `id: ${id}`, `attrId: ${attrId}`);\r\n    toggleHidden();\r\n  }\r\n\r\n  /** getAttribut\r\n   * @param {string} _id - id of attribute\r\n   * @returns {import('../BlockModTypes').AttrChoice | undefined}\r\n   */\r\n  function getAttribut(_id) {\r\n    return attributes.find(({ id }) => id === _id);\r\n  }\r\n\r\n  /** addParam\r\n   * argument\r\n   * @param {string} typeOfParam - 'attr' | 'choice'\r\n   * @param {string} nameOfParam\r\n   * @param {string} [attrId] - id of attribut\r\n   */\r\n  function addParam(typeOfParam, nameOfParam, attrId) {\r\n    /**\r\n     * @param {{id: string; name: string}} param\r\n     */\r\n    let param = getAttrChoice(nameOfParam);\r\n\r\n    if (param) {\r\n      if (typeOfParam === 'attr') {\r\n        setAttributes([...attributes, { ...param, choices: [] }]);\r\n      } else if (typeOfParam === 'choice') {\r\n        if (!attrId) return;\r\n        let attr = getAttribut(attrId);\r\n        attr?.choices?.push(param);\r\n        setAttributes([...attributes]);\r\n      }\r\n    }\r\n    setInputHidden(true);\r\n  }\r\n\r\n  /** renameParam\r\n   *arguments\r\n   * @param {string} paramId - attr.id | choice.id\r\n   * @param {string} newName - new name\r\n   * @param {string} typeOfParam - 'attr' | 'choice'\r\n   * @param {string} [attrId] - attr.id\r\n   */\r\n  function editParam(paramId, newName, typeOfParam, attrId) {\r\n    if (!paramId || !newName) return;\r\n\r\n    /**@type {import('../BlockModTypes').AttrChoice | undefined}*/\r\n    let attr;\r\n    if (attrId) attr = attributes.find(({ id }) => id === attrId);\r\n    if (typeOfParam === 'choice') {\r\n      if (attr?.choices?.length) {\r\n        let choice = { id: paramId, name: newName };\r\n        deleteFromArray(paramId, attr.choices);\r\n        attr.choices.push(choice);\r\n      }\r\n    } else if (typeOfParam === 'attr') {\r\n      attr = attributes.find((attr) => attr.id === paramId);\r\n      if (attr) attr.name = newName;\r\n    }\r\n    toggleHidden();\r\n    setAttributes([...attributes]);\r\n  }\r\n  function toggleHidden() {\r\n    setInputHidden(!inputHidden);\r\n  }\r\n\r\n  return { onBlocModClick, handleClick, changeParamName, nameOfAttr: getAttribut(attrId)?.name , paramName, action, inputHidden };\r\n}\r\n","// import { MouseEvent } from 'react';\r\nimport { getUUID4 } from '../utillites';\r\n\r\nexport const deleteFromArray = (id: string, arr: any[]) => {\r\n  let i = arr.findIndex((item) => item.id === id);\r\n  arr.splice(i, 1);\r\n};\r\n\r\nexport function getAttrChoice(name: string) {\r\n  if (!name) return;\r\n  return { id: getUUID4(), name };\r\n}\r\n","import React from 'react';\r\nimport { Modal } from '../Modal/Modal';\r\nimport s from './BlockMod.module.css';\r\nimport { AttrChoice, BlockModProps } from './BlockModTypes';\r\nimport { AddElement } from './components/AddElement';\r\nimport { FormChangeName } from './components/FormChangeName';\r\nimport { LiElement } from './components/LiElement';\r\nimport { useAttributes } from './Hooks/useAttributes';\r\n\r\nexport function BlockMod(props: BlockModProps) {\r\n\r\n  let { attributes, setAttributes, disabled } = props;\r\n  let { onBlocModClick, handleClick, changeParamName, nameOfAttr, paramName, action, inputHidden } = useAttributes(attributes, setAttributes);\r\n\r\n  return (\r\n    <div className={s['attributes']} onClick={onBlocModClick}>\r\n      {!inputHidden &&\r\n        <Modal>\r\n          <FormChangeName\r\n            nameOfAttr={nameOfAttr || ''}\r\n            label={action.split('-')[1] === 'attr' ? 'Аттрибут' : 'Значение'}\r\n            value={paramName}\r\n            onChange={changeParamName}\r\n            handleClick={handleClick}\r\n          />\r\n        </Modal>\r\n      }\r\n      <ul className={s['attributes-ul']}>\r\n        {\r\n          !!attributes.length &&\r\n          attributes.map((attr: AttrChoice, idx) => {\r\n            return <LiElement\r\n              key={attr.id}\r\n              typeLi='attr'\r\n              inputHidden={inputHidden}\r\n              id={attr.id}\r\n              name={attr.name}\r\n              className={s['attribut']}\r\n              disabled={disabled}\r\n              children={attr.choices}\r\n            />\r\n          })\r\n        }\r\n        {(!disabled && inputHidden) &&\r\n          <AddElement\r\n            key='add-attr'\r\n            action='add'\r\n            typeElem='attr'\r\n            label='Аттрибут'\r\n          />}\r\n      </ul>\r\n    </div >\r\n  )\r\n}\r\n","import React, { useCallback, useEffect } from 'react';\r\nimport s from './Form.module.css';\r\nimport { useState } from \"react\";\r\nimport Preloader from '../../common/Preloader/Preloader';\r\nimport { ComponentsProducts } from './schemas/ComponentsProducts.jsx';\r\nimport { setNewCode, newBarcode, validateBarcode, validateZeroData, validateRequiredData, dateToLocaleString } from './frmUtilites';\r\nimport FormImg from './FormImg';\r\nimport FormModalWrapper from '../../common/Modal/FormModalWrapper';\r\nimport { useModifications } from './schemas/useModifications';\r\nimport { BlockMod } from '../../common/BlockMod';\r\n\r\nconst FormProduct = props => {\r\n\r\n  const [isNewData, setIsNewData] = useState(!props.formData.id);\r\n  const fileInput = React.createRef();\r\n  const [isGroup, setIsGroup] = useState(props.isGroup);\r\n  const [state, setState] = useState({\r\n    ...props.formData,\r\n    allow_edit: isNewData,\r\n    parent_id: isNewData ? props.pid : props.formData.parent_id || 0, //parentId,\r\n    photos: (props.formData.photos?.length && [...props.formData.photos]) || [],\r\n    barcodes: (props.formData.barcodes?.length && [...props.formData.barcodes]) || [],\r\n    bigImg: null,\r\n    currentBarcode: '',\r\n    created_at: props.formData.created_at ? new Date(props.formData.created_at) : new Date(),\r\n    updated_at: props.formData.updated_at ? new Date(props.formData.updated_at) : new Date(),\r\n  });\r\n  const [treeView, setTreeView] = useState(false);\r\n  const [mod, setMod] = useState(false);\r\n  const [attributes, setAttributes] = useState((!!props.formData.attributes && [...props.formData.attributes]) || []);\r\n  const [attrChoices, setAttrChoices] =\r\n    useState((!!props.formData.attributes_choices && { ...props.formData.attributes_choices }) || []);\r\n  const disabled = !isNewData && !state.allow_edit;\r\n  const setViewForm = props.setViewForm;\r\n  const setFormData = props.setFormData;\r\n\r\n  const cancelClick = useCallback((ev) => {\r\n    setViewForm(false);\r\n    setFormData(null);\r\n    document.body.style.overflow = 'auto';\r\n  }, [setFormData, setViewForm])\r\n\r\n  useEffect(() => {\r\n    if (!state.code) {\r\n      setNewCode().then(code => setState({ ...state, code }))\r\n    }\r\n\r\n    if (props.formError) {\r\n      let err = props.formError;\r\n      alert(err.message);\r\n      props.setFormError(null);\r\n    }\r\n  }, [props, state])\r\n\r\n  const { attributesP, getAttributes } = useModifications(state.parent_id);\r\n\r\n  useEffect(() => {\r\n    getAttributes({ parentId: state.parent_id })\r\n  }, [getAttributes, state.parent_id])\r\n\r\n  useEffect(() => { //cleare URL objects Photo\r\n    return () => {\r\n      if (state.photos?.length) {\r\n        state.photos.forEach(item => URL.revokeObjectURL(item))\r\n      }\r\n    }\r\n  })\r\n\r\n  useEffect(() => { // EventListener('keyup')\r\n    const handler = (ev) => {\r\n      if (ev.key === 'Escape') {\r\n        cancelClick();\r\n      }\r\n    }\r\n    document.addEventListener('keyup', handler);\r\n    return () => document.removeEventListener('keyup', handler);\r\n  }, [cancelClick])\r\n\r\n  const toggleGroup = () => {\r\n    if (!isNewData) return;\r\n    setIsGroup(!isGroup);\r\n  }\r\n  const formChanged = () => {\r\n    let changes = [];\r\n    for (let key in props.formData) {\r\n      if (key === 'photos' || key === 'barcodes') {\r\n\r\n        if (state[key].length !== props.formData[key].length)\r\n          changes.push({ [key]: state[key] });\r\n      } else {\r\n        if (state[key] !== props.formData[key]) {\r\n          changes.push({ [key]: state[key] });\r\n        }\r\n      }\r\n    }\r\n    if (state.parent_id && !props.formData.parent_id) {\r\n      changes.push({ parent_id: state.parent_id })\r\n    }\r\n    // console.log(changes)\r\n    if (changes.length === 1 && isNewData && changes[0].code) changes = [];\r\n    return changes.length;\r\n  }\r\n  const formatPrice = price => {\r\n    return isFinite(price) ? Number(price).toFixed(2) : '0.00';\r\n  }\r\n\r\n  const handleChange = (ev) => {\r\n\r\n    let elem = ev.target;\r\n    let name = elem.name;\r\n    let value = elem.value;\r\n    elem.classList.remove(s.required);\r\n\r\n    if (name === 'barcodes') {\r\n      if (state.barcodes.includes(value)) {\r\n        alert(`Barcode ${value} is exist in this product!`);\r\n        return;\r\n      }\r\n      setState({ ...state, currentBarcode: value });\r\n      return;\r\n    } else if (name === 'picture') {\r\n      let photos = state.photos;\r\n      Array.from(fileInput.current.files).forEach(item => {\r\n        photos.push(item);\r\n      })\r\n      setState({ ...state, photos });\r\n      return;\r\n    } else if (name === 'allow_edit') {\r\n      let form = document.getElementById(s['form-product']);\r\n      Object.values(form.elements).forEach(item => {\r\n        if (item.disabled && item.id !== s.uuid) item.removeAttribute('disabled');\r\n      })\r\n      setState({ ...state, allow_edit: true });\r\n      form.allow_edit.parentNode.remove();\r\n    } else if (name === 'allow_to_sell') {\r\n      value = elem.checked;\r\n      // console.log(name + ': ' + value)\r\n      setState({ ...state, [name]: value });\r\n    } else {\r\n      setState({ ...state, [name]: value });\r\n    }\r\n  }\r\n\r\n  const clickChoice = (ev) => {\r\n    if (ev.target.tagName !== 'SPAN') return;\r\n    let elem = ev.target;\r\n    let attrId = elem.parentNode.id;\r\n    elem.parentNode.querySelectorAll('span').forEach(el => {\r\n      el.classList.remove(s['selected']);\r\n    });\r\n    if (!attrChoices[attrId]) {\r\n      setAttrChoices({ ...attrChoices, [attrId]: elem.id })\r\n      elem.classList.add(s['selected']);\r\n    } else {\r\n      delete attrChoices[attrId];\r\n      setAttrChoices({ ...attrChoices });\r\n    }\r\n    // console.log('attrId', attrId, elem.id)\r\n  }\r\n\r\n  const handleBlur = ev => {\r\n    let name = ev.target.name || ev.currentTarget.name;\r\n    let value = ev.target.value || ev.currentTarget.value;\r\n\r\n    if (name === 'barcodes') {\r\n      let newValue;\r\n      if (!value) {\r\n        let prefix = window.prompt(`Введите префикс!\\r\\n\r\n          Рекомендуется последние 4 цифры ИНН.\\r\\n\r\n          По умолчанию -> '0000'`, '7321');\r\n        // if (!prefix || !isFinite(prefix)) prefix = '0000';\r\n        newValue = newBarcode(state.code, prefix);\r\n        if (state.barcodes.includes(newValue)) {\r\n          console.warn(`Barcode ${newValue} is Exist!`)\r\n          return;\r\n        }\r\n\r\n      }\r\n      let valBc = validateBarcode(value || newValue);\r\n      if (valBc !== 0) {\r\n        window.alert(valBc);\r\n        return;\r\n      }\r\n      let barcodes = [...state.barcodes, state.currentBarcode || newValue];\r\n      setState({ ...state, barcodes });\r\n      ev.target.value = '';\r\n      return;\r\n    }\r\n\r\n    if (name === 'price' || name === 'cost_price') {\r\n      value = isFinite(value) ? Number(value) : 0;\r\n    }\r\n    setState({ ...state, [name]: value });\r\n    ev.target.value = formatPrice(value);\r\n  }\r\n  const handleSubmit = (ev) => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    if (state.allow_edit && formChanged() && window.confirm('Save changes')) {\r\n      // if (state.photos.length) setFormPhotos([...state.photos]);\r\n      let body;\r\n      if (isGroup) {\r\n        body = {\r\n          id: state.id,\r\n          parent_id: state.parent_id,\r\n          name: state.name,\r\n          attributes: (!!attributes.length && attributes) || null,\r\n          barcodes: state.barcodes,\r\n          isNewData\r\n        }\r\n      } else {\r\n        body = {\r\n          ...state,\r\n          attributes_choices: (attrChoices && !!Object.keys(attrChoices).length && attrChoices) || null,\r\n        };\r\n        delete body.createdAt;\r\n        delete body.updatedAt;\r\n        delete body.allow_edit;\r\n        delete body.bigImg;\r\n        delete body.currentBarcode;\r\n        delete body.treeView;\r\n        delete body.alcocodes;\r\n      }\r\n\r\n      if (body.parent_id === '0' || body.parent_id === 0) {\r\n        delete body.parent_id;\r\n      }\r\n\r\n      let missData = validateRequiredData(body, isGroup);\r\n      if (missData.length) {\r\n        let strMessage = '';\r\n        missData.forEach(item => {\r\n          strMessage += ` ${item},`;\r\n          document.getElementsByName(item).forEach(elem => {\r\n            elem.classList.add(s.required);\r\n          })\r\n        });\r\n        strMessage.slice(-1);\r\n        alert(`Отсутствуют необходимые данные:\\n\\r${strMessage}!`);\r\n        return;\r\n      }\r\n\r\n      validateZeroData(body/* , props.formData */);\r\n      if (!isNewData) body.id = state.id;\r\n\r\n      // alert(JSON.stringify(body, null, 2));\r\n\r\n      let i = 0;\r\n      Object.keys(body).forEach(item => i++);\r\n      if (i <= 1 && !body.name) {\r\n        alert('Данные не изменились!');\r\n        return;\r\n      }\r\n      let typeQuery = !isNewData ? 'put' : 'post';\r\n      let path = isGroup ? 'group' : 'product';\r\n      props.postFormData(path, typeQuery, body);\r\n      props.toggleFormPost(true);\r\n    } else {\r\n      props.setFormData(null);\r\n      props.setViewForm(false);\r\n    }\r\n    document.body.style.overflow = 'auto';\r\n  }\r\n  const pictureClick = ev => {\r\n    let p = ev.target;\r\n    if (p.tagName === 'SPAN') {\r\n      if (!state.allow_edit) return;\r\n      let prevElem = p.previousElementSibling;\r\n      deleteFromArray(prevElem.id, 'photos');\r\n      return;\r\n    }\r\n    p.addEventListener('blur', () => {\r\n      setState({ ...state, bigImg: null })\r\n      p.removeEventListener('blur', this);\r\n    })\r\n    setState({ ...state, bigImg: p.src })\r\n  }\r\n  const onPicInputClick = ev => {\r\n    ev.preventDefault();\r\n    let picInput = document.getElementById('picInput');\r\n    picInput.click();\r\n  }\r\n  const deleteFromArray = (elemId, arrName) => {\r\n    let i = state[arrName].findIndex(item => item === elemId);\r\n    let arr = state[arrName];\r\n    arr.splice(i, 1);\r\n    setState({ ...state, [arrName]: arr });\r\n  }\r\n\r\n  const callbackTree = (id, tagName) => {\r\n    let parent_id = id ? id : 0;\r\n    if (tagName !== 'SPAN') return;\r\n    setState({ ...state, parent_id });\r\n    setTreeView(false);\r\n  }\r\n\r\n  const clickGroups = () => {\r\n    setTreeView(!treeView);\r\n  }\r\n\r\n  const copyProduct = () => {\r\n    setIsNewData(true);\r\n    setState({ ...state, id: null, barcodes: [], allow_edit: true });\r\n    let formData = { ...state };\r\n    delete formData.code;\r\n    delete formData.allow_edit;\r\n    delete formData.bigImg;\r\n    delete formData.currentBarcode;\r\n    delete formData.created_at;\r\n    delete formData.updated_at;\r\n    props.setFormData(formData);\r\n  }\r\n\r\n  const gProps = {\r\n    groups: props.groups, disabled, parent_id: state.parent_id,\r\n    onClick: clickGroups, treeView, callbackTree\r\n  };\r\n\r\n  const mnProps = { disabled, handleChange, id: s.measure_name, measure_name: state.measure_name };\r\n  const tProps = { disabled, handleChange, id: s.type, type: state.type };\r\n  const taxProps = { disabled, handleChange, id: s.tax, tax: state.tax };\r\n\r\n  const bProps = {\r\n    barcodes: state.barcodes, bc: state.currentBarcode,\r\n    handleChange, handleBlur, deleteFromArray,\r\n    allow_edit: state.allow_edit, disabled,\r\n  };\r\n\r\n  const pProps = { id: s.picture, className: s['picture-small'], divPicture: s['div-picture'], pictureClick };\r\n\r\n  if (props.formPost) {\r\n    return <Preloader />\r\n  } else {\r\n    return (\r\n      <>\r\n        {state.bigImg &&\r\n          <FormModalWrapper\r\n            form={<FormImg photo={state.bigImg} />}\r\n          />}\r\n        <form id={s['form-product']} onSubmit={handleSubmit} >\r\n          <div className={s['menu-buttons']}>\r\n            <i className='fa fa-clone' id={s.copy} onClick={copyProduct}></i>\r\n            <span className={s['menu-buttons-groups']} onClick={toggleGroup}>{isGroup ? 'Group' : 'Product'}</span>\r\n            <i className='fa fa-times' id={s.close} onClick={handleSubmit}></i>\r\n            {/* fa-sign-out-alt */}\r\n          </div>\r\n          <fieldset className={s['product-info']}>\r\n            <legend>{isGroup ? 'Group' : 'Product'} Info</legend>\r\n            <div className={s['id-barcodes-photos']}>\r\n              <div className={s['allow-to-sell']}>\r\n                <label htmlFor='allow_to_sell'>Allow to sell:</label>\r\n                <input type=\"checkbox\" name=\"allow_to_sell\" id=\"allow_to_sell\"\r\n                  defaultChecked={state.allow_to_sell} disabled={disabled}\r\n                  onChange={handleChange} />\r\n              </div>\r\n              <div className={s['uuid']}>\r\n                <label htmlFor='uuid'>ID:</label>\r\n                <input name='uuid' value={state.id || ''} disabled={!isNewData} onChange={handleChange} />\r\n              </div>\r\n              {\r\n                !isNewData &&\r\n                <div className={s['allow-edit']}>\r\n                  <label htmlFor='allow-edit'>Allow Edit:</label>\r\n                  <input type='checkbox' id={s['allow-edit']} name='allow_edit'\r\n                    checked={state.allow_edit}\r\n                    onChange={handleChange} />\r\n                </div>\r\n              }\r\n            </div>\r\n            {\r\n              !!state.photos?.length &&\r\n              <div className={s['form-photo']}>\r\n                {state.photos.map(ph => {\r\n                  return <ComponentsProducts.Picture {...pProps} photo={ph} key={ph.name} />\r\n                })}\r\n              </div>\r\n            }\r\n            {\r\n              state.photo || !state.allow_edit ? null :\r\n                <>\r\n                  <input type=\"file\" name=\"picture\" id='picInput' multiple={true}\r\n                    onChange={handleChange} ref={fileInput} style={{ display: 'none' }} />\r\n                  <label htmlFor=\"picture\" onClick={onPicInputClick}>Input Image</label>\r\n                </>\r\n            }\r\n            <ComponentsProducts.Barcodes {...bProps} />\r\n            {!isGroup &&\r\n              <div className={s.code_article}>\r\n                <div className={s.code}>\r\n                  <label htmlFor='code'>Code:</label>\r\n                  <input type=\"text\" name=\"code\" value={state.code || ''} onChange={handleChange} disabled={disabled} />\r\n                </div>\r\n                <div className={s['article-number']}>\r\n                  <label htmlFor='article_number'>Aticle:</label>\r\n                  <input type=\"text\" name='article_number' value={state.article_number || ''}\r\n                    onChange={handleChange} disabled={disabled} />\r\n                </div>\r\n              </div>\r\n            }\r\n            {!isGroup &&\r\n              <div className={s.propertyes}>\r\n                <ComponentsProducts.MeasureNames {...mnProps} />\r\n                <ComponentsProducts.Types {...tProps} />\r\n                <ComponentsProducts.Taxes {...taxProps} />\r\n              </div>\r\n            }\r\n            <ComponentsProducts.GroupsTree {...gProps} />\r\n            <div className={s.name}>\r\n              <label htmlFor='name'>Name:</label>\r\n              <input name=\"name\" value={state.name} placeholder='Input name ...'\r\n                onChange={handleChange} disabled={disabled} />\r\n            </div>\r\n            {isGroup && !attributes.length &&\r\n              <div className={s['add-mod']}>\r\n                <label htmlFor=\"add_mod\">Модификация</label>\r\n                <input type=\"checkbox\" name=\"add_mod\" onChange={() => setMod(!mod)} />\r\n              </div>\r\n            }\r\n            {(mod || !!attributes.length) &&\r\n              <BlockMod attributes={attributes} setAttributes={setAttributes} disabled={disabled} />\r\n            }\r\n            {\r\n              !!attributesP?.length && !isGroup &&\r\n              <ComponentsProducts.Attributes\r\n                attributes={attributesP}\r\n                clickChoice={clickChoice}\r\n                disabled={disabled}\r\n                attributes_choices={attrChoices}\r\n              />\r\n            }\r\n            {!isGroup &&\r\n              <div className={s.description}>\r\n                <label>Description:</label>\r\n                <input type=\"text\" name=\"description\"\r\n                  value={state.description || ''}\r\n                  onChange={handleChange} disabled={disabled}\r\n                />\r\n              </div>}\r\n            {!isGroup &&\r\n              <div>\r\n                <div className={s.prices}>\r\n                  <div className={s.price}>\r\n                    <label htmlFor='price'>Price:</label>\r\n                    <input name=\"price\" defaultValue={formatPrice(state.price)}\r\n                      onBlur={handleBlur} onChange={handleChange} disabled={disabled} />\r\n                    <i className='fa fa-ruble-sign'></i>\r\n                  </div>\r\n                  <div className={s.price}>\r\n                    <label htmlFor='cost_price'>Cost Price:</label>\r\n                    <input name=\"cost_price\" defaultValue={formatPrice(state.cost_price)}\r\n                      onBlur={handleBlur} disabled={disabled} />\r\n                    <i className='fa fa-ruble-sign'></i>\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n            }\r\n            <div className={s['product-dates']}>\r\n              <div className={s.created_at}>\r\n                <h4>Создан:</h4>\r\n                <span>{dateToLocaleString(state.created_at)}</span>\r\n              </div>\r\n              <div className={s.updated_at}>\r\n                <h4>Обновлен:</h4>\r\n                <span>{dateToLocaleString(state.updated_at)}</span>\r\n              </div>\r\n            </div>\r\n          </fieldset>\r\n          <div className={s.buttons}>\r\n            <div className={s['button-submit']} onClick={handleSubmit}>\r\n              <input type=\"submit\" value=\"Ready\" />\r\n              <span>Submit</span>\r\n            </div>\r\n            <div className={s['button-cancel']}>\r\n              <span id={s.cancel} onClick={cancelClick}>Cancel</span>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </>\r\n    );\r\n  }\r\n}\r\nexport default FormProduct;\r\n","import { useCallback, useState } from 'react';\r\nimport { apiIDB } from '../../../../api/apiIDB';\r\n\r\n/* const attr = [\r\n  {\r\n    id: 'be30db90-514f-11e9-91c7-4b1dd1e1bcf8',\r\n    name: 'Цвет',\r\n    choices: [\r\n      {\r\n        id: 'be30db91-514f-11e9-91c7-4b1dd1e1bcf8',\r\n        name: 'Красный',\r\n      },\r\n      {\r\n        id: 'be30db92-514f-11e9-91c7-4b1dd1e1bcf8',\r\n        name: 'Зеленый',\r\n      },\r\n      {\r\n        id: 'be30db93-514f-11e9-91c7-4b1dd1e1bcf8',\r\n        name: 'Синий',\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: 'be30db94-514f-11e9-91c7-4b1dd1e1bcf8',\r\n    name: 'Размер',\r\n    choices: [\r\n      {\r\n        id: 'be3102a0-514f-11e9-91c7-4b1dd1e1bcf8',\r\n        name: 'S',\r\n      },\r\n      {\r\n        id: 'be3102a1-514f-11e9-91c7-4b1dd1e1bcf8',\r\n        name: 'M',\r\n      },\r\n      {\r\n        id: 'be3102a2-514f-11e9-91c7-4b1dd1e1bcf8',\r\n        name: 'L',\r\n      },\r\n    ],\r\n  },\r\n]; */\r\n\r\nexport const useModifications = (parentId) => {\r\n  const [attributesP, setAttributes] = useState(null);\r\n  // console.log('render: ', attributesP?.length || null, parentId);\r\n\r\n  const getAttributes = useCallback(({ parentId }) =>  {\r\n    if (parentId === '0' || !parentId) return;\r\n    apiIDB.getGroup(parentId).then((g) => setAttributes(g.attributes || null));\r\n  }, [])\r\n  getAttributes({ parentId });\r\n\r\n  return { attributesP, getAttributes };\r\n};\r\n","/*\r\n    items.product =\r\n        {\r\n            \"uuid\":\"03b25d9c-d37c-42c1-a651-c12cb63724cf\",\r\n            \"code\":\"14098\",\r\n            \"label\":\"искуственный букет\",\r\n            \"price\":80,\r\n            \"quantity\":0\r\n        }\r\n*/\r\n\r\nimport { useMemo, useState } from 'react';\r\n\r\nconst useSortableData = (items, config = null) => {\r\n  const [sortConfig, setSortConfig] = useState(config);\r\n\r\n  const sortedItems = useMemo(() => {\r\n    let sortedProducts = [...items];\r\n    if (!sortedProducts.length) return [];\r\n    if (sortConfig !== null) {\r\n      sortedProducts.sort((a, b) => {\r\n        if (a[sortConfig.key] > b[sortConfig.key])\r\n          return sortConfig.direction === 'asc' ? 1 : -1;\r\n        if (a[sortConfig.key] < b[sortConfig.key])\r\n          return sortConfig.direction === 'asc' ? -1 : 1;\r\n        return 0;\r\n      });\r\n    }\r\n    return sortedProducts;\r\n  }, [items, sortConfig]);\r\n\r\n  function requestSort(key) {\r\n    let direction = 'asc';\r\n    if (sortConfig === null) {\r\n      setSortConfig({ key, direction });\r\n      return;\r\n    }\r\n    if (sortConfig.key === key && sortConfig.direction === 'asc') {\r\n      direction = 'desc';\r\n    }\r\n    setSortConfig({ key, direction });\r\n  }\r\n\r\n  return { items: sortedItems, requestSort, sortConfig };\r\n};\r\n\r\nexport default useSortableData;\r\n","import s from './Table.module.css';\r\n\r\nexport function clickCell(ev) {\r\n  let elem = ev.target;\r\n  if (elem.tagName === 'TD' || elem.closest('td')) {\r\n    let row = elem.closest('tr').id;\r\n    let column = elem.getAttribute('name');\r\n    let cell = elem.innerText;\r\n    return { row, column, cell };\r\n  } else {\r\n    return;\r\n  }\r\n}\r\n\r\nexport async function clickTable(ev, callback, delRowCallback) {\r\n  let elem = ev.target;\r\n  let result = clickCell(ev);\r\n  if (!result) return;\r\n  if (elem.tagName === 'SPAN') {\r\n    let testDel =\r\n      delRowCallback &&\r\n      elem.className === s.del &&\r\n      window.confirm(\r\n        `${elem.innerText}\\n\\rYou'r realy wanted delete this product?`,\r\n      );\r\n\r\n    if (testDel) {\r\n      let id = result.row;\r\n      let res = await delRowCallback(id, null, 'product');\r\n      alert(`Product id: ${res}\\n\\rDELETED!`);\r\n    } else {\r\n      alert('CANCEL DELETED!');\r\n    }\r\n    return;\r\n  }\r\n  if (callback) {\r\n    callback(result.row);\r\n  } else {\r\n    alert(JSON.stringify(result, null, 2));\r\n  }\r\n}\r\n","import { React } from 'react';\r\nimport useSortableData from '../../../Hooks';\r\nimport s from './Table.module.css'\r\nimport { clickTable } from './utilsTable';\r\n\r\nexport default function Table(props) {\r\n  const { products } = props;\r\n  const { items, requestSort, sortConfig } = useSortableData(products);\r\n\r\n  if (!items.length) return <p>Empty Group!</p>\r\n\r\n  const schema = props.schema || Object.keys(products[0]);\r\n  const headers = props.schema.map(item => {\r\n    return item[1];\r\n  });\r\n\r\n  const getClassName = name => {\r\n    if (!sortConfig) return;\r\n    let className = sortConfig.key === name ? sortConfig.direction : null;\r\n    switch (className) {\r\n      case 'asc':\r\n        return 'fa fa-sort-amount-up-alt';\r\n      case 'desc':\r\n        return 'fa fa-sort-amount-down';\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div onClick={ev => clickTable(ev, props.callback, props.deleteProduct)}>\r\n      {/* <caption>Commodities</caption> */}\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            {\r\n              headers.map((item, idx) => {\r\n                if (item === 'uuid' || item === 'id') return null;\r\n                return <th\r\n                  key={item}\r\n                  onClick={() => requestSort(schema[idx][0])}\r\n                >{item}<i className={getClassName(schema[idx][0])}></i></th>\r\n              })\r\n            }\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {items.map(product => (\r\n            <tr key={product.uuid || product.id} id={product.uuid || product.id}>\r\n              { schema.map(item => {\r\n                if (item[0] === 'uuid' || item[0] === 'id') return null;\r\n                return <td key={`${item[0]}_${product.id || product.uuid}`} name={item[0]}>{product[item[0]]}</td>\r\n              })}\r\n              <td key={`del_${product.id || product.uuid}`}><span className={s.del}></span></td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nconst ProgressBar2 = ({limit = 10, delay = 500, text = 'Processing...'}) => {\r\n  const [p, setP] = useState('');\r\n\r\n  useEffect(() => {\r\n    let c = 0;\r\n    let timer = setInterval(() => {\r\n      c++;\r\n      if (c > limit) {\r\n        c = 0;\r\n        setP('');\r\n      }\r\n      setP((p) => (p += c));\r\n    }, delay);\r\n    return () => clearInterval(timer);\r\n  }, [delay, limit]);\r\n\r\n  const styleSpan = {\r\n    backgroundColor: 'blue',\r\n    color: 'white',\r\n  };\r\n\r\n  const styleDiv = {\r\n    width: limit + 3 + 'ch',\r\n    border: 'solid 1px blue',\r\n    padding: '2px'\r\n  };\r\n\r\n  return (\r\n    <div className={'progressBar'}>\r\n      <h4 style={{ display: 'inline' }}>{text}</h4>\r\n      <div style={styleDiv}>\r\n        <span style={styleSpan}>{p}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProgressBar2;\r\n","import { dateToString, getMinData } from '../../../common/utillites/utilites';\r\nimport s from '../FormSearch.module.css';\r\n\r\nconst ComponentsSearch = {\r\n    SearchPeriod({ head, name, type, viewPeriod, changeFormElement, changePeriod }) {\r\n        const lblFrom = name.match('price', 'gi') ? (viewPeriod ? 'От' : 'Значение') : (viewPeriod ? 'Начало' : 'Дата');\r\n        const lblTo = name.match('price', 'gi') ? 'До' : 'Конец';\r\n        function getInputEl(type, textName) {\r\n            if (type === 'date') {\r\n                return <input type={type} name={`${name}-${textName}`} onChange={changeFormElement}\r\n                    min={getMinData()} max={dateToString()} />\r\n            } else {\r\n                return <input type={type} name={`${name}-${textName}`} onChange={changeFormElement} />\r\n            }\r\n        }\r\n        return (\r\n            <>\r\n                <div className={s[`${name}-row`]}>\r\n                    <span className='fa'>{head}</span>\r\n                    <div className={s['input-row']}>\r\n                        <label htmlFor={`${name}-from`}>{lblFrom}</label>\r\n                        {getInputEl(type, 'from')}\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"checkbox\" name={`${name}-period`} onChange={changePeriod} />\r\n                        <span className='fa'>период</span>\r\n                    </div>\r\n                    {viewPeriod &&\r\n                        <div className={s['input-row']}>\r\n                            <label htmlFor={`${name}-to`}>{lblTo}</label>\r\n                            {getInputEl(type, 'to')}\r\n                        </div>}\r\n                </div>\r\n            </>\r\n        )\r\n    },\r\n    Button({ type, label, icon, callback }) {\r\n        return (\r\n            <div className={s['filter-button']}>\r\n                <span className={s.filter} onClick={callback}>\r\n                    {label}\r\n                    <i className={icon}></i>\r\n                    {type === 'submit' && <input type=\"submit\" value=\"Искать\" className={s.hidden} />}\r\n                </span>\r\n            </div>\r\n        )\r\n    },\r\n}\r\n\r\nexport default ComponentsSearch;\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport ComponentsSearch from './schemas/ComponentsSearch';\r\nimport s from './FormSearch.module.css';\r\n\r\n// const log = console.log;\r\n\r\nconst initialPeriod = {\r\n  created_at: false,\r\n  updated_at: false,\r\n  price: false,\r\n  cost_price: false,\r\n}\r\n\r\nconst FormSearch = (props) => {\r\n\r\n  const [view, setView] = useState(false);\r\n  const [formData, setFormData] = useState({});\r\n  const [pid, setPid] = useState(props.parent_id);\r\n  const [period, setPeriod] = useState(initialPeriod);\r\n  const [name, setName] = useState('');\r\n\r\n  const propsSearchProducts = props.searchProducts;\r\n  const setIsSearching = props.setIsSearching;\r\n  const searchProducts = useCallback((obj) => {\r\n    propsSearchProducts(obj)\r\n  }, [])\r\n\r\n  const getObj = useCallback(() => {\r\n    let chk = document.forms['form-search']['current-pid'];\r\n    let obj = { ...formData };\r\n\r\n    if (!chk.checked) {\r\n      delete obj.parent_id;\r\n    }\r\n\r\n    Object.keys(obj).forEach(key => {\r\n      if (!obj[key] || !obj[key].length) delete obj[key];\r\n      if (period[key] && obj[key].length === 1) obj[key][1] = null;\r\n    })\r\n\r\n    if (name.length) obj.name = name;\r\n    return obj;\r\n  }, [formData, name, period])\r\n\r\n  useEffect(() => setPid(props.parent_id), [props.parent_id])\r\n  useEffect(() => {\r\n    if (Object.keys(formData).length) {\r\n      setIsSearching(true);\r\n    } else {\r\n      setIsSearching(false);\r\n    }\r\n  }, [formData, setIsSearching])\r\n\r\n  function changeFormElement(ev) {\r\n    let elem = ev.target;\r\n    let [name, idxName] = elem.name.split('-');\r\n    let value = formData[name];\r\n\r\n    if (idxName) {\r\n      let idx;\r\n      switch (idxName) {\r\n        case 'from':\r\n          idx = 0;\r\n          break;\r\n        case 'to':\r\n          idx = 1;\r\n          break;\r\n        default:\r\n          idx = 0;\r\n          break;\r\n\r\n      }\r\n      let elemValue = elem.value;\r\n      if (ev.target.type === 'date') elemValue = Date.parse(elemValue);\r\n      if (ev.target.type === 'number') elemValue = Number(elemValue);\r\n      if (!value) {\r\n        value = [];\r\n        idx === 0 ? value = [elemValue] : value = [null, elemValue];\r\n      } else {\r\n        value[idx] = elemValue ? elemValue : null;\r\n      }\r\n    }\r\n    setFormData({ ...formData, [name]: value });\r\n  }\r\n\r\n  function changeName(ev) {\r\n    let value = ev.target.value;\r\n    setName(value)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (name.length > 2 && name.slice(0, 3) !== 'rgx') {\r\n      searchProducts(getObj());\r\n      setIsSearching(true);\r\n    }\r\n  }, [getObj, name, setIsSearching, searchProducts])\r\n\r\n  function selectParentID(ev) {\r\n    let chk = ev.target.checked;\r\n    if (chk) {\r\n      setFormData({ ...formData, parent_id: pid || '0' });\r\n    }\r\n    searchProducts(getObj());\r\n  }\r\n\r\n  function handleSubmit(ev) {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    searchProducts(getObj());\r\n    setIsSearching(true);\r\n  };\r\n\r\n  function clearSearch(ev) {\r\n    // if (ev.target.tagName !== 'I') return;\r\n    let form = document.forms['form-search'];\r\n    Array.from(form.elements).forEach(elem => {\r\n      if (elem.tagName === 'INPUT') {\r\n        if (elem.type === 'checkbox') {\r\n          elem.checked = false;\r\n        } else {\r\n          elem.value = '';\r\n        }\r\n      }\r\n    })\r\n    // console.log(form.elements)\r\n    // e.target.closest('div').querySelector('input').value = '';\r\n    setFormData({});\r\n    setName('');\r\n    setPeriod(initialPeriod);\r\n    setView(false);\r\n    props.returnBeforeSearch();\r\n  }\r\n\r\n  function changePeriod(ev) {\r\n    let name = (ev.target.name).split('-')[0];\r\n    let checked = ev.target.checked;\r\n    setPeriod({ ...period, [name]: checked });\r\n    if (!checked) {\r\n      if (!formData[name]) return;\r\n      let arr = [formData[name][0]];\r\n      setFormData({ ...formData, [name]: arr })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={s['form-container']}>\r\n      <form name='form-search' id={s['form-search']} onSubmit={handleSubmit}>\r\n        <div className={s.search}>\r\n          <div className={s['form-search-row']}>\r\n            <ComponentsSearch.Button\r\n              label='Очистить фильтр'\r\n              icon='fa fa-times'\r\n              callback={clearSearch}\r\n            />\r\n            <div className={s['search-name']}>\r\n              <label htmlFor='name'>Поиск</label>\r\n              <input type=\"text\" name='name' value={name} onChange={changeName} />\r\n            </div>\r\n            <div>\r\n              <label>В текущей группе</label>\r\n              <input type=\"checkbox\" name='current-pid' onChange={selectParentID}\r\n                className={s['current-pid']} id={props.pid} />\r\n            </div>\r\n          </div>\r\n          <ComponentsSearch.Button\r\n            label='Расширенный фильтр'\r\n            icon='fa fa-filter'\r\n            callback={() => setView(view => !view)}\r\n          />\r\n          <ComponentsSearch.Button\r\n            label='Искать'\r\n            icon='fa fa-search'\r\n            callback={handleSubmit}\r\n            type='submit'\r\n          />\r\n        </div>\r\n        <fieldset className={!view ? s.hidden : ''}>\r\n          <div className={s['form-search-date']}>\r\n            <ComponentsSearch.SearchPeriod\r\n              head='Дата создания'\r\n              name='created_at'\r\n              type='date'\r\n              viewPeriod={period['created_at']}\r\n              changeFormElement={changeFormElement}\r\n              changePeriod={changePeriod}\r\n            />\r\n            <ComponentsSearch.SearchPeriod\r\n              head='Дата изменения'\r\n              name='updated_at'\r\n              type='date'\r\n              viewPeriod={period['updated_at']}\r\n              changeFormElement={changeFormElement}\r\n              changePeriod={changePeriod}\r\n            />\r\n          </div>\r\n          <div className={s['form-search-price']}>\r\n            <ComponentsSearch.SearchPeriod\r\n              head='Цена'\r\n              name='price'\r\n              type='number'\r\n              viewPeriod={period['price']}\r\n              changeFormElement={changeFormElement}\r\n              changePeriod={changePeriod}\r\n            />\r\n            <ComponentsSearch.SearchPeriod\r\n              head='Цена по приходу'\r\n              name='cost_price'\r\n              type='number'\r\n              viewPeriod={period['cost_price']}\r\n              changeFormElement={changeFormElement}\r\n              changePeriod={changePeriod}\r\n            />\r\n          </div>\r\n        </fieldset>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FormSearch;\r\n","import { useEffect, useState } from 'react';\r\nimport { apiIDB } from '../api/apiIDB';\r\n\r\n// const log = console.log;\r\n\r\nfunction testBarcodes(barcode) {\r\n  if (isNaN(Number(barcode))) return false;\r\n  if (![7, 8, 12, 13].includes(barcode.length)) {\r\n    return false;\r\n  }\r\n  let res = 0;\r\n  barcode.split('').forEach((item, i) => {\r\n    if (i % 2 !== 0) {\r\n      res += Number(item) * 3;\r\n      res = res % 10;\r\n    } else {\r\n      res += Number(item);\r\n      res = res % 10;\r\n    }\r\n  });\r\n\r\n  return !res;\r\n}\r\n/* const searchRequest = {\r\n    keys: ['name', 'article_number', 'description'],\r\n    target: [value1, value2],\r\n    callback: 'any function' // function of equal\r\n} */\r\n\r\n/* const search = [searchRequest, serachRequest2, searchRequest3] */\r\n\r\nfunction createRegexp(str = '') {\r\n  let val;\r\n  if (str.slice(0, 3) === 'rgx') {\r\n    // val = str.replace(/(^rgx\\s*[/(])|(^rgx\\s*)|\\)$|\\/$/g, ''); //.replace(/\\)/, '');\r\n    val = str.replace(/rgx\\s*/, '').replace(/^[(/](.*)[)/]$/, '$1')\r\n    // console.log('return', val);\r\n    try {\r\n      let regexp = new RegExp(val, 'gi');\r\n      // console.log(regexp);\r\n      return regexp;\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      alert(err.message);\r\n      return err;\r\n    }\r\n  }\r\n  val = str.replace(/[-[.+$*()^\\]\\\\]/g, '\\\\$&');\r\n  console.log(val);\r\n  return new RegExp(val, 'gi');\r\n}\r\n\r\nconst wrapper = (fn, args) => {\r\n  let _this = this;\r\n  if (fn === String.prototype.match || fn === Array.prototype.includes) {\r\n    _this = args[0];\r\n    args = args.slice(1);\r\n  } else if (fn === RegExp.prototype.test) {\r\n    _this = args[1];\r\n    args = args.slice(0, 1);\r\n  }\r\n  return fn.call(_this, ...args);\r\n};\r\n\r\nfunction filterProd(item, search = []) {\r\n  if (!item) return false;\r\n  if (!search.length) return true;\r\n  let filterResult = search.reduce((result, searchRequest) => {\r\n    let searchResult = searchRequest.keys.reduce((acc, curr) => {\r\n      if (!item[curr]) return acc;\r\n      return (\r\n        wrapper(searchRequest.callback, [\r\n          item[curr],\r\n          ...searchRequest.target,\r\n        ]) || acc\r\n      );\r\n    }, false);\r\n    return result && !!searchResult;\r\n  }, true);\r\n  return filterResult;\r\n}\r\n\r\n/* const formData = {\r\n    name: 'any name',\r\n    created_at: ['dateStart', 'dateEnd'],\r\n    price: ['from', 'to'],\r\n    cost_price: ['from', 'to'],\r\n    parent_id: 'parent_id',\r\n    barcode: Number(barcode);\r\n} */\r\nfunction createSearchRequest(formData) {\r\n  let arrSearchReuests = [];\r\n  // console.log('createSearchRequest:', formData);\r\n  Object.keys(formData).forEach((key) => {\r\n    let keys = [key];\r\n    let value = formData[key];\r\n    let callback = (a, b) => a === b;\r\n    let searchRequest;\r\n    let target;\r\n\r\n    switch (typeof value) {\r\n      case 'string':\r\n        if (key === 'name') {\r\n          if (testBarcodes(value)) {\r\n            target = [value];\r\n            keys = ['barcodes'];\r\n            callback = Array.prototype.includes;\r\n          }\r\n          let regex = createRegexp(value);\r\n          target = [regex];\r\n          // target = [new RegExp(regex, 'gi')];\r\n          keys = [...keys, 'article_number', 'description'];\r\n          // callback = String.prototype.match;\r\n          callback = RegExp.prototype.test;\r\n        } else {\r\n          target = [value];\r\n        }\r\n        searchRequest = { keys, target, callback };\r\n        break;\r\n\r\n      case 'number':\r\n        if (key === 'barcodes') {\r\n          callback = Array.prototype.includes;\r\n        } else if (key.match(/_at/gi)) {\r\n          callback = (a, b) => {\r\n            let bNew = b + 24 * 3600 * 1000;\r\n            return a >= b && a <= bNew;\r\n          };\r\n        }\r\n        target = [value];\r\n        searchRequest = { keys, target, callback };\r\n        // console.log('createSearchRequest', searchRequest);\r\n        break;\r\n\r\n      case 'object':\r\n        if (Array.isArray(value)) {\r\n          target = [...value];\r\n          if (value.length > 1) {\r\n            if (value[0] === null || !value[0]) {\r\n              callback = (a, b) => a <= b;\r\n              target = [value[1]];\r\n            } else if (value[1] === null || !value[1]) {\r\n              callback = (a, b) => a >= b;\r\n              target = [value[0]];\r\n            } else {\r\n              callback = (a, b, c) => {\r\n                return b <= c ? a >= b && a <= c : a >= c && a <= b;\r\n              };\r\n            }\r\n          } else {\r\n            if (key.match(/_at/gi)) {\r\n              let dateStart = value[0];\r\n              let dateEnd = value[0] + 24 * 3600 * 1000;\r\n              callback = (a, b, c) => {\r\n                return b <= c ? a >= b && a <= c : a >= c && a <= b;\r\n              };\r\n              target = [dateStart, dateEnd];\r\n            }\r\n          }\r\n        }\r\n        searchRequest = { keys, target, callback };\r\n        break;\r\n\r\n      default:\r\n        searchRequest = { keys, target: [value], callback };\r\n        break;\r\n    }\r\n    // console.log('createSearchRequest', searchRequest);\r\n    arrSearchReuests.push(searchRequest);\r\n  });\r\n  return arrSearchReuests;\r\n}\r\n\r\nconst useFilteredData = (/* inItems */) => {\r\n  const [search, setSearch] = useState([]); // arrSearchRequests\r\n  const [items, setItems] = useState([]);\r\n\r\n  const setFilterConfig = (formData) => {\r\n    setSearch(createSearchRequest(formData));\r\n  };\r\n\r\n  useEffect(() => {\r\n    // console.log('Render from useFilteredData!')\r\n    if (search.length) {\r\n      apiIDB.getProduct('all').then((res) => {\r\n        let filteredItems = [...res].filter((item) => filterProd(item, search));\r\n        setItems(filteredItems);\r\n      });\r\n    }\r\n    return () => setItems([]);\r\n  }, [search]);\r\n\r\n  return { items, setFilterConfig, search };\r\n};\r\n\r\nexport default useFilteredData;\r\n","import React from 'react';\r\nimport { apiIDB } from '../../../api/apiIDB';\r\nimport { Modal } from '../Modal/Modal';\r\nimport Tree from '../Tree/Tree';\r\nimport s from './GroupsTree.module.css';\r\n\r\nconst GroupsTree = props => {\r\n\r\n    const groups = [...props.groups];\r\n    let g = groups.find(item => item.id === props.parent_id);\r\n    let gLabel = g ? g.label : 'Root';\r\n    let onDivClick = props.disabled ? null : props.onClick;\r\n\r\n    async function delGroup() {\r\n        let confirmDel = window.confirm(`Вы действительно хотите удалить группу\\n\\r${gLabel}\\n\\rid: ${props.parent_id}?`)\r\n        if (confirmDel) {\r\n            let parentGroup = (await apiIDB.getGroup(props.parent_id)).parent_id;\r\n            if (!parentGroup) parentGroup = '0';\r\n            await props.deleteProduct(props.parent_id, parentGroup, 'group')\r\n        } else {\r\n            alert('DELETED CANCEL');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={s['tree-container']}>\r\n            {props.treeView &&\r\n                // <div className={s.tree} >\r\n                <Modal>\r\n                    <div className={s['tree-modal']}>\r\n                        <Tree\r\n                            data={groups}\r\n                            price=\"Price\"\r\n                            treeLabel=\"Groups\"\r\n                            callback={props.callbackTree}\r\n                            viewEdit={props.viewEdit}\r\n                            pId={props.parent_id}\r\n                        />\r\n                    </div>\r\n                </Modal>\r\n                // </div>\r\n            }\r\n            {props.parent_id !== '0' &&\r\n                <div onClick={() => props.getProductId(props.parent_id, true)} className={s.edit}>\r\n                    <i className='fa fa-edit fa-1x'></i>\r\n                </div>\r\n            }\r\n            <div className={s['g-tree']} onClick={onDivClick}>\r\n                <div name='parent_id'>\r\n                    {props.label || gLabel}\r\n                    {/* <i className='fa fa-share-alt fa-1x'></i> */}\r\n                    <i className='fa fa-bars fa-1x'></i>\r\n                </div>\r\n            </div >\r\n            {props.isEmpty &&\r\n                <div onClick={delGroup} className={s.del}>\r\n                    <i className='fa fa-trash-alt'></i>\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default GroupsTree;\r\n","import React, { useEffect, useMemo, useState } from \"react\";\r\nimport s from \"./Commodity.module.css\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport FormProduct from \"./Forms/FormProduct\";\r\nimport Table from \"../common/Table\";\r\nimport { ProgressBar } from \"../common/ProgressBar\";\r\nimport FormSearch from \"./Forms/FormSearch\";\r\nimport useFilteredData from \"../../Hooks/useFilteredData\";\r\nimport GroupsTree from \"../common/GroupsTree\";\r\nimport { Modal } from \"../common/Modal/Modal\";\r\n// import FormModalWrapper from \"../common/Modal/FormModalWrapper\";\r\n\r\nconst Commodity = props => {\r\n\r\n  const { items, setFilterConfig } = useFilteredData(/* props.commodities */);\r\n  const [pid, setPidSearch] = useState(props.pid);\r\n  const [isEmpty, setIsEmpty] = useState(false);\r\n  const [labelGroup, setLabelGroup] = useState('');\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const setCommodities = props.setCommodities;\r\n  const schema = useMemo(() => {\r\n    let sch = props.schema;\r\n    let schema = [];\r\n    Object.keys(sch).forEach((key) => {\r\n      let lbl;\r\n      if (sch[key][1]) {\r\n        lbl = sch[key][0] ? sch[key][0] : key;\r\n        schema.push([key, lbl]);\r\n      }\r\n    });\r\n    // console.log(schema);\r\n    return schema;\r\n  }, [props.schema]);\r\n  const [showTreeView, setShowTreeView] = useState(false);\r\n\r\n  if (!props.isInit) {\r\n    props.history.push('/settings');\r\n  }\r\n\r\n  const propsSetPid = props.setPid;\r\n  useEffect(() => { propsSetPid(pid) }, [pid, propsSetPid]);\r\n\r\n  useEffect(() => { //get groups & products\r\n    if (!props.isLoaded && props.isInit) {\r\n      props.setPid('0');\r\n      props.getGroups();\r\n    }\r\n    if (!props.comIsLoaded && props.isInit) {\r\n      props.getProducts(props.pid);\r\n    }\r\n\r\n    if (props.error) {\r\n      alert(`${props.error.name}\\n\\r${props.error.message}`);\r\n      props.setError(null);\r\n    }\r\n  }, [props])\r\n\r\n  useEffect(() => {\r\n    setCommodities(items);\r\n    if (isSearching) {\r\n      setLabelGroup(`Результаты поиска - ${items.length} позиций.`);\r\n    }\r\n  }, [items, setCommodities, isSearching])\r\n\r\n  useEffect(() => {\r\n    if (!props.commodities.length) setIsEmpty(true);\r\n    return () => setIsEmpty(false);\r\n  }, [props.commodities]);\r\n\r\n  function newData() {\r\n    props.getProductId();\r\n  }\r\n\r\n  function clickGroups() {\r\n    setShowTreeView(!showTreeView);\r\n  }\r\n\r\n  const callbackTree = (id, tagName, className) => {\r\n    let parent_id = id ? id : 0;\r\n    if (tagName !== 'SPAN' && className !== 'fa fa-edit') return;\r\n    if (className !== 'fa fa-edit') {\r\n      changePid(parent_id);\r\n    } else {\r\n      props.getProductId(id, true);\r\n    }\r\n    setShowTreeView(false);\r\n  }\r\n\r\n  function changePid(eId) {\r\n    // if (props.pid === eId) return;\r\n    props.setPid(eId);\r\n    setPidSearch(eId);\r\n  }\r\n\r\n  const searchProducts = (formData) => {\r\n    setFilterConfig(formData);\r\n  }\r\n\r\n  function returnBeforeSearch() {\r\n    props.getProducts(props.pid);\r\n    setIsSearching(false);\r\n    setLabelGroup('');\r\n  }\r\n\r\n  const formSearchProps = { searchProducts, returnBeforeSearch, setIsSearching, parent_id: pid }\r\n\r\n  if (props.error) {\r\n    return <div>Ошибка...{props.error.message}</div>;\r\n  } else if (!props.isLoaded) {\r\n    return <Preloader />\r\n  } else {\r\n    return (\r\n      <>\r\n        <div className={s.head}>\r\n          <div className={s.buttons}>\r\n            <span className={`${s['button-add']} fa`} onClick={newData}>\r\n              + Товар/Группу\r\n            <i className='fa fa-file'></i>\r\n            </span>\r\n          </div>\r\n          <FormSearch {...formSearchProps} />\r\n        </div>\r\n        {props.viewForm &&\r\n          // <FormModalWrapper>\r\n          <Modal>\r\n            <FormProduct\r\n              groups={props.groups}\r\n              formData={props.formData}\r\n              formPost={props.formPost}\r\n              formError={props.formError}\r\n              setViewForm={props.setViewForm}\r\n              setFormData={props.setFormData}\r\n              toggleFormPost={props.toggleFormPost}\r\n              postFormData={props.postFormData}\r\n              setFormError={props.setFormError}\r\n              pid={props.pid}\r\n              isGroup={props.isGroup}\r\n            />\r\n          </Modal>\r\n          // </FormModalWrapper>\r\n        }\r\n        <div className={s.container}>\r\n          <GroupsTree\r\n            groups={props.groups}\r\n            treeView={showTreeView}\r\n            onClick={clickGroups}\r\n            callbackTree={callbackTree}\r\n            parent_id={props.pid}\r\n            isEmpty={isEmpty}\r\n            deleteProduct={props.deleteProduct}\r\n            getProductId={props.getProductId}\r\n            label={labelGroup}\r\n            viewEdit={true}\r\n          />\r\n          <div className={s.list}>\r\n            {/* <h3>{groupName}  {groupIsEmpty && <span className={s.del} onClick={delGroup}></span>}</h3> */}\r\n            {!props.comIsLoaded && <ProgressBar limit={20} text={'Processing...'} />}\r\n            {props.comIsLoaded &&\r\n              <Table\r\n                products={props.commodities}\r\n                // headers={headers}\r\n                callback={props.getProductId}\r\n                deleteProduct={props.deleteProduct}\r\n                schema={schema}\r\n              />}\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n};\r\n\r\nexport default Commodity;\r\n","import Commodity from './Commodity';\r\nimport {\r\n  setPid,\r\n  getGroups,\r\n  getProducts,\r\n  setViewForm,\r\n  getProductId,\r\n  deleteProduct,\r\n  setFormData,\r\n  toggleFormPost,\r\n  postFormData,\r\n  setFormError,\r\n  setError,\r\n  setCommodities,\r\n} from '../../redux/Actions';\r\nimport { connect } from 'react-redux';\r\n\r\nconst mapState = (state) => {\r\n  const isInit = state.app.isInit;\r\n  let sch = state.settings.products.table.schema;\r\n\r\n  state = state.commodityPage;\r\n  return {\r\n    isLoaded: state.isLoaded,\r\n    groups: state.groups,\r\n    price: 'Price',\r\n    pid: state.pid,\r\n    commodities: state.commodities,\r\n    comIsLoaded: state.comIsLoaded,\r\n    error: state.error,\r\n    viewForm: state.viewForm,\r\n    formData: state.form.formData,\r\n    isGroup: state.form.isGroup,\r\n    formPost: state.form.formPost,\r\n    formError: state.form.formError,\r\n    isInit,\r\n    schema: sch,\r\n  };\r\n};\r\n\r\nexport default connect(mapState, {\r\n  getGroups,\r\n  getProducts,\r\n  setPid,\r\n  setViewForm,\r\n  getProductId,\r\n  deleteProduct,\r\n  setFormData,\r\n  toggleFormPost,\r\n  postFormData,\r\n  setFormError,\r\n  setError,\r\n  setCommodities,\r\n})(Commodity);\r\n","import React from \"react\";\r\nimport s from \"../ImpExcel.module.css\";\r\n\r\nconst News = props => {\r\n  let element;\r\n\r\n  element = (\r\n    <div >\r\n      {props.name}<hr />\r\n      {props.description}<hr />\r\n      {props.article}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <article className={s.article}>\r\n      {/* {props.index}\r\n      {rowsElements} */}\r\n      <h3>{props.index}</h3>\r\n      {element}\r\n    </article>\r\n  );\r\n};\r\nexport default News;\r\n","import React from \"react\";\r\nimport News from \"./News/News\";\r\nimport s from \"./ImpExcel.module.css\";\r\nimport readXlsxFile from \"read-excel-file\";\r\nimport { useState } from \"react\";\r\n\r\nconst ImpExcel = props => {\r\n\r\n  const [childElements, setChildElements] = useState([]);\r\n\r\n  let elements = [];\r\n\r\n  const inpChange = (e) => {\r\n    readXlsxFile(e.target.files[0]).then(rows => {\r\n      rows.forEach((item, idx) => {\r\n        if (!idx) return;\r\n        const element = <News\r\n          index={item[3]}\r\n          key={item[0]}\r\n          name={item[1]}\r\n          description={item[8]}\r\n          article={item[9]} />;\r\n        elements.push(element);\r\n      });\r\n    }).then(() => {\r\n      setChildElements(elements)\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className={s.page}>\r\n      <input type=\"file\" id=\"input\" onChange={inpChange} />\r\n      <h1>LATEST NEWS</h1>\r\n      <div className={s.archive}>{childElements}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImpExcel;\r\n","import React, { useEffect } from 'react';\r\n/* import { withCompose, withDouble, map, getName } from './testCompose';\r\n\r\nconsole.log(withCompose(5)); //21\r\n\r\nconst arr = [1, 2, 3, 4, 5];\r\nconsole.log(withDouble(arr)); // [ 2, 4, 6, 8, 10 ]\r\n\r\nconst people = [\r\n    { name: \"Alex\" },\r\n    { name: \"Julia\" },\r\n    { name: \"Leo\" },\r\n    { name: \"Den\" }\r\n  ];\r\n\r\nconsole.log(map(getName)(people)); */\r\n\r\nconst Example = ({ count }) => {\r\n\r\n    useEffect(() => {\r\n        console.log('render - ' + count)\r\n        return () => {\r\n            console.log('unmount - ' + count);\r\n        }\r\n    }, [count])\r\n\r\n    return (\r\n        <div>example: {count}</div>\r\n    );\r\n}\r\n\r\nexport default Example;\r\n","import React, { useEffect, useState } from 'react';\r\n// import ProgressBar from '../common/ProgressBar/ProgressBar';\r\n// import ProgressBar2 from '../common/ProgressBar/ProgressBar2';\r\nimport Example from './Example';\r\n// import { commodities } from '../../Tests/products.json';\r\nimport useFilteredData from '../../Hooks/useFilteredData';\r\nimport { apiForIdb } from '../../api/api';\r\nimport schemes from './schemes.json';\r\nimport { apiIDB } from '../../api/apiIDB';\r\n\r\nconst Wrapper = (props) => {\r\n\r\n    // const products = commodities.products;\r\n    const { items, setFilterConfig, search } = useFilteredData([]);\r\n    const [filteredItems, setFilteredItems] = useState([])\r\n\r\n    const [count, setCount] = useState(0);\r\n    const clickButton = () => {\r\n        setCount(count + 1);\r\n        if (count > 5) setCount(0);\r\n    };\r\n\r\n    useEffect(() => {\r\n        setFilteredItems(items);\r\n        console.log(filteredItems);\r\n        console.log(search);\r\n        return () => setFilteredItems([]);\r\n    }, [filteredItems, items, search])\r\n\r\n    const clickFilter = () => {\r\n        setFilterConfig({ parent_id: '0'/* , price: [30, 50] */ })\r\n    }\r\n\r\n    const getSchemes = async () => {\r\n        let schemes = await apiForIdb.getSchemes();\r\n        console.log(schemes);\r\n    }\r\n\r\n    const postSchemes = async () => {\r\n        const body = schemes;\r\n        body[0].uuid = localStorage.getItem('storeKey');\r\n        body[0].appId = localStorage.getItem('appKey');\r\n        // console.log(body);\r\n        let resSchemes = await apiForIdb.postSchemes(body);\r\n        console.log(resSchemes);\r\n    }\r\n    apiIDB.getGroup('0').then(g => console.log(g))\r\n\r\n\r\n    return (\r\n        <>\r\n            <button onClick={clickButton}>{count}</button>\r\n            <button onClick={clickFilter}>Filter</button>\r\n            {count < 5 && <Example count={count} />}\r\n            {count < 5 && <Example count={-1} />}\r\n            {/* { (count < 3) && <ProgressBar limit={10} text='test' delay={500} /> } */}\r\n            {/* <ProgressBar2 limit={20} text='test' delay={500} /> */}\r\n            <button onClick={postSchemes} disabled>Post Schemes</button>\r\n            <button onClick={getSchemes}>Get Schemes</button>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Wrapper;\r\n\r\n\r\n//1a8cb80f-2130-49a7-93c3-1d5b3b822fe2\r\n//7b23ec83-245a-4b6a-baa7-417ab7c3ab76\r\n","import React, { useState } from 'react';\r\nimport { apiForIdb } from '../../api/api';\r\nimport Tree from '../common/Tree/Tree';\r\nimport { apiIDB } from '../../api/apiIDB';\r\n\r\nconst IdbTest = () => {\r\n\r\n    const [groups, setGroups] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    async function callbackTree(id) {\r\n        let group = await apiIDB.getGroup(id);\r\n        console.log(group);\r\n        alert(JSON.stringify(group, null, 2));\r\n    }\r\n\r\n    async function butGetGroups() {\r\n        setIsLoading(true);\r\n        let res = await apiForIdb.getGroupsEvo();\r\n        console.log(res);\r\n        let g = await res.items;\r\n        await apiIDB.pushItems('groups', g);\r\n        /*\r\n         created_at: \"2018-08-01T06:00:27.605+0000\"\r\n         id: \"96639e0c-6409-9faa-d4e0-a8212b9fa795\"\r\n         name: \"Веревки\"\r\n         parent_id: \"3257cd3d-6e61-4315-8d83-084578c507be\"\r\n         store_id: \"20180608-EEA0-408D-807D-6AB73272E383\"\r\n         updated_at: \"2019-04-13T07:58:19.537+0000\"\r\n         user_id: \"01-000000000910281\"\r\n         */\r\n        let groups = await apiIDB.getGroup('all');\r\n        groups.forEach((item) => {\r\n            // if (idx === 1) console.log(item);\r\n            item.pid = item.parent_id ? item.parent_id : null;\r\n            item.label = item.name;\r\n        });\r\n        setGroups(groups);\r\n        setIsLoading(false);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <h1>IDB Test</h1>\r\n            <button onClick={() => butGetGroups()} disabled={isLoading}>get Groups Evo</button>\r\n            { isLoading && <p>Loading...</p>}\r\n            { !!groups.length && <Tree data={groups} price=\"Price\" treeLabel=\"Groups\" callback={callbackTree} />}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default IdbTest;\r\n","import { apiIDB } from './apiIDB';\r\nimport { compose } from './apiUtils';\r\n\r\nexport function blobFromObj({ obj, ...rest }) {\r\n  let json = JSON.stringify(obj, null, 2);\r\n  let blob = new Blob([json], { type: 'application/json' });\r\n  return { blob, ...rest };\r\n}\r\n\r\nexport function blobToUrl({ blob, fileName = 'test', ext = 'json' }) {\r\n  let link = document.createElement('a');\r\n  link.download = `${fileName}.${ext}`;\r\n  link.href = URL.createObjectURL(blob);\r\n  link.click();\r\n  URL.revokeObjectURL(link.href);\r\n}\r\n\r\nfunction getObjfromLocalStorage() {\r\n  let keys = Object.keys(localStorage);\r\n  let obj = {};\r\n  for (let key of keys) {\r\n    obj[key] = localStorage.getItem(key);\r\n  }\r\n  return obj;\r\n}\r\n\r\nasync function getObjfromIdb() {\r\n  let obj = {};\r\n\r\n  obj.groups = await apiIDB.getGroup('all');\r\n\r\n  obj.products = await apiIDB.getProduct('all');\r\n\r\n  return obj;\r\n}\r\n\r\nexport async function saveConfig({ type, fileName = 'config' }) {\r\n  let obj = {};\r\n\r\n  switch (type) {\r\n    case 'config':\r\n      obj.config = getObjfromLocalStorage();\r\n      break;\r\n    case 'commodities':\r\n      obj.commodities = await getObjfromIdb();\r\n      break;\r\n    default:\r\n      obj.config = getObjfromLocalStorage();\r\n      break;\r\n  }\r\n  compose(blobToUrl, blobFromObj)({ obj, fileName });\r\n}\r\n\r\nexport async function readJsonFile(input) {\r\n  let file = input.files[0];\r\n  let reader = new FileReader();\r\n  reader.readAsText(file);\r\n\r\n  return new Promise((resolve, reject) => {\r\n    reader.onload = function () {\r\n      var json = JSON.parse(reader.result);\r\n      resolve(json);\r\n    };\r\n\r\n    reader.onerror = function () {\r\n      console.error(reader.error);\r\n      reject(reader.error);\r\n    };\r\n  });\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { setAppKey, setStoreKey, setStores, toggleInitApp, setPeriodUpdate } from \"../../redux/Actions\";\r\nimport { apiForIdb } from \"../../api/api\";\r\nimport { readJsonFile, saveConfig } from \"../../api/apiFile\";\r\nimport { apiIDB } from \"../../api/apiIDB\";\r\n\r\nfunction addKey(id) {\r\n    var key = document.getElementById(id).value;\r\n    if (!key) return;\r\n    window.localStorage[id] = key;\r\n    return key;\r\n}\r\n\r\nconst MainSettings = props => {\r\n\r\n\r\n    let inpRef = React.createRef();\r\n\r\n    async function saveData() {\r\n\r\n        await saveConfig({ fileName: `backup_config_${new Date().toJSON()}` });\r\n\r\n        console.log('File with config saved');\r\n        let saveData = window.confirm('Сохранить список товаров?');\r\n        if (saveData) {\r\n            await saveConfig({ type: 'commodities', fileName: `backup_commodities_${new Date().toJSON()}` });\r\n            console.log('File with Data saved');\r\n        }\r\n    }\r\n\r\n\r\n    async function setAppKeyAndStores(key) {\r\n        localStorage.appKey = key;\r\n        props.setAppKey(key);\r\n        try {\r\n            let stores = await apiForIdb.getStores();\r\n            props.setStores(stores);\r\n        } catch (err) {\r\n            delete localStorage.appKey;\r\n            props.setAppKey(null);\r\n            console.error(err);\r\n        }\r\n    }\r\n\r\n    async function clickAddAppKey() {\r\n        var key = addKey('appKey');\r\n        if (!key) return;\r\n        await setAppKeyAndStores(key);\r\n    }\r\n\r\n    function liClick(e) {\r\n        let storeKey = e.target.id;\r\n        localStorage.storeKey = storeKey;\r\n        props.setStoreKey(storeKey);\r\n        // props.initApp(true);\r\n    }\r\n\r\n    const [clean, setClean] = useState(false);\r\n\r\n    async function cleareStorage(storageName) {\r\n        setClean(true);\r\n        localStorage.clear();\r\n        await apiIDB.delDb(storageName);\r\n        props.setAppKey(null);\r\n        props.setStoreKey(null);\r\n        props.toggleInitApp(false);\r\n        setClean(false);\r\n        window.location.reload();\r\n    }\r\n\r\n    async function restoreConfig() {\r\n        let file = inpRef.current;\r\n        let config = (await readJsonFile(file)).config;\r\n        await setAppKeyAndStores(config.appKey);\r\n        localStorage.storeKey = config.storeKey;\r\n        props.setStoreKey(config.storeKey);\r\n    }\r\n\r\n    const [periodUpdate, setPUpdate] = useState(props.periodUpdate);\r\n\r\n    useEffect(() => setPUpdate(props.periodUpdate), [props.periodUpdate]);\r\n\r\n    function blurPeriodUpdate(ev) {\r\n        localStorage.setItem('periodUpdate', periodUpdate);\r\n        props.setPeriodUpdate(periodUpdate);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {props.appKey && props.storeKey && !props.isInit &&\r\n                <div>\r\n                    <h2>Идет инициализация приложения...</h2>\r\n                </div>\r\n            }\r\n            {!props.appKey &&\r\n                <div>\r\n                    <h2>Необходимо инициализировать приложение!</h2>\r\n                    <p>Введите токен приложения...</p>\r\n                </div>\r\n            }\r\n            {clean &&\r\n                <div>\r\n                    <h2>Идет очистка хранилища...</h2>\r\n                    <p>Страница перезагрузится автоматически.</p>\r\n                    <p>Если процесс затянулся, перезагрузите страницу вручную.</p>\r\n                </div>\r\n            }\r\n            {!props.appKey &&\r\n                <div>\r\n                    <input id={'appKey'} />\r\n                    <button onClick={clickAddAppKey}>Установить токен приложения</button>\r\n                </div>\r\n            }\r\n            {!!props.appKey && !props.isInit &&\r\n                <div>\r\n                    <h3>Токен приложения</h3>\r\n                    <p>{props.appKey}</p>\r\n                </div>\r\n            }\r\n            { props.appKey && !!props.stores.length && !props.storeKey &&\r\n                <div style={{ cursor: 'pointer' }}>\r\n                    <h3>Выберите магазин</h3>\r\n                    <ul>\r\n                        {props.stores.map(item => {\r\n                            return (\r\n                                <li key={item.id} id={item.id} onClick={liClick}>{item.id}: {item.name}</li>\r\n                            )\r\n                        })}\r\n                    </ul>\r\n                </div>\r\n            }\r\n            { !!props.storeKey && !props.isInit &&\r\n                <div>\r\n                    <h3>Выбранный магазин</h3>\r\n                    <p>{props.storeKey}</p>\r\n                </div>\r\n            }\r\n            { props.isInit && !clean && <h2>Приложение инициализировано!</h2>}\r\n            { props.isInit && !clean &&\r\n                <div>\r\n                    <button onClick={() => cleareStorage('Evo')}>cleare Storage</button>\r\n                    <button onClick={saveData}>Save Config</button>\r\n                    <label htmlFor=\"periodUpdate\">Период обновления(час.):</label>\r\n                    <input type=\"number\" name=\"periodUpdate\" id=\"periodUpdate\"\r\n                        style={{width: '3rem'}}\r\n                        value={periodUpdate} onChange={ev => setPUpdate(ev.target.value)}\r\n                        onBlur={blurPeriodUpdate}\r\n                    />\r\n                </div>\r\n            }\r\n            {\r\n                !props.appKey &&\r\n                <div>\r\n                    <p>или выберите восстановление конфигурации...</p>\r\n                    <label>Восстановить конфигурацию из файла\r\n                    <input type=\"file\" ref={inpRef} onChange={restoreConfig} hidden />\r\n                    </label>\r\n                </div>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapState = state => {\r\n    return {\r\n        appKey: state.app.appKey,\r\n        storeKey: state.app.storeKey,\r\n        isInit: state.app.isInit,\r\n        stores: state.app.stores,\r\n        periodUpdate: state.app.periodUpdate,\r\n    }\r\n}\r\n\r\nexport default connect(mapState, { setAppKey, setStoreKey, setStores, toggleInitApp, setPeriodUpdate })(MainSettings);\r\n","import React from 'react';\r\nimport s from './CardSell.module.css';\r\n\r\nexport function CardSell(props: any) {\r\n  return (\r\n    <div className={s['card-container']}>\r\n      <div className={s['card-header']}>\r\n        <h3>{props.type}: {props.number}</h3>\r\n      </div>\r\n      <div className={s['card-body']}>\r\n        <ul>\r\n          {props.body?.positions && props.body.positions.map((p: any) => {\r\n            return (\r\n              <li key={p.uuid} id={p.uuid}>\r\n                <span>{p.product_name}</span> |\r\n                <span>{p.price}</span> |\r\n                <span>{p.quantity}</span> |\r\n                <span>{p.sum}</span>\r\n              </li>\r\n            )\r\n          })}\r\n        </ul>\r\n      </div>\r\n      <div className={s['card-footer']}>\r\n        Sum: {props.body?.result_sum}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { apiForIdb } from '../../api/api';\r\n// import { compose } from '../../api/apiUtils';\r\nimport ProgressBar from '../common/ProgressBar/ProgressBar';\r\nimport { dateToString, getMinData } from '../common/utillites/utilites';\r\nimport { CardSell } from './components/CardSell/CardSell';\r\n// import { blobFromObj, blobToUrl } from '../../api/apiFile'\r\n\r\nconst mapState = state => {\r\n    return {\r\n        isInit: state.app.isInit,\r\n    }\r\n}\r\n\r\nconst Documents = (props) => {\r\n\r\n    if (!props.isInit) {\r\n        props.history.push('/settings');\r\n    }\r\n\r\n    const typesOfDocs = [\r\n        ['ACCEPT', 'Приемка товаров'],\r\n        ['INVENTORY', 'Документ инвентаризации'],\r\n        ['REVALUATION', 'Переоценка'],\r\n        ['RETURN', 'Возврат поставщику'],\r\n        ['WRITE_OFF', 'Списание'],\r\n        ['SELL', 'Продажа'],\r\n        ['PAYBACK', 'Возврат'],\r\n        ['employees', 'Сотрудники'],\r\n        ['ofd', 'Документы ОФД']\r\n    ]\r\n\r\n    const [docs, setDocs] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [docType, setDocType] = useState(typesOfDocs[0][0]);\r\n\r\n    const [period, setPeriod] = useState({\r\n        dateStart: new Date(),\r\n        dateEnd: new Date(),\r\n        dateMin: getMinData()\r\n    });\r\n\r\n    useEffect(() => {\r\n        period.dateStart.setHours(0, 0, 0);\r\n    }, [period])\r\n\r\n    async function butGetDocs() {\r\n        setIsLoading(true);\r\n        console.log(docType);\r\n        let res;\r\n        try {\r\n            if (docType === 'employees') {\r\n                res = await apiForIdb.getEmoloyees();\r\n            } else if (docType === 'ofd') {\r\n                res = await apiForIdb.getOfdDocuments();\r\n            } else {\r\n                let p = {\r\n                    dateStart: period.dateStart.getTime(),\r\n                    dateEnd: period.dateEnd.getTime()\r\n                }\r\n                res = await apiForIdb.getDocuments(docType, p);\r\n            }\r\n            if (!res.items) {\r\n                setDocs([]);\r\n            } else {\r\n                setDocs(res.items);\r\n            }\r\n        } catch (e) {\r\n            alert(e.message);\r\n            setDocs([]);\r\n        }\r\n        console.log(res);\r\n        setIsLoading(false);\r\n    }\r\n\r\n    function changeDate(e) {\r\n        let date = new Date(e.currentTarget.value);\r\n        if (e.currentTarget.name === 'dateStart') {\r\n            date.setHours(0);\r\n        } else {\r\n            date.setHours(23);\r\n        }\r\n        setPeriod({ ...period, [e.currentTarget.name]: date });\r\n        // console.log(e.currentTarget.name + ' : ' + e.currentTarget.value)\r\n    }\r\n\r\n    async function docClick(e) {\r\n        if (e.target.tagName !== 'SPAN') return;\r\n        let id = e.currentTarget.id;\r\n        if (id === 'Временно не работает!') {\r\n            alert(id);\r\n            return;\r\n        }\r\n        let doc;\r\n        if (docType === 'employees') {\r\n            doc = await apiForIdb.getEmoloyees(id);\r\n        } else {\r\n            doc = await apiForIdb.getDocuments(null, null, id);\r\n        }\r\n        console.log(doc);\r\n        // compose(blobToUrl, blobFromObj)({ obj: doc, fileName: docType });\r\n    }\r\n\r\n    function changeType(e) {\r\n        setDocType(e.target.value);\r\n        setDocs([]);\r\n    }\r\n\r\n    const styleSpan = {\r\n        cursor: 'pointer',\r\n        border: '1px solid green',\r\n        paddingTop: '0.5rem',\r\n        paddingLeft: '0.5rem',\r\n        paddingRight: '0.5rem',\r\n        background: 'yellow'\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <h1>Documents {docType}</h1>\r\n            <div>\r\n                <label htmlFor=\"dateStart\">Date start:</label>\r\n                <input type=\"date\" name=\"dateStart\"\r\n                    id=\"dateStart\"\r\n                    value={dateToString(period.dateStart)}\r\n                    min={period.dateMin}\r\n                    max={dateToString()}\r\n                    onChange={changeDate}\r\n                />\r\n                <label htmlFor=\"dateEnd\">Date end:</label>\r\n                <input type=\"date\" name=\"dateEnd\"\r\n                    id=\"dateEnd\"\r\n                    value={dateToString(period.dateEnd)}\r\n                    min={period.dateMin}\r\n                    max={dateToString()}\r\n                    onChange={changeDate}\r\n                />\r\n            </div>\r\n            <label>\r\n                DocType\r\n            <select name=\"type_docs\" id=\"typeDocs\" onChange={changeType}>\r\n                    {\r\n                        typesOfDocs.map(item => {\r\n                            return <option key={item[0]} value={item[0]}>{item[1]}</option>\r\n                        })\r\n                    }\r\n                </select>\r\n            </label>\r\n            <button onClick={butGetDocs} disabled={isLoading}>get Documents</button>\r\n            { isLoading && <ProgressBar limit={20} delay={500} text={'Loading '} />}\r\n            { !!docs.length &&\r\n                <ul>\r\n                    {docs.map((item, idx) => {\r\n                        if (docType === 'SELL') return <CardSell key={item.id} {...item} />\r\n                        return (idx < 20) && <li key={item.id} id={item.id} onClick={docClick} style={{ margin: '0.5rem' }}>\r\n                            <span style={styleSpan}>{item.id}</span>\r\n                        </li>\r\n                    })}\r\n                </ul>\r\n            }\r\n        </>\r\n    );\r\n}\r\n\r\nexport default connect(mapState)(Documents);\r\n","import React, { useEffect } from \"react\";\r\nimport \"./App.css\";\r\nimport \"../../Assets/css/fontawesome.css\";\r\nimport \"../../Assets/css/solid.css\";\r\nimport \"../../Assets/css/regular.css\";\r\nimport \"../../Assets/css/brands.css\";\r\nimport { Route } from \"react-router-dom\";\r\nimport Game from \"../Game\";\r\nimport HeaderContainer from \"../Header/HeaderContainer\";\r\nimport CommodityContainer from \"../Commodity\";\r\nimport ImpExcel from \"../ImpExcel/ImpExcel\";\r\nimport Wrapper from \"../Example/Wrapper\";\r\nimport IdbTest from \"../IdbTest/IdbTest\";\r\nimport MainSettings from \"../Settings/MainSettings\";\r\nimport {\r\n  initializeApp,\r\n  toggleInitApp,\r\n  setAppKey,\r\n  setStoreKey,\r\n  setLastUpdate,\r\n  setPeriodUpdate,\r\n} from '../../redux/Actions';\r\nimport { connect } from \"react-redux\";\r\nimport Documents from \"../Documents\";\r\nimport { /* fetchGroupsProducts, */ syncGroupsProducts, testNeedUpdate } from \"../../api/apiUtils\";\r\n\r\nconst App = props => {\r\n\r\n  useEffect(() => {\r\n\r\n    async function getProductsForIdb(lastUpdate, periodUpdate = 24) {\r\n      if (testNeedUpdate(lastUpdate, periodUpdate)) {\r\n        await syncGroupsProducts();\r\n        props.setLastUpdate();\r\n      }\r\n    }\r\n\r\n    if (!props.isInit) props.initializeApp();\r\n\r\n    if (props.appKey && props.storeKey && !props.isInit) {\r\n      getProductsForIdb(props.lastUpdate, props.periodUpdate)\r\n        .then(() => props.toggleInitApp(true))\r\n        .catch(e => alert(e.message));\r\n    }\r\n  }, [props])\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <HeaderContainer />\r\n      <div className=\"app-content\">\r\n        <Route exact path=\"/\" />\r\n        <Route exact path=\"/settings\" component={MainSettings} />\r\n        <Route path=\"/example\" component={Wrapper} />\r\n        {props.isInit && <Route path=\"/commodity\" component={CommodityContainer} />}\r\n        <Route path=\"/game\" component={Game} />\r\n        <Route path=\"/table\" component={ImpExcel} />\r\n        <Route path=\"/test\" component={IdbTest} />\r\n        <Route path=\"/documents\" component={Documents} />\r\n      </div>\r\n      {/* <div className={'footer'}>\r\n        <h5>FOOTER</h5>\r\n      </div> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapState = state => {\r\n  return {\r\n    appKey: state.app.appKey,\r\n    storeKey: state.app.storeKey,\r\n    isInit: state.app.isInit,\r\n    lastUpdate: state.app.lastUpdate,\r\n    periodUpdate: state.app.periodUpdate,\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapState,\r\n  {\r\n    initializeApp,\r\n    toggleInitApp,\r\n    setAppKey,\r\n    setStoreKey,\r\n    setLastUpdate,\r\n    setPeriodUpdate,\r\n  }\r\n)(App);\r\n","import { GET_TITLE, CHOOSE_LANG } from './Types';\r\n\r\nlet initialState = {\r\n  langs: { ru: 0, en: 1 },\r\n  currentLang: 0,\r\n  title: '',\r\n  navBar: [\r\n    { link: '/', title: ['Начало', 'Start'] },\r\n    { link: '/settings', title: ['Настройки', 'Settings'] },\r\n    { link: '/commodity', title: ['Товары', 'Products'] },\r\n    { link: '/documents', title: ['Документы', 'Documents'] },\r\n    { link: '/game', title: ['Играть', 'Game'] },\r\n    { link: '/table', title: ['Экспорт Excel', 'Export Excel'] },\r\n  ],\r\n};\r\n\r\nconst navReduser = (state = initialState, action) => {\r\n  switch (action.type) {\r\n\r\n    case GET_TITLE:\r\n      let title;\r\n      let nav = state.navBar.find((item) => item.link === action.path);\r\n      if (nav !== undefined) {\r\n        title = nav.title[state.currentLang];\r\n      }\r\n      return { ...state, title };\r\n\r\n    case CHOOSE_LANG:\r\n      return { ...state, currentLang: state.langs[action.lng] };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default navReduser;\r\n","import {\r\n  SET_GROUPS,\r\n  SET_PID,\r\n  SET_COMMODITIES,\r\n  SET_ERROR,\r\n  VIEW_FORM,\r\n  SET_FORM_DATA,\r\n  TOGGLE_FORM_POST,\r\n  SET_FORM_ERROR,\r\n  SET_FORM_PHOTOS,\r\n} from './Types';\r\n\r\nlet initialState = {\r\n  groups: [],\r\n  commodities: [],\r\n  pid: null,\r\n  isLoaded: false,\r\n  comIsLoaded: false,\r\n  error: null,\r\n  lastUpdate: 1585166400000,\r\n  isUpdated: false,\r\n  viewForm: false,\r\n  form: {\r\n    formData: {\r\n      id: null,\r\n      name: '',\r\n      code: '',\r\n      measure_name: 'шт',\r\n      tax: 'NO_VAT',\r\n      allow_to_sell: true,\r\n      description: '',\r\n      article_number: '',\r\n      parent_id: null,\r\n      type: 'NORMAL',\r\n      price: 0,\r\n      cost_price: 0,\r\n      quantity: 0,\r\n      photos: [],\r\n      barcodes: [],\r\n    },\r\n    formPost: false,\r\n    resMessage: null,\r\n    formError: null,\r\n    isGroup: false,\r\n    photos: [],\r\n  },\r\n};\r\n\r\nconst commodityReduser = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_GROUPS:\r\n      let groups = [];\r\n      action.groups.forEach((item) => {\r\n        let group = {\r\n          id: item.id,\r\n          pid: item.parent_id ? item.parent_id : null,\r\n          label: item.name,\r\n          // code: Date.parse(item.createdAt)\r\n        };\r\n        groups.push(group);\r\n      });\r\n      // groups.sort((a,b) => a.code - b.code);\r\n      return { ...state, groups: [...groups], isLoaded: true };\r\n\r\n    case SET_PID:\r\n      return { ...state, pid: action.pid, comIsLoaded: false }\r\n\r\n    case SET_COMMODITIES:\r\n      // let commodities = [];\r\n      // action.commodities.forEach((item) => {\r\n      //   let commodity = {\r\n      //     id: item.id,\r\n      //     code: item.code,\r\n      //     label: item.name,\r\n      //     price: item.price,\r\n      //     quantity: item.quantity,\r\n      //     article: item.article_number,\r\n      //   };\r\n      //   commodities.push(commodity);\r\n      // });\r\n      return {...state, commodities: action.commodities, comIsLoaded: true }\r\n\r\n    case SET_ERROR:\r\n      return {...state, error: action.error }\r\n\r\n    case SET_FORM_ERROR:\r\n      return { ...state, form: { ...state.form, formError: action.error } };\r\n\r\n    case VIEW_FORM:\r\n      return { ...state, viewForm: action.viewForm };\r\n\r\n    case TOGGLE_FORM_POST:\r\n      return { ...state, form: { ...state.form, formPost: action.formPost } };\r\n\r\n    case SET_FORM_DATA:\r\n      const formData =\r\n        action.formData === null ? initialState.form.formData : action.formData;\r\n      const isGroup = true && action.isGroup;\r\n      return { ...state, form: { ...state.form, formData, isGroup } };\r\n\r\n    case SET_FORM_PHOTOS:\r\n      return { ...state, form: action.photos };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default commodityReduser;\r\n","import {\r\n  SET_APP_KEY,\r\n  SET_STORE_KEY,\r\n  INIT_APP,\r\n  SET_STORES,\r\n  SET_LAST_UPDATE,\r\n  SET_PERIOD_UPDATE,\r\n  SET_SYNC_DATA,\r\n  CLEAR_SYNC_DATA,\r\n} from './Types';\r\n\r\nconst initialState = {\r\n  appKey: null,\r\n  storeKey: null,\r\n  isInit: false,\r\n  stores: [],\r\n  lastUpdate: null,\r\n  periodUpdate: 24,\r\n  syncData: {\r\n    products: [],\r\n    groups: [],\r\n  },\r\n};\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_APP_KEY:\r\n      return { ...state, appKey: action.key };\r\n    case SET_STORE_KEY:\r\n      return { ...state, storeKey: action.key };\r\n    case INIT_APP:\r\n      return { ...state, isInit: action.init };\r\n    case SET_STORES:\r\n      return { ...state, stores: [...action.stores] };\r\n    case SET_LAST_UPDATE:\r\n      return { ...state, lastUpdate: +action.dateUpdate };\r\n    case SET_PERIOD_UPDATE:\r\n      return { ...state, periodUpdate: action.periodUpdate };\r\n    case SET_SYNC_DATA:\r\n      return {\r\n        ...state,\r\n        syncData: {\r\n          products: [...action.products],\r\n          groups: [...action.groups],\r\n        },\r\n      };\r\n    case CLEAR_SYNC_DATA:\r\n      return { ...state, syncData: { products: [], groups: [] } };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default appReducer;\r\n","import { SET_SCHEMA } from './Types';\r\n\r\nconst initialSettings = {\r\n  app: {\r\n    appKey: null,\r\n    storeKey: null,\r\n    isInit: false,\r\n    stores: [],\r\n    lastUpdate: null,\r\n    periodUpdate: 24,\r\n  },\r\n  products: {\r\n    table: {\r\n      schema: {\r\n        id: ['', 0],\r\n        name: ['Наименование', 1],\r\n        code: ['', 0],\r\n        measure_name: ['', 0],\r\n        tax: ['', 0],\r\n        allow_to_sell: ['', 0],\r\n        description: ['', 0],\r\n        article_number: ['Артикул', 1],\r\n        parent_id: ['', 0],\r\n        type: ['', 0],\r\n        price: ['Цена', 1],\r\n        cost_price: ['', 0],\r\n        quantity: ['Количество', 1],\r\n        barcodes: ['', 0],\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nconst settingsReducer = (state = initialSettings, action) => {\r\n  switch (action.type) {\r\n    case SET_SCHEMA:\r\n      let schema = {...state.products.table.schema, ...action.schema};\r\n      let newState = {...state};\r\n      newState.products.table.schema = {...schema};\r\n      return newState;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default settingsReducer;\r\n","import { createStore, combineReducers, applyMiddleware } from 'redux';\r\nimport navReduser from './navReduser';\r\nimport commodityReduser from './commodityReduser';\r\nimport thunkMidleware from 'redux-thunk';\r\nimport appReducer from './appReducer';\r\nimport settingsReducer from './settingsReduser';\r\n\r\nlet redusers = combineReducers({\r\n  navigation: navReduser,\r\n  commodityPage: commodityReduser,\r\n  app: appReducer,\r\n  settings: settingsReducer,\r\n});\r\n\r\nlet store = createStore(redusers, applyMiddleware(thunkMidleware));\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./components/App\";\r\nimport store from \"./redux/redux-store\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { Provider } from \"react-redux\";\r\n\r\n/** RENDER */\r\n  ReactDOM.render(\r\n    <Provider store={store}>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </Provider>\r\n    ,document.getElementById(\"root\")\r\n  );\r\n\r\n  window.store = store;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"attributes-ul\":\"BlockMod_attributes-ul__1cSEM\",\"choices-ul\":\"BlockMod_choices-ul__2IoZY\",\"attribut\":\"BlockMod_attribut__3ECdF\",\"choice\":\"BlockMod_choice__15NUI\",\"form-change-name\":\"BlockMod_form-change-name__3Yylj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"column-1\":\"Header_column-1__1RbZq\",\"info\":\"Header_info__2BNjI\",\"navbar\":\"Header_navbar__eQySY\",\"column-2\":\"Header_column-2__gg_EM\",\"title\":\"Header_title__1REPZ\",\"lng\":\"Header_lng__1HHqf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Commodity_container__2O07C\",\"list\":\"Commodity_list__2ILIG\",\"selected\":\"Commodity_selected__3t5hz\",\"del\":\"Commodity_del__RIa5V\",\"head\":\"Commodity_head__2sL_Q\",\"buttons\":\"Commodity_buttons__lNlz7\",\"button-add\":\"Commodity_button-add__LhQoK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tree-container\":\"GroupsTree_tree-container__21gHs\",\"g-tree\":\"GroupsTree_g-tree__17BND\",\"tree-modal\":\"GroupsTree_tree-modal__2xccT\",\"del\":\"GroupsTree_del__1J4Fs\",\"edit\":\"GroupsTree_edit__2W3JP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"ImpExcel_image__3T78n\",\"page\":\"ImpExcel_page__escWJ\",\"archive\":\"ImpExcel_archive__39uKW\",\"article\":\"ImpExcel_article__23hzN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cover-div\":\"FormModalWrapper_cover-div__2PEhn\",\"container\":\"FormModalWrapper_container__190ch\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card-container\":\"CardSell_card-container__2KUht\",\"card-footer\":\"CardSell_card-footer__3mcSe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"del\":\"Table_del__3ZTVB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tree\":\"Tree_tree__2BiYs\",\"selected\":\"Tree_selected__3nfeH\",\"children-length\":\"Tree_children-length__MnPzu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Navbar_item__3BYsL\",\"active\":\"Navbar_active__2-ZqH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"div-cover\":\"Modal_div-cover__NbL5i\",\"div-container\":\"Modal_div-container__uuIn_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form-product\":\"Form_form-product__rFtLH\",\"menu-buttons\":\"Form_menu-buttons__5lLq7\",\"menu-buttons-groups\":\"Form_menu-buttons-groups__QxTTd\",\"product-info\":\"Form_product-info__2OoX8\",\"id-barcodes-photos\":\"Form_id-barcodes-photos__2EtGr\",\"uuid\":\"Form_uuid__390Ur\",\"allow-edit\":\"Form_allow-edit__2bNLl\",\"form-photo\":\"Form_form-photo__KUrWt\",\"picture-small\":\"Form_picture-small__3G_dV\",\"div-picture\":\"Form_div-picture__1ZjeF\",\"barcodes\":\"Form_barcodes__U-W5R\",\"barcode\":\"Form_barcode__3l5Vp\",\"add-bc\":\"Form_add-bc__3ZUsN\",\"barcodes-hidden\":\"Form_barcodes-hidden__3RH5e\",\"barcode-err\":\"Form_barcode-err__3XErq\",\"view-barcode\":\"Form_view-barcode__1dcmC\",\"del-bc\":\"Form_del-bc__1LwSb\",\"code_article\":\"Form_code_article__jY4wJ\",\"code\":\"Form_code__1DUSp\",\"article-number\":\"Form_article-number__2ncsP\",\"propertyes\":\"Form_propertyes__39JHl\",\"tax\":\"Form_tax__10Vyu\",\"tree-container\":\"Form_tree-container__1Dby-\",\"g-tree\":\"Form_g-tree__e4Uyg\",\"tree\":\"Form_tree__3nwNl\",\"name\":\"Form_name__1YFWH\",\"description\":\"Form_description__J0kCp\",\"prices\":\"Form_prices__4dNT8\",\"price\":\"Form_price__Khzda\",\"buttons\":\"Form_buttons__3k3hF\",\"button-submit\":\"Form_button-submit__24VDU\",\"button-cancel\":\"Form_button-cancel__1wDlz\",\"select\":\"Form_select__JfE4L\",\"big-img\":\"Form_big-img__1-g2E\",\"required\":\"Form_required__3vB1c\",\"product-dates\":\"Form_product-dates__3wb-N\",\"created_at\":\"Form_created_at__1C-ca\",\"updated_at\":\"Form_updated_at__16XZc\",\"attr-container\":\"Form_attr-container__3Zolp\",\"attr\":\"Form_attr__1NDhW\",\"attr-select\":\"Form_attr-select__K9JP2\",\"attr-choices\":\"Form_attr-choices__FfdB4\",\"choice\":\"Form_choice__3kyfR\",\"selected\":\"Form_selected__4K6BO\"};"],"sourceRoot":""}