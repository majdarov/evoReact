(this["webpackJsonpevo-react"]=this["webpackJsonpevo-react"]||[]).push([[0],{10:function(e){e.exports=JSON.parse('{"baseURL":"https://api.evotor.ru/","url":"","headers":{"Accept":"application/vnd.evotor.v2+json","Content-Type":"application/vnd.evotor.v2+json","X-Authorization":""}}')},112:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(1),c=r.n(a),s=r(35),o=r.n(s),i=r(3),u=r.n(i),l=r(4),d=(r(75),r(76),r(77),r(78),r(79),r(7)),p=r(5),b=r(14),j=r(40),f=r(15),m=r(17);r(80);function h(e){return Object(n.jsx)("button",{className:e.className,onClick:e.onClick,children:e.value})}var O=function(e){Object(f.a)(r,e);var t=Object(m.a)(r);function r(){return Object(b.a)(this,r),t.apply(this,arguments)}return Object(j.a)(r,[{key:"renderSquare",value:function(e){var t=this,r=this.props.sq===e&&this.props.sqSel?"square selected":"square";return setTimeout((function(){return r="square"}),500),Object(n.jsx)(h,{value:this.props.squares[e],className:r,onClick:function(){return t.props.onClick(e)}},e)}},{key:"render",value:function(){for(var e=[],t=0;t<9;)for(var r=1;r<=3;r++){for(var a=[],c=1;c<=3;c++)a.push(this.renderSquare(t)),t++;e.push(Object(n.jsx)("div",{className:"board-row",children:a},r))}return Object(n.jsx)("div",{children:e})}}]),r}(c.a.Component);function v(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],r=function(r){var n=Object(p.a)(t[r],3),a=n[0],c=n[1],s=n[2];if(e[a]&&e[a]===e[c]&&e[a]===e[s])return document.querySelectorAll(".square").forEach((function(e,n){e.classList.remove("selected"),t[r].forEach((function(t){if(n===t){e.classList.toggle("selected");var r=setInterval((function(){e.classList.toggle("selected")}),500);setTimeout((function(){clearInterval(r),e.classList.remove("selected")}),3e3)}}))})),{v:e[a]}},n=0;n<t.length;n++){var a=r(n);if("object"===typeof a)return a.v}return null}var x=function(e){Object(f.a)(r,e);var t=Object(m.a)(r);function r(e){var n;return Object(b.a)(this,r),(n=t.call(this,e)).state={history:[{squares:Array(9).fill(null),square:null}],xIsNext:!0,stepNumber:0},n}return Object(j.a)(r,[{key:"handleClick",value:function(e){var t=this.state.history.slice(0,this.state.stepNumber+1),r=t[t.length-1].squares.slice();v(r)||r[e]||(r[e]=this.state.xIsNext?"X":"O",this.setState({history:t.concat([{squares:r,square:e}]),stepNumber:t.length,xIsNext:!this.state.xIsNext}),document.querySelectorAll("li").forEach((function(e){e.firstElementChild.classList.remove("selected")})))}},{key:"jumpTo",value:function(e,t){var r=this;document.querySelectorAll("li").forEach((function(e){e.firstElementChild.classList.remove("selected")})),t.target.classList.toggle("selected"),this.setState({stepNumber:e,xIsNext:e%2===0}),this.setState({sqSel:!0}),setTimeout((function(){return r.setState({sqSel:!1})}),500)}},{key:"render",value:function(){var e,t=this,r=this.state.history,a=r[this.state.stepNumber],c=v(a.squares),s=r.map((function(e,r){var a=e.square;if(r)var c=" row: "+(Math.floor(a/3)+1)+" col: "+(a%3+1),s="Goto step #"+r;else s="Goto Start",c="";return Object(n.jsxs)("li",{children:[Object(n.jsx)("button",{onClick:function(e){return t.jumpTo(r,e)},children:s}),c]},r)}));return e=c?"Winner "+c:10===r.length?"X === O":"Next step "+(this.state.xIsNext?"X":"O"),Object(n.jsxs)("div",{className:"game",children:[Object(n.jsx)("h2",{children:"Game X vs O"}),Object(n.jsxs)("div",{className:"game-wrapper",children:[Object(n.jsx)("div",{className:"game-board",children:Object(n.jsx)(O,{squares:a.squares,onClick:function(e){return t.handleClick(e)},sqSel:this.state.sqSel,sq:a.square})}),Object(n.jsxs)("div",{className:"game-info",children:[Object(n.jsx)("div",{children:e}),Object(n.jsx)("ol",{children:s})]})]})]})}}]),r}(c.a.Component),g=r(41),y=r.n(g),_=function(e){return Object(n.jsx)("nav",{className:"navbar",children:e.navElements})},w=r(9),k=r(23),E=r(2),N="GET-TITLE",S="CHOOSE-LANG",I=function(e){return{type:N,path:e}},C={langs:{ru:0,en:1},currentLang:0,title:"",navBar:[{link:"/",title:["\u041d\u0430\u0447\u0430\u043b\u043e","Start"]},{link:"/settings",title:["\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","Settings"]},{link:"/commodity",title:["\u0422\u043e\u0432\u0430\u0440\u044b","Products"]},{link:"/documents",title:["\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b","Documents"]},{link:"/muzik",title:["\u041c\u0443\u0437\u044b\u043a\u0430","Music"]},{link:"/game",title:["\u0418\u0433\u0440\u0430\u0442\u044c","Game"]},{link:"/table",title:["\u042d\u043a\u0441\u043f\u043e\u0440\u0442 Excel","Export Excel"]}]},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:var r,n=e.navBar.find((function(e){return e.link===t.path}));return void 0!==n&&(r=n.title[e.currentLang]),Object(E.a)(Object(E.a)({},e),{},{title:r});case S:return Object(E.a)(Object(E.a)({},e),{},{currentLang:e.langs[t.lng]});default:return e}},L=Object(w.b)((function(e,t){var r=t.to,n=t.exact;return{activeClassName:t.activeClassName,to:r,exact:n}}),(function(e,t){var r=t.to;return{onClick:function(){e(I(r))}}}))(k.b);function F(e){var t=e.navigation.currentLang;return e.navigation.navBar.map((function(e,r){var a;return a="/"===e.link,Object(n.jsx)("div",{className:y.a.item,children:Object(n.jsx)(L,{exact:a,to:e.link,activeClassName:y.a.active,children:e.title[t]})},r)}))}var D=Object(w.b)((function(e){return{navElements:F(e)}}))(_),A=r(28),P=r.n(A),K=function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:P.a.item,children:e.title}),Object(n.jsxs)("div",{className:P.a.container,children:[Object(n.jsx)("div",{className:P.a.textdiv,children:Object(n.jsx)("textarea",{className:P.a.text,rows:15,value:e.textHTML,onChange:e.onChangeText,children:e.textHTML})}),Object(n.jsx)("div",{className:P.a.result,id:"div",dangerouslySetInnerHTML:{__html:e.textHTML}})]})]})},U="SET-TEXT",R={textHTML:"text HTML..."},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object.assign({},e,{textHTML:t.text});default:return e}},q=Object(w.b)((function(e){return{title:e.navigation._title,textHTML:e.muzik.textHTML}}),(function(e){return{onChangeText:function(t){var r=t.target.value;e({type:U,text:r})}}}))(K),M=(r(87),r.p+"static/media/terminal-5.6357e026.png"),G=function(e){var t=Object(a.useState)("_"),r=Object(p.a)(t,2),c=r[0],s=r[1];return Object(a.useEffect)((function(){var t=e.limit,r=0,n=setInterval((function(){++r>t&&(r=0,s("_")),s((function(e){return e+"_"}))}),e.delay);return function(){return clearInterval(n)}}),[e.delay,e.limit]),Object(n.jsx)("div",{children:Object(n.jsxs)("h5",{children:[e.text,c]})})},V=function(e){var t=Object(a.useState)(!1),r=Object(p.a)(t,2),c=r[0],s=r[1],o=Object(a.useState)(null),i=Object(p.a)(o,2),d=i[0],b=i[1],j=Object(a.useState)(!1),f=Object(p.a)(j,2),m=f[0],h=f[1],O=Object(a.useState)(!1),v=Object(p.a)(O,2),x=v[0],g=v[1];function y(){return(y=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),t.next=3,e.syncProducts();case 3:h(!1);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(a.useEffect)((function(){e.isInit&&(s(!0),setTimeout((function(){s(!1);var t=new Date(+e.lastUpdate);b(t.toString())}),2e3))}),[e.isInit,e.lastUpdate]),Object(a.useEffect)((function(){g(e.testNeedUpdate(e.lastUpdate))}),[e]);var _=x&&{color:"red"}||{color:"blue"};return Object(n.jsxs)("header",{children:[!e.isInit&&Object(n.jsx)("h4",{children:"Initializing App..."}),c&&Object(n.jsx)("h4",{children:"App Is Init!"}),m&&Object(n.jsx)(G,{limit:20,delay:500,text:"updated"}),!c&&!m&&Object(n.jsx)("div",{style:{cursor:"pointer"},onClick:function(){return y.apply(this,arguments)},children:Object(n.jsxs)("h5",{style:_,children:["\u0421\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043e - ",d]})}),Object(n.jsx)("img",{src:M,alt:"Logo"}),Object(n.jsx)("h2",{children:e.title}),Object(n.jsxs)("div",{onClick:function(t){var r;"lng"===t.target.name&&(r=t.target.value,e.chooseLang(r),e.getTitle(e.path))},children:[Object(n.jsx)("input",{name:"lng",type:"radio",value:"ru",checked:!e.currentLang,onChange:function(t){return t.target.checked=!e.currentLang}}),"RU",Object(n.jsx)("input",{name:"lng",type:"radio",value:"en",checked:e.currentLang,onChange:function(t){return t.target.checked=e.currentLang}}),"EN"]})]})},H=Object(w.b)((function(e){return{navBar:e.navigation.navBar,title:e.navigation.title,className:undefined,currentLang:e.navigation.currentLang,isInit:e.app.isInit,lastUpdate:e.app.lastUpdate}}),{getTitle:function(e){return function(t){t(I(e))}},chooseLang:function(e){return function(t){t(function(e){return{type:S,lng:e}}(e))}}})(Object(d.e)((function(e){var t="/"+e.location.pathname.split("/")[1],r=e.getTitle;return Object(a.useEffect)((function(){r(t)}),[t,r]),Object(n.jsx)(V,Object(E.a)(Object(E.a)({},e),{},{path:t}))}))),z=r(19),J=r.n(z),Y=r(29),W=r.n(Y),X=r(61);function Z(e,t){var r=Q(e.pid,t);try{return void 0===r?e:(r.childs.push(e),r.childs.sort((function(e,t){return e.label>t.label?1:e.label<t.label?-1:0})),!1)}catch(n){console.error(n.message)}}function Q(e,t){null===e&&(e=0);var r=t.childs.find((function(t){return t.id===e}));if(void 0===r){var n,a=Object(X.a)(t.childs);try{for(a.s();!(n=a.n()).done;){var c=n.value;if(r=Q(e,c))break}}catch(s){a.e(s)}finally{a.f()}}return r}var $=function e(t,r){var n=[];return t.forEach((function(e){var t=Z(function(e){var t=Object(E.a)({},e);return t.childs=[],t}(e),r);t&&n.push(t)})),n.length&&e(n,r),n=[],r},ee=function(e){var t,r=e.hidden?["fas fa-folder","closed"]:["fas fa-folder-open","open"],a=Object(p.a)(r,2),c=a[0],s=a[1];return e.children.length&&(t=Object(n.jsx)("ul",{hidden:e.hidden,children:e.children})),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("li",{id:e.id,className:s,children:[Object(n.jsx)("i",{className:c}),Object(n.jsx)("span",{children:e.label}),t]})})},te=function(e){var t={id:0,label:e.price,childs:[]},r={id:"Tree",label:e.treeLabel,childs:[t]};$(e.data,r);var a=function e(t){var r,a,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;c+=1;var s=[];return(null===(r=t.childs)||void 0===r?void 0:r.length)&&(s=t.childs.map((function(t){return e(t,c)}))),a=c>1?"hidden":null,Object(n.jsx)(ee,{id:t.id,label:t.label,children:s,hidden:a},t.id)}(t);return Object(n.jsxs)("div",{id:r.id,className:W.a.tree,onClick:function(t){var r;if(("SPAN"===t.target.tagName||"I"===t.target.tagName||"LI"===t.target.tagName)&&(document.getElementById("Tree").querySelectorAll("span").forEach((function(e){e.className===W.a.selected&&(e.className=null)})),"SPAN"===t.target.tagName?(t.target.className=W.a.selected,r=t.target.closest("li")):"LI"===t.target.tagName?(t.target.querySelector("span").className=W.a.selected,r=t.target):(t.target.nextSibling.className=W.a.selected,r=t.target.closest("li")),r)){if("0"!==r.id){var n=r.querySelector("ul");n&&(n.hidden=!n.hidden,n.hidden?(r.className="closed",r.firstElementChild.className="fas fa-folder"):(r.className="open",r.firstElementChild.className="fas fa-folder-open"))}e.callback&&e.callback(r.id)}},children:[Object(n.jsx)("h3",{children:r.label}),Object(n.jsx)("ul",{children:a})]})},re=r.p+"static/media/placeholder.e2f04097.svg",ne=function(e){return Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:re,alt:""})})},ae=function(e){var t,r=e.commodities;function a(e){return c.apply(this,arguments)}function c(){return(c=Object(l.a)(u.a.mark((function t(r){var n,a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("SPAN"!==r.target.tagName){t.next=13;break}if(a=r.target.closest("li"),!window.confirm("".concat(a.innerText,"\n\rYou'r realy wanted delete this product?"))){t.next=9;break}return t.next=5,e.deleteProduct(a.id,e.pid);case 5:c=t.sent,alert("Product id: ".concat(c,"\n\rDELETED!")),t.next=10;break;case 9:alert("NOT DELETED!");case 10:return t.abrupt("return");case 13:n=r.target.id;case 14:e.getProductId(n);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return e.error?e.error.message:e.comIsLoaded?(t=r.sort((function(e){return e.name})).map((function(e){return Object(n.jsxs)("li",{id:e.uuid,className:J.a.clickable,onClick:a,"data-price":e.price,"data-code":e.code,children:[e.label," | ",e.price?e.price.toFixed(2):"0.00",Object(n.jsx)("span",{className:J.a.del})]},e.uuid)})),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("ul",{children:t})})):Object(n.jsx)(ne,{})},ce=r(34),se=r.n(ce),oe=function(e){return Object(a.useLayoutEffect)((function(){document.body.style.overflow="hidden",setTimeout((function(){return document.getElementById(se.a.container).style.top=0}),0)}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{id:se.a["cover-div"]}),Object(n.jsx)("div",{className:se.a.container,id:se.a.container,children:e.form})]})},ie=r(16),ue=r(27),le=r(6),de=r.n(le),pe=r(38),be=function(){var e=Object(l.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.floor(1e5*Math.random()),r=t+1,e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function je(e){for(var t=65,r=75,n=[[t,t,t,t,t,t],[t,t,r,t,r,r],[t,t,r,r,t,r],[t,t,r,r,r,t],[t,r,t,t,r,r],[t,r,r,t,t,r],[t,r,r,r,t,t],[t,r,t,r,t,r],[t,r,t,r,r,t],[t,r,r,t,r,t]],a=e.split("")[0],c=Number(a),s=1;s<=6;s++)a+=String.fromCharCode(Number(e.substr(s,1))+n[c][s-1]);a+=String.fromCharCode(42);for(var o=7;o<=12;o++)a+=String.fromCharCode(Number(e.substr(o,1))+97);return a+=String.fromCharCode(43)}function fe(e){if(![7,8,12,13].includes(e.length))return"Not valid Length barcode: ".concat(e.length);var t=0;if(e.split("").forEach((function(e,r){r%2!==0?(t+=3*Number(e),t%=10):(t+=Number(e),t%=10)})),0!==t){var r="";if(13===e.length||8===e.length)r+="Not valid control digit: "+e.slice(-1)+"\r\n",r+=fe(e.slice(0,-1));else if(12===e.length||7===e.length){r+="Need add control digit: "+(10-t)}else r+="Not valid Length barcode: "+e.length;return r}return t}var me=function(e){return Object(n.jsxs)("label",{children:["Measure Name",Object(n.jsx)("select",{name:"measure_name",id:e.id,value:e.measure_name,onChange:e.handleChange,disabled:e.disabled,children:pe.measure_names.map((function(e,t){return Object(n.jsx)("option",{value:e,children:e},t)}))})]})},he=function(e){return Object(n.jsxs)("label",{children:["Type",Object(n.jsx)("select",{name:"type",id:e.id,value:e.type,onChange:e.handleChange,disabled:e.disabled,children:pe.types.map((function(e,t){return Object(n.jsx)("option",{value:e.type,children:e.description},t)}))})]})},Oe=function(e){return Object(n.jsxs)("label",{children:["Tax",Object(n.jsx)("select",{name:"tax",id:e.id,value:e.tax,onChange:e.handleChange,disabled:e.disabled,children:pe.taxes.map((function(e,t){return Object(n.jsx)("option",{value:e.tax,children:e.description},t)}))})]})},ve=function(e){var t=e.groups.find((function(t){return t.id===e.parent_id})),r=t?t.label:"Root",a=e.disabled?null:e.onClick;return Object(n.jsxs)(n.Fragment,{children:[e.treeView&&Object(n.jsxs)("div",{className:e.classTree,onClick:e.closeTree,children:[Object(n.jsx)(te,{data:e.groups,price:"Price",treeLabel:"Groups",callback:e.callbackTree}),Object(n.jsx)("i",{className:"fas fa-angle-down"})]}),Object(n.jsx)("div",{className:e.classDiv,onClick:a,tabIndex:-1,onBlur:e.onBlurGroup,children:Object(n.jsxs)("div",{name:"parent_id",children:[r,Object(n.jsx)("i",{className:"fa fa-angle-down"})]})})]})},xe=function(e){var t=function(t){var r;e.allow_edit&&("SPAN"===t.target.tagName&&(r=t.target.closest("li")),r&&e.deleteFromArray(r.id,"barcodes"))};return Object(n.jsxs)("fieldset",{name:"img_barcodes",children:[Object(n.jsx)("legend",{children:"Barcodes"}),Object(n.jsxs)("div",{className:e.view_barcode,children:[Object(n.jsx)("ul",{children:e.barcodes.map((function(r){return Object(n.jsxs)("li",{id:r,onClick:t,children:[je(r),Object(n.jsx)("span",{className:e.delBc})]},r)}))}),Object(n.jsx)("input",{name:"barcodes",type:"text",defaultValue:e.bc,onChange:e.handleChange,onBlur:e.handleBlur,disabled:e.disabled}),Object(n.jsx)("span",{className:e.addBc})]})]})},ge=function(e){return Object(n.jsxs)("div",{className:e.divPicture,onClick:e.pictureClick,children:[Object(n.jsx)("img",{id:e.photo.name,className:e.className,src:URL.createObjectURL(e.photo),alt:"no",tabIndex:"-1"}),Object(n.jsx)("span",{})]})},ye=r(62),_e=r.n(ye);var we=function(e){var t,r;return e.placeholder?(t=e.placeholder,r=_e.a.wrong):(t="add new ...",r=""),Object(n.jsx)("textarea",{name:e.name,onChange:e.onChange,onBlur:e.onBlur,onKeyDown:e.onKeyDown,ref:e.refrence,wrap:"hard",value:e.value,placeholder:t,className:r,disabled:e.disabled,autoFocus:!0})},ke=function(e){var t=e.photo;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("img",{className:de.a["big-img"],src:t,alt:"no",tabIndex:"-1",style:{display:"inline-block",height:"60vh",position:"fixed",top:"10vh",left:"30vw",verticalAlign:"middle"}}),Object(n.jsx)("span",{})]})},Ee=function(e){var t=e.pid,r=!e.formData.id,s=c.a.createRef(),o=Object(a.useState)(Object(E.a)(Object(E.a)({},e.formData),{},{allow_edit:r,parent_id:t,photos:Object(ue.a)(e.formData.photos),barcodes:Object(ue.a)(e.formData.barcodes),isNewData:r,bigImg:null,currentBarcode:""})),i=Object(p.a)(o,2),u=i[0],l=i[1];if(Object(a.useEffect)((function(){return function(){u.photos.length&&u.photos.forEach((function(e){return URL.revokeObjectURL(e)}))}})),u.code||be().then((function(e){return l(Object(E.a)(Object(E.a)({},u),{},{code:e}))})),e.formError){var d=e.formError;alert(d.message),e.setFormError(null)}var b,j=!r&&!u.allow_edit,f=function(e){return isFinite(e)?Number(e).toFixed(2):"0.00"},m=function(e){var t=e.target,r=t.name,n=t.value;if(t.classList.remove(de.a.required),"barcodes"===r)return u.barcodes.includes(n)?void alert("Barcode ".concat(n," is exist in this product!")):void l(Object(E.a)(Object(E.a)({},u),{},{currentBarcode:n}));if("picture"===r){var a=u.photos;return Array.from(s.current.files).forEach((function(e){a.push(e)})),void l(Object(E.a)(Object(E.a)({},u),{},{photos:a}))}if("allow_edit"===r){var c=document.getElementById(de.a["form-product"]);Object.values(c.elements).forEach((function(e){e.disabled&&e.id!==de.a.uuid&&e.removeAttribute("disabled")})),l(Object(E.a)(Object(E.a)({},u),{},{allow_edit:!0})),c.allow_edit.parentNode.remove()}else l(Object(E.a)(Object(E.a)({},u),{},Object(ie.a)({},r,n)))},h=function(e){var t=e.target.name||e.currentTarget.name,r=e.target.value||e.currentTarget.value;if("barcodes"===t){var n;if(!r){var a=window.prompt("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0435\u0444\u0438\u043a\u0441!\r\n\n          \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 4 \u0446\u0438\u0444\u0440\u044b \u0418\u041d\u041d.\r\n\n          \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e -> '0000'","7321");if(n=function(e){var t="20".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0000")+"0".repeat(6-e.toString().length)+e.toString(),r=0;return t.split("").forEach((function(e,t){r+=t%2!==0?3*Number(e):Number(e)})),r=(10-r%10)%10,t.concat(r)}(u.code,a),u.barcodes.includes(n))return void console.warn("Barcode ".concat(n," is Exist!"))}var c=fe(r||n);if(0!==c)return void window.alert(c);var s=[].concat(Object(ue.a)(u.barcodes),[u.currentBarcode||n]);return l(Object(E.a)(Object(E.a)({},u),{},{barcodes:s})),void(e.target.value="")}"price"!==t&&"cost_price"!==t||(r=isFinite(r)?Number(r):0),l(Object(E.a)(Object(E.a)({},u),{},Object(ie.a)({},t,r))),e.target.value=f(r)},O=function(t){if(t.preventDefault(),t.stopPropagation(),u.allow_edit&&function(){var t=[];for(var r in e.formData)"photos"===r||"barcodes"===r?u[r].length!==e.formData[r].length&&t.push(Object(ie.a)({},r,u[r])):u[r]!==e.formData[r]&&t.push(Object(ie.a)({},r,u[r]));return 1===t.length&&t[0].code&&(t=[]),t.length}()&&window.confirm("Save changes")){var r=Object(E.a)({},u);"0"!==r.parent_id&&0!==r.parent_id||delete r.parent_id,delete r.createdAt,delete r.updatedAt,delete r.allow_edit,delete r.bigImg,delete r.currentBarcode,delete r.treeView;var n=function(e){var t=["type","name","price","measure_name","tax","allow_to_sell"],r=[];return Object.keys(e).forEach((function(n){!e[n]&&t.includes(n)&&r.push(n)})),r}(r);if(n.length){var a="";return n.forEach((function(e){a+=" ".concat(e,","),document.getElementsByName(e).forEach((function(e){e.classList.add(de.a.required)}))})),a.slice(-1),void alert("\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435:\n\r".concat(a,"!"))}!function(e,t){for(var r in e)(null===e[r]||void 0===e[r])&&delete e[r]}(r,e.formData),u.isNewData||(r.id=u.id),delete r.isNewData;var c=0;if(Object.keys(r).forEach((function(e){return c++})),c<=1)return void alert("\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0438\u0441\u044c!");var s=u.isNewData?"post":"put";e.postFormData("product",s,r),e.toggleFormPost(!0)}else e.setFormData(),e.setViewForm(!1);document.body.style.overflow="auto"},v=function(e,t){var r=u[t].findIndex((function(t){return t===e})),n=u[t];n.splice(r,1),l(Object(E.a)(Object(E.a)({},u),{},Object(ie.a)({},t,n)))},x=Object(a.useState)(t),g=Object(p.a)(x,2),y=g[0],_=g[1],w=Object(a.useState)(!1),k=Object(p.a)(w,2),N=k[0],S=k[1],I={groups:e.groups,disabled:j,parent_id:y,onClick:function(){S(!N)},onBlurGroup:function(){l(Object(E.a)(Object(E.a)({},u),{},{parent_id:y}))},treeView:N,classDiv:de.a["g-tree"],classTree:de.a.tree,callbackTree:function(e){_(e||0)},closeTree:function(e){"I"===e.target.tagName&&(l(Object(E.a)(Object(E.a)({},u),{},{parent_id:y})),S(!1))}},C={disabled:j,handleChange:m,id:de.a.measure_name,measure_name:u.measure_name},T={disabled:j,handleChange:m,id:de.a.type,type:u.type},L={disabled:j,handleChange:m,id:de.a.tax,tax:u.tax},F={barcodes:u.barcodes,bc:u.currentBarcode,addBc:de.a["add-bc"],delBc:de.a["del-bc"],handleChange:m,handleBlur:h,deleteFromArray:v,allow_edit:u.allow_edit,disabled:j,view_barcode:de.a["view-barcode"]},D={id:de.a.picture,className:de.a["picture-small"],divPicture:de.a["div-picture"],pictureClick:function(e){var t=e.target;if("SPAN"!==t.tagName)t.addEventListener("blur",(function(){l(Object(E.a)(Object(E.a)({},u),{},{bigImg:null})),t.removeEventListener("blur",undefined)})),l(Object(E.a)(Object(E.a)({},u),{},{bigImg:t.src}));else{if(!u.allow_edit)return;var r=t.previousElementSibling;v(r.id,"photos")}}};return e.formPost?Object(n.jsx)(ne,{}):Object(n.jsxs)(n.Fragment,{children:[u.bigImg&&Object(n.jsx)(oe,{form:Object(n.jsx)(ke,{photo:u.bigImg})}),Object(n.jsxs)("form",{id:de.a["form-product"],onSubmit:O,children:[Object(n.jsx)("div",{className:de.a["menu-buttons"],children:Object(n.jsx)("span",{className:"fa fa-window-close",onClick:O})}),Object(n.jsxs)("fieldset",{name:"Product",children:[Object(n.jsx)("legend",{children:"Product Info"}),Object(n.jsxs)("div",{children:[Object(n.jsx)("b",{children:"ID: "}),Object(n.jsx)("input",{id:de.a.uuid,value:u.id||"",disabled:!r,onChange:m}),u.isNewData?null:Object(n.jsxs)("label",{children:["Allow Edit:",Object(n.jsx)("input",{type:"checkbox",id:de.a["allow-edit"],name:"allow_edit",checked:u.allow_edit,onChange:m})]})]}),Object(n.jsx)("div",{children:(null===(b=u.photos)||void 0===b?void 0:b.length)?u.photos.map((function(e){return Object(a.createElement)(ge,Object(E.a)(Object(E.a)({},D),{},{photo:e,key:e.name}))})):Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:M,alt:"NoPhotos",className:de.a["picture-small"]})})}),u.photo||!u.allow_edit?null:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("input",{type:"file",name:"picture",id:"picInput",multiple:!0,onChange:m,ref:s,style:{display:"none"}}),Object(n.jsx)("label",{htmlFor:"picture",onClick:function(e){e.preventDefault(),document.getElementById("picInput").click()},children:"Input Image"})]}),Object(n.jsx)(xe,Object(E.a)({},F)),Object(n.jsxs)("div",{className:de.a.code_article,children:[Object(n.jsx)("label",{children:"Code:"}),Object(n.jsx)("input",{type:"text",name:"code",value:u.code,onChange:m,disabled:j}),Object(n.jsx)("label",{children:"Aticle:"}),Object(n.jsx)("input",{type:"text",name:"article_number",value:u.article_number||"",onChange:m,disabled:j})]}),Object(n.jsxs)("div",{className:de.a.propertyes,children:[Object(n.jsx)(me,Object(E.a)({},C)),Object(n.jsx)(he,Object(E.a)({},T)),Object(n.jsx)(Oe,Object(E.a)({},L))]}),Object(n.jsx)(ve,Object(E.a)({},I)),Object(n.jsxs)("label",{children:["Name:",Object(n.jsx)(we,{name:"name",value:u.name,placeholder:"Input name ...",onChange:m,disabled:j})]}),Object(n.jsxs)("label",{children:["Description:",Object(n.jsx)("input",{type:"text",name:"description",value:u.description||"",onChange:m,disabled:j})]}),Object(n.jsxs)("div",{className:de.a.prices,children:[Object(n.jsx)("label",{htmlFor:"price",children:"Price:"}),Object(n.jsx)("input",{name:"price",defaultValue:f(u.price),className:de.a.price,onBlur:h,onChange:m,disabled:j}),Object(n.jsx)("span",{}),Object(n.jsx)("label",{htmlFor:"cost_price",children:"Cost Price:"}),Object(n.jsx)("input",{name:"cost_price",defaultValue:f(u.cost_price),className:de.a.price,onBlur:h,disabled:j}),Object(n.jsx)("span",{}),Object(n.jsx)("label",{children:"Allow to sell:"}),Object(n.jsx)("input",{type:"checkbox",name:"allow_to_sell",defaultChecked:u.allow_to_sell,disabled:j})]})]}),Object(n.jsxs)("div",{className:de.a.buttons,children:[Object(n.jsx)("input",{type:"submit",value:"Ready"}),Object(n.jsx)("button",{id:de.a.cansel,onClick:function(t){e.setViewForm(!1),e.setFormData(null),document.body.style.overflow="auto"},children:"Cansel"})]})]})]})},Ne=r(46);function Se(){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ne.b)("Evo",3,{upgrade:function(e,t,r){return Object(l.a)(u.a.mark((function n(){var a,c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t<r&&(alert("\u0411\u0430\u0437\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0431\u0443\u0434\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430 \u0434\u043e \u0432\u0435\u0440\u0441\u0438\u0438: "+r),console.log("New version: ".concat(r))),e.objectStoreNames.contains("groups")||((a=e.createObjectStore("groups",{keyPath:"id"})).createIndex("name","name"),a.createIndex("date","created_at")),e.objectStoreNames.contains("products")||((c=e.createObjectStore("products",{keyPath:"id"})).createIndex("name","name"),c.createIndex("date","created_at"),c.createIndex("parent_id","parent_id"),c.createIndex("code","code"),c.createIndex("price","price"));case 3:case"end":return n.stop()}}),n)})))()}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ce=function(e){return Object(l.a)(u.a.mark((function t(){var r,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Se();case 2:if(r=t.sent,"all"!==e){t.next=9;break}return t.next=6,r.getAll("groups");case 6:n=t.sent,t.next=12;break;case 9:return t.next=11,r.get("groups",e);case 11:n=t.sent;case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t)})))()},Te=function(e){return Object(l.a)(u.a.mark((function t(){var r,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Se();case 2:if(r=t.sent,"all"!==e&&e){t.next=9;break}return t.next=6,r.getAll("products");case 6:n=t.sent,t.next=12;break;case 9:return t.next=11,r.get("products",e);case 11:n=t.sent;case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t)})))()},Le=function(e){return Object(l.a)(u.a.mark((function t(){var r,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Se();case 2:return r=t.sent,t.next=5,r.getAllFromIndex("products","parent_id",e);case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))()},Fe=function(e,t){return Object(l.a)(u.a.mark((function r(){var n,a,c,s;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=[],t.forEach((function(e){n.push(e)})),r.next=4,Se();case 4:return a=r.sent,c=a.transaction(e,"readwrite"),(s=n.map((function(e){return c.store.put(e)}))).push(c.done),r.next=10,Promise.all(s);case 10:case"end":return r.stop()}}),r)})))()},De=function(e){return Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ne.a)(e);case 2:case"end":return t.stop()}}),t)})))()},Ae=function(e,t){return Object(l.a)(u.a.mark((function r(){var n;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Se();case 2:return n=r.sent,r.next=5,n.put(e,t);case 5:return r.abrupt("return",t);case 6:case"end":return r.stop()}}),r)})))()},Pe=function(e,t){return Object(l.a)(u.a.mark((function r(){var n;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Se();case 2:return n=r.sent,r.next=5,n.delete(e,t);case 5:return r.abrupt("return",t);case 6:case"end":return r.stop()}}),r)})))()};var Ke=function(e){e.isInit||e.history.push("/settings");var t=Object(a.useState)("Commodities"),r=Object(p.a)(t,2),c=r[0],s=r[1];function o(){return(o=Object(l.a)(u.a.mark((function t(r){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430"),n=new RegExp(r.target.value,"gi"),t.next=4,Te();case 4:a=t.sent.filter((function(e){return e.name.match(n)})),e.setCommodities(a);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){if(e.groups.length){if(function(e){document.getElementById("Tree").querySelectorAll("span").forEach((function(e){e.className=""}));var t=document.getElementById(e);if(t.querySelector("span").className=J.a.selected,"0"!==e){var r=t.closest("ul");r.hidden&&(r.hidden=!r.hidden);for(var n=r.closest("li");"0"!==n.id;)n.classList="open",n.closest("ul").hidden=!1,n=n.closest("ul").closest("li")}}(e.pid),"0"!==e.pid)var t=e.groups.find((function(t){return t.id===e.pid})).label;else t="Commodities";s(t)}}),[e.groups,e.pid]),!e.isLoaded&&e.isInit&&(e.setPid("0"),e.getGroups()),!e.comIsLoaded&&e.isInit&&e.getProducts(e.pid),e.error&&(alert("".concat(e.error.name,"\n\r").concat(e.error.message)),e.setError(null)),e.error?Object(n.jsxs)("div",{children:["\u041e\u0448\u0438\u0431\u043a\u0430...",e.error.message]}):e.isLoaded?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:J.a.head,children:[Object(n.jsx)("div",{className:J.a.buttons,children:Object(n.jsx)("button",{onClick:function(){e.getProductId()},children:"+\u0422\u043e\u0432\u0430\u0440"})}),Object(n.jsx)("div",{className:J.a.search,onClick:function(t){if("I"===t.target.tagName){if(t.target.closest("div").querySelector("input").value="",e.getProducts(e.pid),"0"!==e.pid)var r=e.groups.find((function(t){return t.id===e.pid})).label;else r="Commodities";s(r)}},children:Object(n.jsxs)("label",{children:["\u041f\u043e\u0438\u0441\u043a \u0442\u043e\u0432\u0430\u0440\u0430",Object(n.jsx)("input",{type:"text",onChange:function(e){return o.apply(this,arguments)}}),Object(n.jsx)("i",{className:"fa fa-times"})]})})]}),e.viewForm?Object(n.jsx)(oe,{form:Object(n.jsx)(Ee,{groups:e.groups,formData:e.formData,formPost:e.formPost,formError:e.formError,setViewForm:e.setViewForm,setFormData:e.setFormData,toggleFormPost:e.toggleFormPost,postFormData:e.postFormData,setFormError:e.setFormError,pid:e.pid})}):null,Object(n.jsxs)("div",{className:J.a.container,children:[Object(n.jsx)(te,{data:e.groups,price:"Price",treeLabel:"Groups",callback:function(t){e.pid!==t&&e.setPid(t)},pId:e.pid}),Object(n.jsxs)("div",{className:J.a.list,children:[Object(n.jsx)("h3",{children:c}),Object(n.jsx)(ae,{commodities:e.commodities,comIsLoaded:e.comIsLoaded,error:e.error,getProductId:e.getProductId,deleteProduct:e.deleteProduct,pid:e.pid})]})]})]}):Object(n.jsx)(ne,{})},Ue=r(10);function Re(){return(Re=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ue.headers["X-Authorization"]=localStorage.appKey,t.storeUuid=localStorage.storeKey,Ue.params=t.cursor?{cursor:t.cursor}:null,r=Be(t),e.abrupt("return",Object(E.a)(Object(E.a)({},r),{},{action:t.type}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e){var t,r,n,a;switch(e.type){case"store_v2":return t="stores",Object(E.a)(Object(E.a)({},Ue),{},{method:"GET",url:t});case"bulks_v1":return t=e.value?"bulks/"+e.value:"bulks",Object(E.a)(Object(E.a)({},Ue),{},{method:"GET",url:t});case"products_v2":return r="GET",t="stores/"+e.storeUuid+"/products",e.value&&(t+="/"+e.value,e.value=""),Object(E.a)(Object(E.a)({},Ue),{},{method:r,url:t});case"groups_v2":return r="GET",e.value?(t="stores/"+e.storeUuid+"/product-groups/"+e.value,e.value=""):t="stores/"+e.storeUuid+"/product-groups",Object(E.a)(Object(E.a)({},Ue),{},{method:r,url:t});case"documents_v2":if(r="GET",e.value)t="stores/"+e.storeUuid+"/documents/"+e.value;else if(t="stores/"+e.storeUuid+"/documents",!Ue.cursor){if(e.period){var c=e.period.dateStart,s=e.period.dateEnd,o=s?"&until=".concat(s):null;t+="?since=".concat(c).concat(o)}else{var i=new Date;i.setMonth(i.getMonth()-1),t+="?since=".concat(i.getTime())}t+="&type=".concat(e.docType)}return Object(E.a)(Object(E.a)({},Ue),{},{method:r,url:t});case"put_product_v2":return r="PUT",t="stores/"+e.storeUuid+"/products/"+e.body.id,n=JSON.stringify(e.body),Object(E.a)(Object(E.a)({},Ue),{},{method:r,url:t,body:n});case"post_product_v2":return r="POST",t="stores/"+e.storeUuid+"/products",n=JSON.stringify(e.body),Object(E.a)(Object(E.a)({},Ue),{},{method:r,url:t,body:n});case"delete_product_v2":return r="DELETE",t="stores/"+e.storeUuid+"/products/"+e.id,Object(E.a)(Object(E.a)({},Ue),{},{method:r,url:t});case"put_array_products_v2":return e.body&&e.body.length?(r="PUT",a=Object(E.a)(Object(E.a)({},Ue.headers),{},{"Content-Type":"application/vnd.evotor.v2+bulk+json"}),t="stores/"+e.storeUuid+"/products",n=JSON.stringify(e.body),Object(E.a)(Object(E.a)({},Ue),{},{method:r,headers:a,url:t,body:n})):{};case"put_array_groups_v2":return r="PUT",a=Object(E.a)(Object(E.a)({},Ue.headers),{},{"Content-Type":"application/vnd.evotor.v2+bulk+json"}),t="stores/"+e.storeUuid+"/product-groups",n=JSON.stringify(e.body),Object(E.a)(Object(E.a)({},Ue),{},{method:r,headers:a,url:t,body:n})}}var qe=function(e){return Re.apply(this,arguments)},Me=r(63),Ge=r.n(Me);function Ve(e){return He.apply(this,arguments)}function He(){return(He=Object(l.a)(u.a.mark((function e(t){var r,n,a,c,s,o,i,l,d,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.baseURL,n=t.url,a=t.headers,c=t.method,s=t.body,o=t.params,t.action,e.prev=1,i={baseURL:r,url:n,headers:a,method:c,params:o},s&&(i.data=s),e.next=6,Ge()(i);case 6:if(l=e.sent,"DELETE"!==c){e.next=11;break}d=l,e.next=14;break;case 11:return e.next=13,l.data;case 13:d=e.sent;case 14:if(!d.paging||!d.paging.next_cursor){e.next=20;break}return i.params={cursor:d.paging.next_cursor},e.next=18,Ve(i);case 18:p=e.sent,d.items=d.items.concat(p.items);case 20:return d.paging={},e.abrupt("return",d);case 24:return e.prev=24,e.t0=e.catch(1),e.abrupt("return",e.t0);case 27:case"end":return e.stop()}}),e,null,[[1,24]])})))).apply(this,arguments)}var ze=Ve,Je=function(){return Object(l.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe({type:"store_v2"});case 2:return t=e.sent,e.next=5,ze(t);case 5:return r=e.sent,e.abrupt("return",r.items);case 7:case"end":return e.stop()}}),e)})))()},Ye=function(){return Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe({type:"groups_v2"});case 2:return t=e.sent,e.next=5,ze(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))()},We=function(){return Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe({type:"products_v2"});case 2:return t=e.sent,e.next=5,ze(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))()},Xe=function(e,t){return Object(l.a)(u.a.mark((function r(){var n;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,qe({type:"post_".concat(e,"_v2"),body:t});case 2:return n=r.sent,r.next=5,ze(n);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),r)})))()},Ze=function(e,t){return Object(l.a)(u.a.mark((function r(){var n;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,qe({type:"put_".concat(e,"_v2"),body:t});case 2:return n=r.sent,r.next=5,ze(n);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),r)})))()},Qe=function(e,t){return Object(l.a)(u.a.mark((function r(){var n;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,qe({type:"delete_".concat(e,"_v2"),id:t});case 2:return n=r.sent,r.next=5,ze(n);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),r)})))()},$e=function(e){var t=arguments;return Object(l.a)(u.a.mark((function r(){var n,a,c;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:null,a=t.length>2&&void 0!==t[2]?t[2]:null,r.next=4,qe({type:"documents_v2",docType:e,period:n,value:a});case 4:return c=r.sent,r.next=7,ze(c);case 7:return r.abrupt("return",r.sent);case 8:case"end":return r.stop()}}),r)})))()},et=r(37),tt=function(e){Object(f.a)(r,e);var t=Object(m.a)(r);function r(){return Object(b.a)(this,r),t.apply(this,arguments)}return r}(Object(et.a)(Error)),rt=function(e){Object(f.a)(r,e);var t=Object(m.a)(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(b.a)(this,r),(e=t.call(this,"\u041e\u0448\u0438\u0431\u043a\u0430 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445:\n\r ".concat(n[0].message))).name="SequelizeValidationError",e.errors=n,e}return r}(tt),nt=function(e){Object(f.a)(r,e);var t=Object(m.a)(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(b.a)(this,r),(e=t.call(this,"\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u043a\u043b\u044e\u0447\u0430:\n        ".concat(n[0].path,": ").concat(n[0].value,"\n        \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043c\u0435\u0442\u043e\u0434\u0430 PUT"))).name="SequelizeUniqueConstraintError",e.errors=n,e}return r}(tt),at=function(e){Object(f.a)(r,e);var t=Object(m.a)(r);function r(e){var n;Object(b.a)(this,r);var a=e.message;return e.errors.forEach((function(e){a+="\n".concat(e.subject.toUpperCase()," -> ").concat(e.reason)})),(n=t.call(this,"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u043e\u0431\u043b\u0430\u043a\u043e!\n".concat(a))).name="EvoValidationError",n.errors=e.errors,n}return r}(function(e){Object(f.a)(r,e);var t=Object(m.a)(r);function r(){return Object(b.a)(this,r),t.apply(this,arguments)}return r}(Object(et.a)(Error))),ct=function(e){var t=e.response;return"SequelizeValidationError"===t.data.name?new rt(t.data.errors):"SequelizeUniqueConstraintError"===t.data.name?new nt(t.data.errors):"validation_failed"===t.data.name?new at({message:t.data.message,errors:t.data.errors}):new Error(t.data.message)},st="GET-GROUPS",ot="SET-PID",it="GET-COMMODITIES",ut="SET-ERROR",lt="UPDATE-COMMODITY",dt="SET-UPDATED",pt="VIEW-FORM",bt="SET-FORM-DATA",jt="TOGGLE-FORM-POST",ft="SET-FORM-ERROR",mt="SET-FORM-FOTOS",ht=function(e){return{type:ot,pid:e}},Ot=function(e){return{type:it,commodities:e}},vt=function(e){return{type:ut,error:e}},xt=function(e){return{type:ft,error:e}},gt=function(e){return{type:pt,viewForm:e}},yt=function(e){return e=null===e?wt.form.formData:e,{type:bt,formData:e}},_t=function(e){return{type:jt,formPost:e}},wt={groups:[],commodities:[],pid:null,isLoaded:!1,comIsLoaded:!1,error:null,lastUpdate:15851664e5,isUpdated:!1,viewForm:!1,form:{formData:{id:null,name:"",code:"",measure_name:"\u0448\u0442",tax:"NO_VAT",allow_to_sell:!0,description:"",article_number:"",type:"NORMAL",price:0,cost_price:0,quantity:0,photos:[],barcodes:[]},formPost:!1,resMessage:null,formError:null,photos:[]}},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case st:var r=[];return t.groups.forEach((function(e){var t={id:e.id,pid:e.parent_id?e.parent_id:null,label:e.name};r.push(t)})),Object(E.a)(Object(E.a)({},e),{},{groups:[].concat(r),isLoaded:!0});case ot:return Object.assign({},e,{pid:t.pid,comIsLoaded:!1});case it:var n=[];return t.commodities.forEach((function(e){var t={uuid:e.id,code:e.code,label:e.name,price:e.price};n.push(t)})),Object.assign({},e,{commodities:n,comIsLoaded:!0});case ut:return Object.assign({},e,{error:t.error});case ft:return Object(E.a)(Object(E.a)({},e),{},{form:Object(E.a)(Object(E.a)({},e.form),{},{formError:t.error})});case lt:var a=Date.now();return a=e.updateOk?Date.now():e.lastUpdate,Object(E.a)(Object(E.a)({},e),{},{lastUpdate:a});case dt:return Object(E.a)(Object(E.a)({},e),{},{isUpdated:t.update});case pt:return Object(E.a)(Object(E.a)({},e),{},{viewForm:t.viewForm});case jt:return Object(E.a)(Object(E.a)({},e),{},{form:Object(E.a)(Object(E.a)({},e.form),{},{formPost:t.formPost})});case bt:return Object(E.a)(Object(E.a)({},e),{},{form:Object(E.a)(Object(E.a)({},e.form),{},{formData:t.formData})});case mt:return Object(E.a)(Object(E.a)({},e),{},{form:t.photos});default:return e}},Et=Object(w.b)((function(e){var t=e.app.isInit;return{isLoaded:(e=e.commodityPage).isLoaded,groups:e.groups,price:"Price",pid:e.pid,commodities:e.commodities,comIsLoaded:e.comIsLoaded,error:e.error,viewForm:e.viewForm,formData:e.form.formData,formPost:e.form.formPost,formError:e.form.formError,isInit:t}}),{getGroups:function(){return function(e){Ce("all").then((function(t){e({type:st,groups:t})}))}},getProducts:function(e){return function(t){Le(e).then((function(e){return t(Ot(e))}))}},setPid:function(e){return function(t){t(ht(e))}},setViewForm:function(e){return function(t){t(gt(e))}},getProductId:function(e){return e?function(t){Te(e).then((function(e){return t(yt(e)),!0})).then((function(e){e&&t(gt(!0))}))}:function(e){return e(gt(!0))}},deleteProduct:function(e,t){return function(){var r=Object(l.a)(u.a.mark((function r(n){var a;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Qe("product",e);case 3:return a=r.sent,console.log(a.status),r.next=7,Pe("products",e);case 7:return n(ht(t)),r.abrupt("return",e);case 11:r.prev=11,r.t0=r.catch(0),console.dir(r.t0),n(vt(ct(r.t0)));case 15:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()},setFormData:function(e){return function(t){e=e||wt.form.formData,t(yt(e))}},toggleFormPost:function(e){return function(t){return t(_t(e))}},postFormData:function(e,t,r){return function(n){var a,c;switch(e){case"product":a="product";break;case"group":a="group";break;default:a="product"}switch(t){case"post":c=Xe;break;case"put":c=Ze;break;default:c=Xe}c(a,r).then((function(e){return Ae("".concat(a,"s"),e),e})).then((function(e){return e.parent_id})).then((function(e){n(_t(!1)),n(gt(!1)),n(yt(wt.form.formData)),n(ht(e||0))})).catch((function(e){console.dir(e),n(xt(ct(e))),n(_t(!1))}))}},setFormError:function(e){return function(t){return t(xt(e))}},setError:function(e){return function(t){return t(vt(e))}},setCommodities:function(e){return function(t){return t(Ot(e))}}})(Ke),Nt=r(33),St=r.n(Nt),It=function(e){var t;return t=Object(n.jsxs)("div",{children:[e.name,Object(n.jsx)("hr",{}),e.description,Object(n.jsx)("hr",{}),e.article]}),Object(n.jsxs)("article",{className:St.a.article,children:[Object(n.jsx)("h3",{children:e.index}),t]})},Ct=r(114),Tt=function(e){var t=Object(a.useState)([]),r=Object(p.a)(t,2),c=r[0],s=r[1],o=[];return Object(n.jsxs)("div",{className:St.a.page,children:[Object(n.jsx)("input",{type:"file",id:"input",onChange:function(e){return function(e){Object(Ct.a)(e.target.files[0]).then((function(e){e.forEach((function(e,t){if(t){var r=Object(n.jsx)(It,{index:e[3],name:e[1],description:e[8],article:e[9]},e[0]);o.push(r)}}))})).then((function(){s(o)}))}(e)}}),Object(n.jsx)("h1",{children:"LATEST NEWS"}),Object(n.jsx)("div",{className:St.a.archive,children:c})]})},Lt=function(e){var t=e.count;return Object(a.useEffect)((function(){return console.log("render - "+t),function(){console.log("unmount - "+t)}}),[t]),Object(n.jsxs)("div",{children:["example: ",t]})},Ft=function(e){var t=Object(a.useState)(0),r=Object(p.a)(t,2),c=r[0],s=r[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("button",{onClick:function(){s(c+1),c>5&&s(0)},children:c}),c<5&&Object(n.jsx)(Lt,{count:c}),c<5&&Object(n.jsx)(Lt,{count:-1}),c<3&&Object(n.jsx)(G,{limit:10,text:"test",delay:500})]})},Dt=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),r=t[0],c=t[1],s=Object(a.useState)(!1),o=Object(p.a)(s,2),i=o[0],d=o[1];function b(){return(b=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce(t);case 2:r=e.sent,console.log(r),alert(JSON.stringify(r,null,2));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(l.a)(u.a.mark((function e(){var t,r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,Ye();case 3:return t=e.sent,console.log(t),e.next=7,t.items;case 7:return r=e.sent,e.next=10,Fe("groups",r);case 10:return e.next=12,Ce("all");case 12:(n=e.sent).forEach((function(e){e.pid=e.parent_id?e.parent_id:null,e.label=e.name})),c(n),d(!1);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h1",{children:"IDB Test"}),Object(n.jsx)("button",{onClick:function(){return function(){return j.apply(this,arguments)}()},disabled:i,children:"get Groups Evo"}),i&&Object(n.jsx)("p",{children:"Loading..."}),!!r.length&&Object(n.jsx)(te,{data:r,price:"Price",treeLabel:"Groups",callback:function(e){return b.apply(this,arguments)}})]})},At="SET-APP-KEY",Pt="SET-STORE-KEY",Kt="INIT-APP",Ut="SET-STORES",Rt="SET-LAST-UPDATE",Bt=function(e){return{type:At,key:e}},qt=function(e){return{type:Pt,key:e}},Mt=function(e){return{type:Rt,dateUpdate:e}},Gt={appKey:null,storeKey:null,isInit:!1,stores:[],lastUpdate:null},Vt=function(e){return function(t){return t(Bt(e))}},Ht=function(e){return function(t){return t(qt(e))}},zt=function(e){return function(t){return t(function(e){return{type:Kt,init:e}}(e))}},Jt=function(){return function(e){e(Mt(localStorage.lastUpdate))}},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case At:return Object(E.a)(Object(E.a)({},e),{},{appKey:t.key});case Pt:return Object(E.a)(Object(E.a)({},e),{},{storeKey:t.key});case Kt:return Object(E.a)(Object(E.a)({},e),{},{isInit:t.init});case Ut:return Object(E.a)(Object(E.a)({},e),{},{stores:Object(ue.a)(t.stores)});case Rt:return Object(E.a)(Object(E.a)({},e),{},{lastUpdate:+t.dateUpdate});default:return e}},Wt=r(68);function Xt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}function Zt(e){var t=e.obj,r=Object(Wt.a)(e,["obj"]),n=JSON.stringify(t,null,2),a=new Blob([n],{type:"application/json"});return Object(E.a)({blob:a},r)}function Qt(e){var t=e.blob,r=e.fileName,n=void 0===r?"test":r,a=document.createElement("a");a.download="".concat(n,".json"),a.href=URL.createObjectURL(t),a.click(),URL.revokeObjectURL(a.href)}function $t(){for(var e={},t=0,r=Object.keys(localStorage);t<r.length;t++){var n=r[t];e[n]=localStorage.getItem(n)}return e}function er(){return tr.apply(this,arguments)}function tr(){return(tr=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,Ce("all");case 3:return t.groups=e.sent,e.next=6,Te("all");case 6:return t.products=e.sent,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rr(e){return nr.apply(this,arguments)}function nr(){return(nr=Object(l.a)(u.a.mark((function e(t){var r,n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.type,n=t.fileName,a=void 0===n?"config":n,c={},e.t0=r,e.next="config"===e.t0?5:"commodities"===e.t0?7:11;break;case 5:return c.config=$t(),e.abrupt("break",13);case 7:return e.next=9,er();case 9:return c.commodities=e.sent,e.abrupt("break",13);case 11:return c.config=$t(),e.abrupt("break",13);case 13:Xt(Qt,Zt)({obj:c,fileName:a});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ar(e){return cr.apply(this,arguments)}function cr(){return(cr=Object(l.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.files[0],(n=new FileReader).readAsText(r),e.abrupt("return",new Promise((function(e,t){n.onload=function(){var t=JSON.parse(n.result);e(t)},n.onerror=function(){console.error(n.error),t(n.error)}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sr(e){var t=document.getElementById(e).value;if(t)return window.localStorage[e]=t,t}var or=Object(w.b)((function(e){return{appKey:e.app.appKey,storeKey:e.app.storeKey,isInit:e.app.isInit,stores:e.app.stores}}),{setAppKey:Vt,setStoreKey:Ht,setStores:function(e){return function(t){return t(function(e){return{type:Ut,stores:e}}(e))}},toggleInitApp:zt})((function(e){var t=c.a.createRef();function r(){return(r=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr({fileName:"backup_config_".concat((new Date).toJSON())});case 2:if(console.log("File with config saved"),!window.confirm("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0442\u043e\u0432\u0430\u0440\u043e\u0432?")){e.next=8;break}return e.next=7,rr({type:"commodities",fileName:"backup_commodities_".concat((new Date).toJSON())});case 7:console.log("File with Data saved");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return o.apply(this,arguments)}function o(){return(o=Object(l.a)(u.a.mark((function t(r){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return localStorage.appKey=r,e.setAppKey(r),t.prev=2,t.next=5,Je();case 5:n=t.sent,e.setStores(n),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(2),delete localStorage.appKey,e.setAppKey(null),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}function i(){return(i=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=sr("appKey")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,s(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(t){var r=t.target.id;localStorage.storeKey=r,e.setStoreKey(r)}var b=Object(a.useState)(!1),j=Object(p.a)(b,2),f=j[0],m=j[1];function h(){return(h=Object(l.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),localStorage.clear(),t.next=4,De(r);case 4:e.setAppKey(null),e.setStoreKey(null),e.toggleInitApp(!1),m(!1),window.location.reload();case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(){return(O=Object(l.a)(u.a.mark((function r(){var n,a;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.current,r.next=3,ar(n);case 3:return a=r.sent.config,r.next=6,s(a.appKey);case 6:localStorage.storeKey=a.storeKey,e.setStoreKey(a.storeKey);case 8:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return Object(n.jsxs)("div",{children:[e.appKey&&e.storeKey&&!e.isInit&&Object(n.jsx)("div",{children:Object(n.jsx)("h2",{children:"\u0418\u0434\u0435\u0442 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f..."})}),!e.appKey&&Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435!"}),Object(n.jsx)("p",{children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u043e\u043a\u0435\u043d \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f..."})]}),f&&Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"\u0418\u0434\u0435\u0442 \u043e\u0447\u0438\u0441\u0442\u043a\u0430 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430..."}),Object(n.jsx)("p",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438."}),Object(n.jsx)("p",{children:"\u0415\u0441\u043b\u0438 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0437\u0430\u0442\u044f\u043d\u0443\u043b\u0441\u044f, \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0432\u0440\u0443\u0447\u043d\u0443\u044e."})]}),!e.appKey&&Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{id:"appKey"}),Object(n.jsx)("button",{onClick:function(){return i.apply(this,arguments)},children:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0442\u043e\u043a\u0435\u043d \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f"})]}),!!e.appKey&&!e.isInit&&Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"\u0422\u043e\u043a\u0435\u043d \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f"}),Object(n.jsx)("p",{children:e.appKey})]}),e.appKey&&!!e.stores.length&&!e.storeKey&&Object(n.jsxs)("div",{style:{cursor:"pointer"},children:[Object(n.jsx)("h3",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0430\u0433\u0430\u0437\u0438\u043d"}),Object(n.jsx)("ul",{children:e.stores.map((function(e){return Object(n.jsxs)("li",{id:e.id,onClick:d,children:[e.id,": ",e.name]},e.id)}))})]}),!!e.storeKey&&!e.isInit&&Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u043c\u0430\u0433\u0430\u0437\u0438\u043d"}),Object(n.jsx)("p",{children:e.storeKey})]}),e.isInit&&!f&&Object(n.jsx)("h2",{children:"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043e!"}),e.isInit&&!f&&Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{onClick:function(){return function(e){return h.apply(this,arguments)}("Evo")},children:"cleare Storage"}),Object(n.jsx)("button",{onClick:function(){return r.apply(this,arguments)},children:"Save Config"})]}),!e.appKey&&Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:"\u0438\u043b\u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438..."}),Object(n.jsxs)("label",{children:["\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0438\u0437 \u0444\u0430\u0439\u043b\u0430",Object(n.jsx)("input",{type:"file",ref:t,onChange:function(){return O.apply(this,arguments)},hidden:!0})]})]})]})}));function ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;if(e){var t="".concat(e.getFullYear(),"-").concat(r(e.getMonth()+1),"-").concat(r(e.getDate()));return t}function r(e){return e.toString().length<2?"0".concat(e):e}}function ur(e){if(!e)return"";try{var t=e.split("-")[0],r=t.slice(0,4),n=t.slice(4,6),a=t.slice(6);return"".concat(r,"-").concat(n,"-").concat(a)}catch(c){console.error(c.message)}}var lr=Object(w.b)((function(e){return{isInit:e.app.isInit,storeKey:e.app.storeKey}}))((function(e){e.isInit||e.history.push("/settings");var t=Object(a.useState)([]),r=Object(p.a)(t,2),c=r[0],s=r[1],o=Object(a.useState)(!1),i=Object(p.a)(o,2),d=i[0],b=i[1],j=Object(a.useState)({dateStart:new Date,dateEnd:new Date,dateMin:ur(e.storeKey)}),f=Object(p.a)(j,2),m=f[0],h=f[1];function O(){return(O=Object(l.a)(u.a.mark((function e(){var t,r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),t=document.getElementById("typeDocs").value,console.log(t),r={dateStart:m.dateStart.getTime(),dateEnd:m.dateEnd.getTime()},e.next=6,$e(t,r);case 6:n=e.sent,console.log(n),s(n.items),b(!1);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){var t=new Date(e.currentTarget.value);"dateStart"===e.currentTarget.name?t.setHours(0):t.setHours(23),h(Object(E.a)(Object(E.a)({},m),{},Object(ie.a)({},e.currentTarget.name,t)))}function x(e){return g.apply(this,arguments)}function g(){return(g=Object(l.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("SPAN"===t.target.tagName){e.next=2;break}return e.abrupt("return");case 2:return r=t.currentTarget.id,e.next=5,$e(null,null,r);case 5:n=e.sent,console.log(n.body);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){m.dateStart.setHours(0,0,0)}),[m]);var y={cursor:"pointer",border:"1px solid green",paddingTop:"0.5rem",paddingLeft:"0.5rem",paddingRight:"0.5rem",background:"yellow"};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h1",{children:"Documents"}),Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{htmlFor:"dateStart",children:"Date start:"}),Object(n.jsx)("input",{type:"date",name:"dateStart",id:"dateStart",value:ir(m.dateStart),min:m.dateMin,max:ir(m.dateEnd),onChange:v}),Object(n.jsx)("label",{htmlFor:"dateEnd",children:"Date end:"}),Object(n.jsx)("input",{type:"date",name:"dateEnd",id:"dateEnd",value:ir(m.dateEnd),min:m.dateMin,max:ir(m.dateEnd),onChange:v})]}),Object(n.jsxs)("label",{children:["DocType",Object(n.jsx)("select",{name:"type_docs",id:"typeDocs",children:[["ACCEPT","\u041f\u0440\u0438\u0435\u043c\u043a\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"],["INVENTORY","\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0438\u0437\u0430\u0446\u0438\u0438"],["REVALUATION","\u041f\u0435\u0440\u0435\u043e\u0446\u0435\u043d\u043a\u0430"],["RETURN","\u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0443"],["WRITE_OFF","\u0421\u043f\u0438\u0441\u0430\u043d\u0438\u0435"],["SELL","\u041f\u0440\u043e\u0434\u0430\u0436\u0430"],["PAYBACK","\u0412\u043e\u0437\u0432\u0440\u0430\u0442"]].map((function(e){return Object(n.jsx)("option",{value:e[0],children:e[1]},e[0])}))})]}),Object(n.jsx)("button",{onClick:function(){return function(){return O.apply(this,arguments)}()},disabled:d,children:"get Documents"}),d&&Object(n.jsx)("p",{children:"Loading..."}),!!c.length&&Object(n.jsx)("ul",{children:c.map((function(e,t){return t<20&&Object(n.jsx)("li",{id:e.id,onClick:x,style:{margin:"0.5rem"},children:Object(n.jsx)("span",{style:y,children:e.id})},e.id)}))})]})}));function dr(e){return!e||(Date.now()-e)/1e3/3600/24>1}function pr(){return br.apply(this,arguments)}function br(){return(br=Object(l.a)(u.a.mark((function e(){var t,r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ye();case 3:return t=e.sent,e.next=6,t.items;case 6:return r=e.sent,e.next=9,Fe("groups",r);case 9:return e.next=11,We();case 11:return t=e.sent,e.next=14,t.items;case 14:return n=(n=e.sent).map((function(e){return e.parent_id||(e.parent_id="0"),e.barcodes||(e.barcodes=[]),e.photos||(e.photos=[]),e})),e.next=18,Fe("products",n);case 18:localStorage.setItem("lastUpdate",Date.now()),console.log("LS: "+new Date(+localStorage.lastUpdate)),Jt(),e.next=27;break;case 23:return e.prev=23,e.t0=e.catch(0),console.error(e.t0.message),e.abrupt("return",e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})))).apply(this,arguments)}function jr(){return(jr=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dr(t)){e.next=3;break}return e.next=3,pr();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fr=Object(w.b)((function(e){return{appKey:e.app.appKey,storeKey:e.app.storeKey,isInit:e.app.isInit,lastUpdate:e.app.lastUpdate}}),{initializeApp:function(){return function(e){localStorage.appKey&&(e(Bt(localStorage.appKey)),localStorage.storeKey&&e(qt(localStorage.storeKey)),localStorage.lastUpdate&&e(Mt(localStorage.lastUpdate)))}},toggleInitApp:zt,setAppKey:Vt,setStoreKey:Ht})((function(e){return e.isInit||e.initializeApp(),e.appKey&&e.storeKey&&!e.isInit&&function(e){return jr.apply(this,arguments)}(e.lastUpdate).then((function(){return e.toggleInitApp(!0)})).catch((function(e){return alert(e.message)})),Object(n.jsxs)("div",{className:"app",children:[Object(n.jsx)(H,{syncProducts:pr,testNeedUpdate:dr}),Object(n.jsx)(D,{}),Object(n.jsxs)("div",{className:"app-content",children:[Object(n.jsx)(d.a,{exact:!0,path:"/"}),Object(n.jsx)(d.a,{exact:!0,path:"/settings",component:or}),Object(n.jsx)(d.a,{path:"/example",component:Ft}),Object(n.jsx)(d.a,{path:"/muzik",component:q}),Object(n.jsx)(d.a,{path:"/commodity",component:Et}),Object(n.jsx)(d.a,{path:"/game",component:x}),Object(n.jsx)(d.a,{path:"/table",component:Tt}),Object(n.jsx)(d.a,{path:"/test",component:Dt}),Object(n.jsx)(d.a,{path:"/documents",component:lr})]})]})})),mr=r(26),hr=r(67),Or=Object(mr.c)({navigation:T,commodityPage:kt,muzik:B,app:Yt}),vr=Object(mr.d)(Or,Object(mr.a)(hr.a));o.a.render(Object(n.jsx)(w.a,{store:vr,children:Object(n.jsx)(k.a,{children:Object(n.jsx)(fr,{})})}),document.getElementById("root")),window.store=vr},19:function(e,t,r){e.exports={container:"Commodity_container__2O07C",list:"Commodity_list__2ILIG",selected:"Commodity_selected__3t5hz",del:"Commodity_del__RIa5V",head:"Commodity_head__2sL_Q",buttons:"Commodity_buttons__lNlz7",search:"Commodity_search__2fDTI"}},28:function(e,t,r){e.exports={container:"Muzik_container__2Sk5X",item:"Muzik_item__3yK_L",textdiv:"Muzik_textdiv__2KG3H",text:"Muzik_text__3CXBb",result:"Muzik_result__3IGcC"}},29:function(e,t,r){e.exports={tree:"Tree_tree__2BiYs",selected:"Tree_selected__3nfeH"}},33:function(e,t,r){e.exports={image:"ImpExcel_image__3T78n",page:"ImpExcel_page__escWJ",archive:"ImpExcel_archive__39uKW",article:"ImpExcel_article__23hzN"}},34:function(e,t,r){e.exports={"cover-div":"FormModalWrapper_cover-div__R6V-a",container:"FormModalWrapper_container__zgoYM"}},38:function(e){e.exports=JSON.parse('{"measure_names":["","\u0448\u0442","\u043a\u0433","\u043b","\u043c","\u043a\u043c","\u043c2","\u043c3","\u043a\u043e\u043c\u043f\u043b","\u0443\u043f\u0430\u043a","\u0435\u0434","\u0434\u0440\u043e\u0431"],"types":[{"type":"NORMAL","description":"\u043e\u0431\u044b\u0447\u043d\u044b\u0439"},{"type":"ALCOHOL_MARKED","description":"\u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0430\u043b\u043a\u043e\u0433\u043e\u043b\u044c"},{"type":"ALCOHOL_NOT_MARKED","description":"\u043d\u0435\u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0430\u043b\u043a\u043e\u0433\u043e\u043b\u044c"},{"type":"TOBACCO_MARKED","description":"\u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0442\u0430\u0431\u0430\u043a"},{"type":"SHOES_MARKED","description":"\u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u043e\u0431\u0443\u0432\u044c"},{"type":"MEDICINE_MARKED","description":"\u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043b\u0435\u043a\u0430\u0440\u0441\u0442\u0432\u0430"},{"type":"SERVICE","description":"\u0443\u0441\u043b\u0443\u0433\u0430"}],"taxes":[{"tax":"NO_VAT","description":"\u0431\u0435\u0437 \u041d\u0414\u0421"},{"tax":"VAT_0","description":"\u043e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0441\u0442\u0430\u0432\u043a\u0430 0%"},{"tax":"VAT_10","description":"\u043e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0441\u0442\u0430\u0432\u043a\u0430 10%"},{"tax":"VAT_10_110","description":"\u0440\u0430\u0441\u0447\u0451\u0442\u043d\u0430\u044f \u0441\u0442\u0430\u0432\u043a\u0430 10%"},{"tax":"VAT_18","description":"\u043e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0441\u0442\u0430\u0432\u043a\u0430 18%. \u0421 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u044f\u043d\u0432\u0430\u0440\u044f 2019 \u0433\u043e\u0434\u0430 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c 20%"},{"tax":"VAT_18_118","description":"\u0440\u0430\u0441\u0447\u0451\u0442\u043d\u0430\u044f \u0441\u0442\u0430\u0432\u043a\u0430 18%. \u0421 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u044f\u043d\u0432\u0430\u0440\u044f 2019 \u0433\u043e\u0434\u0430 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c 20%"}]}')},41:function(e,t,r){e.exports={item:"Navbar_item__3BYsL",active:"Navbar_active__2-ZqH"}},6:function(e,t,r){e.exports={"form-product":"Form_form-product__rFtLH",uuid:"Form_uuid__390Ur",barcodes:"Form_barcodes__U-W5R","g-tree":"Form_g-tree__e4Uyg",tree:"Form_tree__3nwNl",price:"Form_price__Khzda","picture-small":"Form_picture-small__3G_dV","div-picture":"Form_div-picture__1ZjeF",select:"Form_select__JfE4L",buttons:"Form_buttons__3k3hF","big-img":"Form_big-img__1-g2E","view-barcode":"Form_view-barcode__1dcmC","del-bc":"Form_del-bc__1LwSb","add-bc":"Form_add-bc__3ZUsN","menu-buttons":"Form_menu-buttons__5lLq7",required:"Form_required__3vB1c",propertyes:"Form_propertyes__39JHl"}},62:function(e,t,r){e.exports={wrong:"TextArea_wrong__3jbCe"}},75:function(e,t,r){},76:function(e,t,r){},77:function(e,t,r){},78:function(e,t,r){},79:function(e,t,r){},80:function(e,t,r){},87:function(e,t,r){e.exports={needupdate:"Header_needupdate__3Q571",updated:"Header_updated__306tT",loginBlock:"Header_loginBlock__3g8c-"}}},[[112,1,2]]]);
//# sourceMappingURL=main.98a051c0.chunk.js.map