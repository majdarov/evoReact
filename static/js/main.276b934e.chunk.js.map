{"version":3,"sources":["components/Game/Game.js","components/Navbar/Navbar.jsx","redux/navReduser.js","components/Navbar/NavLinkContainer.js","components/Navbar/NavbarContainer.jsx","components/Muzik/Muzik.jsx","redux/MuzikReduser.js","components/Muzik/MuzikContainer.jsx","Assets/img/terminal-5.png","components/Header/Header.jsx","components/Header/HeaderContainer.jsx","components/common/Tree/treeFunction.js","components/common/Tree/Node.jsx","components/common/Tree/Tree.jsx","Assets/img/placeholder.svg","components/common/Preloader/Preloader.js","components/Commodity/ListCommodities/ListCommodities.jsx","components/Commodity/Forms/FormModalWrapper.jsx","components/Commodity/Forms/frmUtilites.js","components/Commodity/Forms/schemas/ComponentsProducts.jsx","components/common/TextArea/TextArea.jsx","components/Commodity/Forms/FormImg.jsx","components/Commodity/Forms/FormProduct.jsx","components/Commodity/Commodity.jsx","api/api_evotor/createRequestAxios.js","api/api_evotor/fetchEvoAxios.js","api/api.js","api/apiIDB.js","components/Errors/SequelizeErrors.js","components/Errors/EvoErrors.js","components/Errors/chooseError.js","redux/commodityReduser.js","components/Commodity/CommodityContainer.jsx","components/ImpExcel/News/News.jsx","components/ImpExcel/ImpExcel.jsx","components/Example/Example.jsx","components/Example/Wrapper.jsx","components/IdbTest/IdbTest.jsx","redux/appReducer.js","api/apiFile.js","components/Settings/MainSettings.jsx","App.jsx","redux/redux-store.js","index.js","components/Commodity/Commodity.module.css","components/common/Tree/Tree.module.css","components/Muzik/Muzik.module.css","components/ImpExcel/ImpExcel.module.css","components/Commodity/Forms/FormModalWrapper.module.css","components/Navbar/Navbar.module.css","components/Commodity/Forms/Form.module.css","components/common/TextArea/TextArea.module.css","components/Header/Header.module.css"],"names":["Square","props","className","onClick","value","Board","i","sqSel","this","sq","setTimeout","squares","rows","t","j","push","renderSquare","React","Component","calculateWinner","lines","a","b","c","document","querySelectorAll","forEach","item","index","classList","remove","line","toggle","interval","setInterval","clearInterval","length","Game","state","history","Array","fill","square","xIsNext","stepNumber","slice","setState","concat","firstElementChild","step","e","target","status","current","winner","moves","map","move","coords","Math","floor","desc","jumpTo","handleClick","Navbar","navElements","GET_TITLE","CHOOSE_LANG","getTitleAC","path","type","initialState","langs","ru","en","currentLang","title","navBar","link","navReduser","action","nav","find","undefined","lng","NavLinkContainer","connect","ownProps","to","exact","activeClassName","dispatch","NavLink","getNavElements","navigation","idx","ex","s","active","NavbarContainer","Muzik","container","textdiv","text","textHTML","onChange","onChangeText","result","id","dangerouslySetInnerHTML","__html","SET_TEXT","muzReduser","Object","assign","MuzikContainer","_title","muzik","txt","Header","src","logo","alt","ev","name","chooseLang","getTitle","checked","chooseLangAC","withRouter","location","pathname","split","useEffect","addNode","subNode","parentNode","pNode","findNode","pid","childs","sort","label","console","error","message","node","createTree","data","root","notFoundNodes","notFoundNode","createNode","Node","ul","closed","hidden","open","children","Tree","nodeRoot","price","tree","treeLabel","pId","getElementById","selected","nodeSelected","querySelector","closest","treeElements","createSubTree","lvl","elem","tagName","nextSibling","callback","Preloader","spiner","ListCommodities","liElements","commodities","liClick","window","confirm","innerText","deleteProduct","res","alert","getProductId","comIsLoaded","uuid","clickable","data-price","data-code","code","toFixed","del","FormModalWrapper","useLayoutEffect","body","style","overflow","top","form","setNewCode","maxCode","random","newCode","viewBarcode","barcode","f1","f2","bcStr","n","Number","String","fromCharCode","substr","validateBarcode","includes","ComponentsProducts","measure_name","handleChange","disabled","schema","measure_names","m","types","description","tax","taxes","g","groups","parent_id","gLabel","onDivClick","treeView","classTree","closeTree","callbackTree","classDiv","tabIndex","onBlur","onBlurGroup","delBcClick","allow_edit","deleteFromArray","view_barcode","barcodes","delBc","defaultValue","bc","handleBlur","addBc","divPicture","pictureClick","photo","TextArea","placeholder","wrong","onKeyDown","ref","refrence","wrap","autoFocus","FormImg","display","height","position","left","verticalAlign","FormProduct","parentId","isNewData","formData","fileInput","createRef","useState","bigImg","currentBarcode","then","formError","err","setFormError","formatPrice","isFinite","required","photos","from","files","values","elements","removeAttribute","currentTarget","newValue","prefix","prompt","A1","repeat","toString","A2","newBarcode","warn","valBc","handleSubmit","preventDefault","stopPropagation","changes","key","formChanged","createdAt","updatedAt","missData","reqData","keys","validateRequiredData","strMessage","getElementsByName","add","curr","prev","validateZeroData","typeQuery","postFormData","toggleFormPost","setFormData","setViewForm","elemId","arrName","findIndex","arr","splice","setPid","setTreeView","gProps","eId","mnProps","tProps","taxProps","bProps","pProps","picture","p","addEventListener","removeEventListener","prevElem","previousElementSibling","formPost","onSubmit","ph","noPhoto","multiple","htmlFor","click","code_article","article_number","propertyes","prices","cost_price","defaultChecked","allow_to_sell","buttons","cansel","Commodity","isLoaded","getGroups","getProducts","setError","head","viewForm","list","api_v2","headers","localStorage","appKey","storeUuid","storeKey","params","cursor","request","selectOption","url","method","date","Date","setMonth","getMonth","getTime","JSON","stringify","createRequest","fetchEvo","baseURL","Axios","response","paging","next_cursor","items","apiForIdb","stores","initDb","openDB","upgrade","db","oldVersion","newVersion","log","objectStoreNames","contains","store","createObjectStore","keyPath","createIndex","getGroup","getAll","group","get","getProduct","product","getAllFromIndex","products","pushItems","resItems","tx","transaction","promises","put","done","Promise","all","delDb","nameDb","deleteDB","storeName","deleteData","delete","SequelizeError","Error","SequelizeValidationError","errors","SequelizeUniqueConstraintError","EvoValidationError","subject","toUpperCase","reason","chooseError","GET_GROUPS","SET_PID","GET_COMMODITIES","SET_ERROR","UPDATE_COMMODITY","SET_UPDATED","VIEW_FORM","SET_FORM_DATA","TOGGLE_FORM_POST","SET_FORM_ERROR","setPidAC","setErrorAC","setFormErrorAC","viewFormAC","view","setFormDataAC","toggleFormPostAC","lastUpdate","isUpdated","quantity","resMessage","commodityReduser","commodity","now","updateOk","update","compose","commodityPage","getGroupsAC","getProductsPid","dir","typeData","callbackApi","putData","catch","News","element","article","ImpExcel","childElements","setChildElements","page","readXlsxFile","inpChange","archive","Example","count","Wrapper","setCount","IdbTest","setGroups","isLoading","setIsLoading","butGetGroups","SET_APP_KEY","SET_STORE_KEY","INIT_APP","SET_STORES","setAppKeyAC","setStoreKeyAC","isInit","setAppKey","setStoreKey","initApp","init","initAppAC","appReducer","blobFromObj","obj","json","Blob","blobToUrl","blob","fileName","createElement","download","href","URL","createObjectURL","revokeObjectURL","getObjfromLocalStorage","getItem","getObjfromIdb","saveConfig","config","readJsonFile","input","file","reader","FileReader","readAsText","resolve","reject","onload","parse","onerror","addKey","app","setStores","setStoresAC","inpRef","toJSON","setAppKeyAndStores","clean","setClean","storageName","clear","reload","cleareStorage","initializeApp","getProductsForIdb","component","MainSettings","CommodityContainer","redusers","combineReducers","createStore","applyMiddleware","thunkMidleware","ReactDOM","render","module","exports"],"mappings":"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","file":"static/js/main.276b934e.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./Game.css\";\r\n\r\nfunction Square(props) {\r\n  return (\r\n    <button className={props.className} onClick={props.onClick}>\r\n      {props.value}\r\n    </button>\r\n  );\r\n}\r\n\r\nclass Board extends React.Component {\r\n  renderSquare(i) {\r\n    let sqSel =\r\n      this.props.sq === i && this.props.sqSel ? \"square selected\" : \"square\";\r\n    setTimeout(() => (sqSel = \"square\"), 500);\r\n    return (\r\n      <Square\r\n        value={this.props.squares[i]}\r\n        className={sqSel}\r\n        key={i}\r\n        onClick={() => this.props.onClick(i)}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const rows = [];\r\n    let t = 0;\r\n    while (t < 9) {\r\n      for (let j = 1; j <= 3; j++) {\r\n        const sq = [];\r\n        for (let i = 1; i <= 3; i++) {\r\n          sq.push(this.renderSquare(t));\r\n          t++;\r\n        }\r\n        rows.push(\r\n          <div className=\"board-row\" key={j}>\r\n            {sq}\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n    return <div>{rows}</div>;\r\n  }\r\n}\r\n\r\nclass Game extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      history: [\r\n        {\r\n          squares: Array(9).fill(null),\r\n          square: null\r\n        }\r\n      ],\r\n      xIsNext: true,\r\n      stepNumber: 0\r\n    };\r\n  }\r\n\r\n  handleClick(i) {\r\n    const history = this.state.history.slice(0, this.state.stepNumber + 1);\r\n    const current = history[history.length - 1];\r\n    const squares = current.squares.slice();\r\n\r\n    if (calculateWinner(squares) || squares[i]) {\r\n      return;\r\n    }\r\n    squares[i] = this.state.xIsNext ? \"X\" : \"O\";\r\n    this.setState({\r\n      history: history.concat([{ squares: squares, square: i }]),\r\n      stepNumber: history.length,\r\n      xIsNext: !this.state.xIsNext\r\n    });\r\n    let arrLi = document.querySelectorAll(\"li\");\r\n    arrLi.forEach(item => {\r\n      item.firstElementChild.classList.remove(\"selected\");\r\n    });\r\n  }\r\n\r\n  jumpTo(step, e) {\r\n    let arrLi = document.querySelectorAll(\"li\");\r\n    arrLi.forEach(item => {\r\n      item.firstElementChild.classList.remove(\"selected\");\r\n    });\r\n    e.target.classList.toggle(\"selected\");\r\n    this.setState({\r\n      stepNumber: step,\r\n      xIsNext: step % 2 === 0\r\n    });\r\n    this.setState({ sqSel: true });\r\n    setTimeout(() => this.setState({ sqSel: false }), 500);\r\n  }\r\n\r\n  render() {\r\n    const history = this.state.history;\r\n    const current = history[this.state.stepNumber];\r\n    const winner = calculateWinner(current.squares);\r\n\r\n    const moves = history.map((step, move) => {\r\n      let i = step.square;\r\n      if (move) {\r\n        var coords =\r\n          \" row: \" + (Math.floor(i / 3) + 1) + \" col: \" + ((i % 3) + 1);\r\n        var desc = \"Goto step #\" + move;\r\n      } else {\r\n        desc = \"Goto Start\";\r\n        coords = \"\";\r\n      }\r\n\r\n      return (\r\n        <li key={move}>\r\n          <button onClick={e => this.jumpTo(move, e)}>{desc}</button>\r\n          {coords}\r\n        </li>\r\n      );\r\n    });\r\n\r\n    let status;\r\n\r\n    if (winner) {\r\n      status = \"Winner \" + winner;\r\n    } else if (history.length === 10) {\r\n      status = \"X === O\";\r\n    } else {\r\n      status = \"Next step \" + (this.state.xIsNext ? \"X\" : \"O\");\r\n    }\r\n\r\n    return (\r\n      <div className=\"game\">\r\n        <h2>Game X vs O</h2>\r\n        <div className=\"game-wrapper\">\r\n          <div className=\"game-board\">\r\n            <Board\r\n              squares={current.squares}\r\n              onClick={i => this.handleClick(i)}\r\n              sqSel={this.state.sqSel}\r\n              sq={current.square}\r\n            />\r\n          </div>\r\n          <div className=\"game-info\">\r\n            <div>{status}</div>\r\n            <ol>{moves}</ol>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction calculateWinner(squares) {\r\n  const lines = [\r\n    [0, 1, 2],\r\n    [3, 4, 5],\r\n    [6, 7, 8],\r\n    [0, 3, 6],\r\n    [1, 4, 7],\r\n    [2, 5, 8],\r\n    [0, 4, 8],\r\n    [2, 4, 6]\r\n  ];\r\n  for (let i = 0; i < lines.length; i++) {\r\n    const [a, b, c] = lines[i];\r\n    if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {\r\n      let arrSq = document.querySelectorAll(\".square\");\r\n      arrSq.forEach((item, index) => {\r\n        item.classList.remove(\"selected\");\r\n        lines[i].forEach(line => {\r\n          if (index === line) {\r\n            item.classList.toggle(\"selected\");\r\n            let interval = setInterval(() => {\r\n              item.classList.toggle(\"selected\");\r\n            }, 500);\r\n            setTimeout(() => {\r\n              clearInterval(interval);\r\n              item.classList.remove(\"selected\");\r\n            }, 3000);\r\n          }\r\n        });\r\n      });\r\n\r\n      return squares[a];\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default Game;\r\n","import React from 'react';\r\n\r\nconst Navbar = props => {\r\n\r\n  return (\r\n    <nav className='navbar'>\r\n      {props.navElements}\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Navbar;","const GET_TITLE = 'GET-TITLE';\r\n\r\nconst CHOOSE_LANG = 'CHOOSE-LANG';\r\n\r\nexport const getTitleAC = (path) => ({ type: GET_TITLE, path });\r\n\r\nexport const chooseLangAC = (lng) => ({ type: CHOOSE_LANG, lng });\r\n\r\nlet initialState = {\r\n  langs: { ru: 0, en: 1 },\r\n  currentLang: 0,\r\n  title: '',\r\n  navBar: [\r\n    { link: '/', title: ['Начало', 'Start'] },\r\n    { link: '/settings', title: ['Настройки', 'Settings'] },\r\n    { link: '/commodity', title: ['Товары', 'Products'] },\r\n    { link: '/muzik', title: ['Музыка', 'Music'] },\r\n    { link: '/game', title: ['Играть', 'Game'] },\r\n    { link: '/table', title: ['Экспорт Excel', 'Export Excel'] },\r\n  ],\r\n};\r\n\r\nconst navReduser = (state = initialState, action) => {\r\n  switch (action.type) {\r\n\r\n    case GET_TITLE:\r\n      let title;\r\n      let nav = state.navBar.find((item) => item.link === action.path);\r\n      if (nav !== undefined) {\r\n        title = nav.title[state.currentLang];\r\n      }\r\n      return { ...state, title };\r\n\r\n    case CHOOSE_LANG:\r\n      return { ...state, currentLang: state.langs[action.lng] };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const getTitle = (path) => {\r\n  return (dispatch) => {\r\n    dispatch(getTitleAC(path));\r\n  };\r\n};\r\n\r\nexport const chooseLang = lng => {\r\n  return dispatch => {\r\n    dispatch(chooseLangAC(lng))\r\n  };\r\n}\r\n\r\nexport default navReduser;\r\n","import { NavLink } from \"react-router-dom\";\r\nimport { getTitleAC } from \"../../redux/navReduser\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst mapState = (state, ownProps) => {\r\n  let { to, exact, activeClassName } = ownProps;\r\n  return { activeClassName, to, exact };\r\n};\r\n\r\nconst mapDispatch = (dispatch, ownProps) => {\r\n  let { to } = ownProps;\r\n  return {\r\n    onClick: () => {\r\n      dispatch(getTitleAC(to));\r\n    },\r\n  };\r\n};\r\n\r\nconst NavLinkContainer = connect(mapState, mapDispatch)(NavLink);\r\n\r\nexport default NavLinkContainer;\r\n","import React from 'react';\r\nimport s from './Navbar.module.css';\r\nimport Navbar from './Navbar';\r\nimport { connect } from 'react-redux';\r\nimport NavLinkContainer from './NavLinkContainer';\r\n\r\nfunction getNavElements(state) {\r\n\r\n  let currentLang = state.navigation.currentLang;\r\n  let navElements = state.navigation.navBar.map((nav, idx) => {\r\n    let ex;\r\n    nav.link === \"/\" ? ex = true : ex = false;\r\n    return (\r\n      <div className={s.item} key={idx}>\r\n        <NavLinkContainer\r\n          exact={ex}\r\n          to={nav.link}\r\n          activeClassName={s.active}>\r\n          {nav.title[currentLang]}\r\n        </NavLinkContainer>\r\n      </div>\r\n    );\r\n  });\r\n  return navElements;\r\n}\r\n\r\nconst mapState = state => {\r\n  return {\r\n    navElements: getNavElements(state)\r\n  }\r\n}\r\n\r\nconst NavbarContainer = connect(mapState)(Navbar);\r\n\r\nexport default NavbarContainer;","import React from \"react\";\r\nimport s from \"./Muzik.module.css\";\r\n\r\nconst Muzik = props => {\r\n\r\n  return (\r\n    <div>\r\n      <div className={s.item}>{props.title}</div>\r\n      <div className={s.container}>\r\n        <div className={s.textdiv}>\r\n          <textarea \r\n            className={s.text} \r\n            // cols={50}\r\n            rows={15}\r\n            value={props.textHTML} \r\n            onChange={props.onChangeText}>\r\n            {props.textHTML}\r\n          </textarea>\r\n        </div>\r\n        <div className={s.result} id=\"div\" dangerouslySetInnerHTML={{__html: props.textHTML}}></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Muzik;\r\n","const SET_TEXT = \"SET-TEXT\";\r\n\r\nexport const setMuzikTextAC = text => ({ type: SET_TEXT, text: text });\r\n\r\nlet initialState = {\r\n  textHTML: \"text HTML...\"\r\n};\r\n\r\nconst muzReduser = (state = initialState, action) => {\r\n  switch (action.type) {\r\n\r\n    case SET_TEXT:\r\n      return Object.assign({}, state, {textHTML: action.text});\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default muzReduser;\r\n","import { connect } from \"react-redux\";\r\nimport Muzik from \"./Muzik\";\r\nimport { setMuzikTextAC } from \"../../redux/MuzikReduser\";\r\n\r\nconst mapStateToProps = state => {\r\n  \r\n  return {\r\n    title: state.navigation._title,\r\n    textHTML: state.muzik.textHTML\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onChangeText: e => {\r\n      let txt = e.target.value;\r\n      dispatch(setMuzikTextAC(txt));\r\n    }\r\n  }\r\n}\r\n\r\nconst MuzikContainer = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps)(Muzik)\r\n\r\nexport default MuzikContainer;\r\n","export default __webpack_public_path__ + \"static/media/terminal-5.6357e026.png\";","import React from 'react';\r\nimport './Header.module.css';\r\nimport logo from '../../Assets/img/terminal-5.png';\r\n\r\nconst Header = (props) => {\r\n\r\n    function clickLang(ev) {\r\n        let lng;\r\n        if (ev.target.name === 'lng') {\r\n            lng = ev.target.value;\r\n            props.chooseLang(lng);\r\n            props.getTitle(props.path);\r\n        } else {\r\n            return;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <header>\r\n            <img src={logo} alt='Logo'></img>\r\n            <h2>{props.title}</h2>\r\n            <div onClick={clickLang}>\r\n                <input name=\"lng\" type=\"radio\" value='ru' checked={!props.currentLang} onChange={(ev) => ev.target.checked = !props.currentLang} />RU\r\n                <input name=\"lng\" type=\"radio\" value='en' checked={props.currentLang} onChange={(ev) => ev.target.checked = props.currentLang} />EN\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Header from './Header';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { getTitle, chooseLang } from '../../redux/navReduser';\r\n// import { updateProducts, setUpdated } from '../../redux/commodityReduser';\r\nimport { useEffect } from 'react';\r\n\r\nconst HeaderContainer = props => {\r\n\r\n    let path = '/' + props.location.pathname.split('/')[1];\r\n\r\n    const getTitle = props.getTitle;\r\n    useEffect(() => {\r\n        getTitle(path);\r\n    }, [path, getTitle])\r\n\r\n    return <Header {...props} path={path} />\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\r\n    let className;\r\n\r\n    return {\r\n        navBar: state.navigation.navBar,\r\n        title: state.navigation.title,\r\n        className,\r\n        currentLang: state.navigation.currentLang\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, { getTitle,  chooseLang })(withRouter(HeaderContainer));\r\n","/* Target\r\n    tree = {\r\n        id:'root',\r\n        label: 'root'\r\n        childs: [\r\n            node:{\r\n                id: 'id',\r\n                pid: 'pid',\r\n                label: 'label',\r\n                childs: [\r\n                    node: {\r\n                        id: 'id',\r\n                        pid: 'pid',\r\n                        label: 'label',\r\n                        childs: []\r\n                    },\r\n                    node: {...},\r\n                    node: {...},\r\n                    node: {...},\r\n                ]\r\n            },\r\n            node: {...},\r\n            node: {...},\r\n        ]\r\n    }\r\n*/\r\n\r\nfunction createNode(item) {\r\n  let node = {...item};\r\n  node.childs = [];\r\n  return node;\r\n}\r\n\r\nfunction addNode(subNode, parentNode) {\r\n  let pNode = findNode(subNode.pid, parentNode);\r\n  try {\r\n    if (pNode === undefined) return subNode;\r\n    pNode.childs.push(subNode);\r\n    pNode.childs.sort((a, b) => {\r\n      if (a.label > b.label) return 1;\r\n      if (a.label < b.label) return -1;\r\n      return 0;\r\n    });\r\n    return false;\r\n  } catch (e) {\r\n    console.error(e.message);\r\n  }\r\n}\r\n\r\nfunction findNode(pid, pNode) {\r\n  if (pid === null) pid = 0;\r\n  let result = pNode.childs.find(item => item.id === pid);\r\n\r\n  if (result === undefined) {\r\n    for (let node of pNode.childs) {\r\n      result = findNode(pid, node);\r\n      if (result) break;\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction createTree(data, root) {\r\n  let notFoundNodes = [];\r\n    // debugger;\r\n  data.forEach(item => {\r\n    let node = createNode(item);\r\n    let notFoundNode = addNode(node, root);\r\n    if (notFoundNode) {\r\n      notFoundNodes.push(notFoundNode);\r\n    }\r\n  });\r\n  // debugger\r\n  if (notFoundNodes.length) {\r\n    createTree(notFoundNodes, root);\r\n  }\r\n  notFoundNodes = [];\r\n  return root;\r\n}\r\nexport default createTree;","import React from \"react\";\r\n\r\nconst Node = props => {\r\n  let ul;\r\n  let closed = props.hidden ? \"fas fa-folder\" : \"fas fa-folder-open\";\r\n  let open = !props.hidden ? \"open\" : \"closed\";\r\n  if (props.children.length) {\r\n    ul = <ul hidden={props.hidden}>{props.children}</ul>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <li id={props.id} className={open}>\r\n        <i className={closed}></i>\r\n        <span >\r\n          {props.label}\r\n        </span>\r\n        {ul}\r\n      </li>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Node;\r\n","import React, { useEffect } from \"react\";\r\nimport s from \"./Tree.module.css\";\r\nimport createTree from \"./treeFunction\";\r\nimport Node from \"./Node\";\r\n\r\nconst Tree = props => {\r\n  let nodeRoot = { id: 0, label: props.price, childs: [] };\r\n  let tree = { id: \"Tree\", label: props.treeLabel, childs: [nodeRoot] };\r\n  createTree(props.data, tree);\r\n\r\n  useEffect(() => {\r\n    if (props.pId) {\r\n      document\r\n        .getElementById(\"Tree\")\r\n        .querySelectorAll(\"span\")\r\n        .forEach(item => {\r\n          if (item.className === s.selected) item.className = null;\r\n        });\r\n      let nodeSelected = document.getElementById(props.pId);\r\n      nodeSelected.querySelector(\"span\").className = s.selected;\r\n      let ul = nodeSelected.closest('ul');\r\n      if (ul.hidden) {\r\n        ul.hidden = false;\r\n      }\r\n    }\r\n  }, [props.pId])\r\n\r\n  function handleClick(e) {\r\n    if (e.target.tagName !== \"SPAN\" && e.target.tagName !== \"I\") return;\r\n    // ***SPAN toggle selected\r\n    document\r\n      .getElementById(\"Tree\")\r\n      .querySelectorAll(\"span\")\r\n      .forEach(item => {\r\n        if (item.className === s.selected) item.className = null;\r\n      });\r\n    if (e.target.tagName === \"SPAN\") {\r\n      e.target.className = s.selected;\r\n    } else {\r\n      e.target.nextSibling.className = s.selected;\r\n    }\r\n    // SPAN***\r\n    let elem = e.target.closest(\"li\");\r\n    if (!elem) return;\r\n    if (elem.id !== \"0\") {\r\n      let target = elem.querySelector(\"ul\");\r\n      if (target) {\r\n        target.hidden = !target.hidden;\r\n        if (target.hidden) {\r\n          elem.className = \"closed\";\r\n          elem.firstElementChild.className = \"fas fa-folder\";\r\n        } else {\r\n          elem.className = \"open\";\r\n          elem.firstElementChild.className = \"fas fa-folder-open\";\r\n        }\r\n      }\r\n    }\r\n\r\n    if (props.callback) {\r\n      props.callback(elem.id);\r\n    }\r\n\r\n  }\r\n\r\n  function createSubTree(item, lvl = 0) {\r\n    let hidden;\r\n    lvl += 1;\r\n    let children = [];\r\n    if (item.childs?.length) {\r\n      children = item.childs.map(elem => {\r\n        return createSubTree(elem, lvl);\r\n      });\r\n    }\r\n    hidden = lvl > 1 ? \"hidden\" : null;\r\n    return (\r\n      <Node\r\n        id={item.id}\r\n        key={item.id}\r\n        label={item.label}\r\n        children={children}\r\n        hidden={hidden}\r\n      />\r\n    );\r\n  }\r\n\r\n  let treeElements = createSubTree(nodeRoot);\r\n\r\n  return (\r\n    <div id={tree.id} className={s.tree} onClick={/* (e) => props.handleClick(e) */ handleClick}>\r\n      <h3>{tree.label}</h3>\r\n      <ul>{treeElements}</ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tree;\r\n","export default __webpack_public_path__ + \"static/media/placeholder.e2f04097.svg\";","import React from \"react\";\r\nimport spiner from \"../../../Assets/img/placeholder.svg\";\r\n\r\nlet Preloader = (props) => {\r\n  return (\r\n    <div>\r\n      <img src={spiner} alt=\"\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Preloader;","import React from 'react';\r\nimport s from '../Commodity.module.css';\r\nimport Preloader from '../../common/Preloader/Preloader';\r\n\r\nconst ListCommodities = props => {\r\n    let liElements;\r\n    let commodities = props.commodities;\r\n\r\n    async function liClick(e) {\r\n        let id;\r\n        if (e.target.tagName === 'SPAN') {\r\n            let elem = e.target.closest('li')\r\n\r\n            if (window.confirm(`${elem.innerText}\\n\\rYou'r realy wanted delete this product?`)) {\r\n                let res = await props.deleteProduct(elem.id, props.pid);\r\n                alert(`Product id: ${res}\\n\\rDELETED!`)\r\n            } else {\r\n                alert('NOT DELETED!');\r\n            }\r\n            return;\r\n        } else {\r\n            id = e.target.id;\r\n        }\r\n        // console.log(e.target);\r\n        props.getProductId(id);\r\n    }\r\n\r\n    if (props.error) {\r\n        return props.error.message;\r\n    } else if (!props.comIsLoaded) {\r\n        return <Preloader />\r\n    } else {\r\n        liElements = commodities.sort(item => item.name).map(item => {\r\n            return (\r\n                <li id={item.uuid} key={item.uuid} className={s.clickable}\r\n                    onClick={liClick} data-price={item.price} data-code={item.code}>\r\n                    {item.label} | {item.price ? item.price.toFixed(2) : '0.00'}\r\n                    <span className={s.del}></span>\r\n                </li>\r\n            )\r\n        })\r\n\r\n        return (\r\n            <>\r\n                <ul>\r\n                    {liElements}\r\n                </ul>\r\n            </>\r\n        )\r\n    }\r\n}\r\nexport default ListCommodities;\r\n","import React, { useLayoutEffect } from \"react\";\r\nimport s from './FormModalWrapper.module.css';\r\n\r\nconst FormModalWrapper = props => {\r\n\r\n  const showForm = () => {\r\n    document.body.style.overflow = 'hidden';\r\n    setTimeout(() => document.getElementById(s['container']).style.top = 0, 0);\r\n  }\r\n\r\n  useLayoutEffect(showForm, []);\r\n\r\n  return (\r\n    <>\r\n      <div id={s['cover-div']}></div>\r\n      <div className={s.container} id={s['container']}>\r\n        {props.form}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\n\r\n\r\nexport default FormModalWrapper;\r\n","export const setNewCode = async () => {\r\n  let maxCode = Math.floor(Math.random() * 1e5);//await productsApi.getData('products', { max: 'code' });\r\n  let newCode = maxCode + 1;\r\n  return newCode;\r\n};\r\n\r\nexport function newBarcode(code, prefix = '0000') {\r\n  // if (!prefix) prefix = '0000';\r\n  let A1 =\r\n    '20'.concat(prefix) +\r\n    '0'.repeat(6 - code.toString().length) +\r\n    code.toString();\r\n  let A2 = 0;\r\n  A1.split('').forEach((item, i) => {\r\n    if (i % 2 !== 0) {\r\n      A2 += Number(item) * 3;\r\n    } else {\r\n      A2 += Number(item);\r\n    }\r\n  });\r\n  A2 = (10 - (A2 % 10)) % 10;\r\n  return A1.concat(A2);\r\n}\r\n\r\nexport function viewBarcode(barcode) {\r\n  let f1 = 65;\r\n  let f2 = 75;\r\n  let s = [\r\n    [f1, f1, f1, f1, f1, f1],\r\n    [f1, f1, f2, f1, f2, f2],\r\n    [f1, f1, f2, f2, f1, f2],\r\n    [f1, f1, f2, f2, f2, f1],\r\n    [f1, f2, f1, f1, f2, f2],\r\n    [f1, f2, f2, f1, f1, f2],\r\n    [f1, f2, f2, f2, f1, f1],\r\n    [f1, f2, f1, f2, f1, f2],\r\n    [f1, f2, f1, f2, f2, f1],\r\n    [f1, f2, f2, f1, f2, f1],\r\n  ];\r\n\r\n  let bcStr = barcode.split('')[0];\r\n  let n = Number(bcStr);\r\n\r\n  for (let i = 1; i <= 6; i++) {\r\n    bcStr += String.fromCharCode(Number(barcode.substr(i, 1)) + s[n][i - 1]);\r\n  }\r\n  bcStr += String.fromCharCode(42);\r\n  for (let i = 7; i <= 12; i++) {\r\n    bcStr += String.fromCharCode(Number(barcode.substr(i, 1)) + 97);\r\n  }\r\n\r\n  bcStr += String.fromCharCode(43);\r\n  return bcStr;\r\n}\r\n\r\nexport function validateBarcode(barcode) {\r\n  if (![7, 8, 12, 13].includes(barcode.length)) {\r\n    return `Not valid Length barcode: ${barcode.length}`;\r\n  }\r\n  let res = 0;\r\n  barcode.split('').forEach((item, i) => {\r\n    if (i % 2 !== 0) {\r\n      res += Number(item) * 3;\r\n      res = res % 10;\r\n    } else {\r\n      res += Number(item);\r\n      res = res % 10;\r\n    }\r\n  });\r\n  if (res !== 0) {\r\n    let message = '';\r\n    if (barcode.length === 13 || barcode.length === 8) {\r\n      let errDig = barcode.slice(-1);\r\n      message += 'Not valid control digit: ' + errDig + '\\r\\n';\r\n      message += validateBarcode(barcode.slice(0, -1));\r\n    } else if (barcode.length === 12 || barcode.length === 7) {\r\n      let newRes = 10 - res;\r\n      message += 'Need add control digit: ' + newRes;\r\n    } else {\r\n      message += 'Not valid Length barcode: ' + barcode.length;\r\n    }\r\n    return message;\r\n  }\r\n  return res;\r\n}\r\n\r\nexport function validateZeroData(curr, prev) {\r\n  for (let key in curr) {\r\n    /* let arrNotChanged = false;\r\n    if (Array.isArray(curr[key])) {\r\n      let compare = arrCompare(curr[key], prev[key]);\r\n      arrNotChanged = !compare.resArrMinus.length && !compare.resArrPlus.length;\r\n    } */\r\n\r\n    let isNotData =\r\n      curr[key] === null ||\r\n      curr[key] === undefined\r\n      // (curr.isNewData && !curr[key]);\r\n\r\n    // let isNotChanged = !curr.isNewData && curr[key] === prev[key];\r\n\r\n    if (/* arrNotChanged || */ isNotData /* || isNotChanged */) {\r\n        delete curr[key];\r\n    }\r\n  }\r\n}\r\n\r\nexport function validateRequiredData(body) {\r\n  const reqData = [\r\n    'type',\r\n    'name',\r\n    'price',\r\n    'measure_name',\r\n    'tax',\r\n    'allow_to_sell'\r\n  ]\r\n\r\n  let missData = [];\r\n\r\n  Object.keys(body).forEach(key => {\r\n    if (!body[key] && reqData.includes(key)) {\r\n      missData.push(key);\r\n    }\r\n  })\r\n\r\n  return missData;\r\n}\r\n\r\nexport function arrCompare(arr1 = [], arr2 = []) {\r\n  let resArrPlus = [];\r\n  arr2.forEach((item) => {\r\n    if (!arr1.includes(item)) {\r\n      resArrPlus.push(item);\r\n    }\r\n  });\r\n  let resArrMinus = [];\r\n  arr1.forEach((item) => {\r\n    if (!arr2.includes(item)) {\r\n      resArrMinus.push(item);\r\n    }\r\n  });\r\n  return { resArrPlus, resArrMinus };\r\n}\r\n","import React from 'react';\r\nimport schema from './products.json';\r\nimport { viewBarcode } from '../frmUtilites';\r\nimport Tree from '../../../common/Tree/Tree';\r\n\r\nexport const ComponentsProducts = {\r\n    MeasureNames: props => {\r\n        return (\r\n            <label>\r\n                Measure Name\r\n                <select name=\"measure_name\"\r\n                    id={props.id}\r\n                    value={props.measure_name}\r\n                    onChange={props.handleChange}\r\n                    disabled={props.disabled}>\r\n                    {\r\n                        schema.measure_names.map((m, i) => {\r\n                            return <option key={i} value={m}>{m}</option>\r\n                        })\r\n                    }\r\n                </select>\r\n            </label>\r\n        )\r\n    },\r\n    Types: props => {\r\n        return (\r\n            <label>\r\n                Type\r\n                <select name=\"type\"\r\n                    id={props.id}\r\n                    value={props.type}\r\n                    onChange={props.handleChange}\r\n                    disabled={props.disabled}>\r\n                    {\r\n                        schema.types.map((t, i) => {\r\n                            return <option key={i} value={t.type}>{t.description}</option>\r\n                        })\r\n                    }\r\n                </select>\r\n            </label>\r\n        )\r\n    },\r\n    Taxes: props => {\r\n        return (\r\n            <label>\r\n                Tax\r\n                <select name=\"tax\"\r\n                    id={props.id}\r\n                    value={props.tax}\r\n                    onChange={props.handleChange}\r\n                    disabled={props.disabled}>\r\n                    {\r\n                        schema.taxes.map((t, i) => {\r\n                            return <option key={i} value={t.tax}>{t.description}</option>\r\n                        })\r\n                    }\r\n                </select>\r\n            </label>\r\n        )\r\n    },\r\n    Groups: props => {\r\n        let groups = props.groups.sort((a, b) => {\r\n            if (a.label > b.label) return 1;\r\n            if (a.label < b.label) return -1;\r\n            return 0;\r\n        })\r\n        return (\r\n            <label>\r\n                Group:\r\n                <select name=\"parent_id\" id={props.id}\r\n                    value={props.parent_id} onChange={props.handleChange} disabled={props.disabled}>\r\n                    <option key='0' value='0'>Root</option>\r\n                    {groups.map(g => {\r\n                        return <option key={g.id} value={g.id}>{g.label}</option>\r\n                    })}\r\n                </select>\r\n            </label>\r\n        )\r\n    },\r\n    GroupsTree: props => {\r\n        // gProps = { groups: props.groups, disabled, handleChange, parent_id: state.parent_id, id: s.group }\r\n        let groups = props.groups;\r\n        let g = groups.find(item => item.id === props.parent_id);\r\n        let gLabel = g ? g.label : 'Root';\r\n        let onDivClick = props.disabled ? null : props.onClick;\r\n\r\n\r\n\r\n        return (\r\n            <>\r\n                {props.treeView &&\r\n                    <div className={props.classTree} onClick={props.closeTree}>\r\n                        <Tree data={props.groups} price=\"Price\" treeLabel=\"Groups\" callback={props.callbackTree} />\r\n                        <i className='fas fa-angle-down'></i>\r\n                    </div>\r\n                }\r\n                <div className={props.classDiv} onClick={onDivClick} tabIndex={-1} onBlur={props.onBlurGroup}>\r\n                    <div name='parent_id'>\r\n                        {gLabel}\r\n                        <i className='fa fa-angle-down'></i>\r\n                    </div>\r\n                </div >\r\n            </>\r\n        )\r\n    },\r\n    Barcodes: props => {\r\n\r\n        const delBcClick = ev => {\r\n            if (!props.allow_edit) return;\r\n            let elem;\r\n            if (ev.target.tagName === 'SPAN') {\r\n                elem = ev.target.closest('li');\r\n            }\r\n            if (!elem) return;\r\n            props.deleteFromArray(elem.id, 'barcodes');\r\n        }\r\n\r\n        return (\r\n            <fieldset name='img_barcodes'>\r\n                <legend>Barcodes</legend>\r\n                <div className={props.view_barcode}>\r\n                    <ul>\r\n                        {props.barcodes.map(b => {\r\n                            return (\r\n                                <li key={b} id={b} onClick={delBcClick}>{viewBarcode(b)}\r\n                                    <span className={props.delBc}></span>\r\n                                </li>\r\n                            )\r\n                        })}\r\n                    </ul>\r\n                    <input name='barcodes' type=\"text\" defaultValue={props.bc}\r\n                        onChange={props.handleChange} onBlur={props.handleBlur} disabled={props.disabled} />\r\n                    <span className={props.addBc}></span>\r\n                </div>\r\n            </fieldset >\r\n        )\r\n    },\r\n    Picture: props => {\r\n\r\n        return (\r\n            <div className={props.divPicture} onClick={props.pictureClick}>\r\n                <img id={props.photo} className={props.className}\r\n                    src={`/images/Price/${props.photo}`}\r\n                    alt=\"no\" tabIndex='-1'\r\n                />\r\n                <span></span>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport s from './TextArea.module.css';\r\n\r\nfunction TextArea(props) {\r\n\r\n  let placeholder;\r\n  let className;\r\n  if (props.placeholder) {\r\n    placeholder = props.placeholder;\r\n    className = s.wrong;\r\n  } else {\r\n    placeholder = \"add new ...\";\r\n    className = \"\";\r\n  }\r\n\r\n    return (\r\n        <textarea\r\n          name={props.name}\r\n          onChange={props.onChange}\r\n          onBlur={props.onBlur}\r\n          onKeyDown={props.onKeyDown}\r\n          ref={props.refrence}\r\n          wrap={\"hard\"}\r\n          value={props.value}\r\n          placeholder={placeholder}\r\n          className={className}\r\n          autoFocus\r\n        />\r\n    );\r\n}\r\nexport default TextArea;\r\n","import React from \"react\";\r\nimport s from './Form.module.css';\r\n\r\nconst FormImg = ({photo}) => {\r\n\r\n  return (\r\n    <>\r\n      <img className={s['big-img']}\r\n        src={photo}\r\n        alt=\"no\" tabIndex='-1'\r\n        style={{display: 'inline-block', height: '60vh',\r\n               position: 'fixed', top: '10vh', left: '30vw',\r\n               verticalAlign: 'middle'}}\r\n      /><span></span>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FormImg;\r\n","import React from 'react';\r\nimport s from './Form.module.css';\r\nimport { useState } from \"react\";\r\nimport Preloader from '../../common/Preloader/Preloader';\r\nimport { ComponentsProducts } from './schemas/ComponentsProducts';\r\nimport TextArea from '../../common/TextArea/TextArea';\r\nimport { setNewCode, newBarcode, validateBarcode, validateZeroData, validateRequiredData } from './frmUtilites';\r\nimport FormImg from './FormImg';\r\nimport FormModalWrapper from './FormModalWrapper';\r\nimport noPhoto from '../../../Assets/img/terminal-5.png';\r\n// import Tree from '../../common/Tree/Tree';\r\n\r\nconst FormProduct = props => {\r\n\r\n  let parentId = props.pid; /* props.formData.parent_id === null ? '0' : props.formData.parent_id; */\r\n  let isNewData = !props.formData.id;\r\n  const fileInput = React.createRef();\r\n  const [state, setState] = useState({\r\n    ...props.formData,\r\n    allow_edit: isNewData,\r\n    parent_id: parentId,\r\n    // photos: [...props.formData.photos],\r\n    // barcodes: [...props.formData.barcodes],\r\n    isNewData,\r\n    bigImg: null,\r\n    currentBarcode: '',\r\n    // treeView: false\r\n  });\r\n\r\n\r\n  if (!state.code) {\r\n    setNewCode().then(code => setState({ ...state, code }));\r\n  }\r\n\r\n  if (props.formError) {\r\n    let err = props.formError;\r\n    alert(err.message);\r\n    props.setFormError(null);\r\n  }\r\n\r\n  const disabled = !isNewData && !state.allow_edit;\r\n\r\n  const formChanged = () => {\r\n    let changes = [];\r\n    for (let key in props.formData) {\r\n      if (state[key] !== props.formData[key]) {\r\n        changes.push({ [key]: state[key] });\r\n      }\r\n    }\r\n    // console.log(changes);\r\n    if (changes.length === 1 && changes[0].code) changes = [];\r\n    return changes.length;\r\n  }\r\n\r\n  const formatPrice = price => {\r\n    return isFinite(price) ? Number(price).toFixed(2) : '0.00';\r\n  }\r\n\r\n  const handleChange = (ev) => {\r\n\r\n    let elem = ev.target;\r\n    let name = elem.name;\r\n    let value = elem.value;\r\n\r\n    elem.classList.remove(s.required);\r\n\r\n    if (name === 'barcodes') {\r\n      if (state.barcodes.includes(value)) {\r\n        alert(`Barcode ${value} is exist in this product!`);\r\n        return;\r\n      }\r\n      setState({ ...state, currentBarcode: value });\r\n      return;\r\n    } else if (name === 'picture') {\r\n      let photos = state.photos;\r\n      Array.from(fileInput.current.files).forEach(item => {\r\n        photos.push(item.name);\r\n      })\r\n      setState({ ...state, photos });\r\n      return;\r\n    } else if (name === 'allow_edit') {\r\n      let form = document.getElementById(s['form-product']);\r\n      Object.values(form.elements).forEach(item => {\r\n        if (item.disabled && item.id !== s.uuid) item.removeAttribute('disabled');\r\n      })\r\n      setState({...state, allow_edit: true});\r\n      form.allow_edit.parentNode.remove();\r\n    } else {\r\n      setState({ ...state, [name]: value });\r\n    }\r\n  }\r\n\r\n  const handleBlur = ev => {\r\n    let name = ev.target.name || ev.currentTarget.name;\r\n    let value = ev.target.value || ev.currentTarget.value;\r\n\r\n    if (name === 'barcodes') {\r\n      let newValue;\r\n      if (!value) {\r\n        let prefix = window.prompt(`Введите префикс!\\r\\n\r\n          Рекомендуется последние 4 цифры ИНН.\\r\\n\r\n          По умолчанию -> '0000'`, '7321');\r\n        // if (!prefix || !isFinite(prefix)) prefix = '0000';\r\n        newValue = newBarcode(state.code, prefix);\r\n        if (state.barcodes.includes(newValue)) {\r\n          console.warn(`Barcode ${newValue} is Exist!`)\r\n          return;\r\n        }\r\n\r\n      }\r\n      let valBc = validateBarcode(value || newValue);\r\n      if (valBc !== 0) {\r\n        window.alert(valBc);\r\n        return;\r\n      }\r\n      let barcodes = [...state.barcodes, state.currentBarcode || newValue];\r\n      setState({ ...state, barcodes });\r\n      ev.target.value = '';\r\n      return;\r\n    }\r\n\r\n    if (name === 'price' || name === 'cost_price') {\r\n      value = isFinite(value) ? Number(value) : 0;\r\n    }\r\n    setState({ ...state, [name]: value });\r\n    ev.target.value = formatPrice(value);\r\n  }\r\n\r\n  const handleSubmit = (ev) => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    if (state.allow_edit && formChanged() && window.confirm('Save changes')) {\r\n\r\n      let body = { ...state };\r\n      if (body.parent_id === '0' || body.parent_id === 0) {\r\n        delete body.parent_id;\r\n      }\r\n      delete body.createdAt;\r\n      delete body.updatedAt;\r\n      delete body.allow_edit;\r\n      delete body.bigImg;\r\n      delete body.currentBarcode;\r\n      delete body.treeView;\r\n\r\n      let missData = validateRequiredData(body);\r\n      if (missData.length) {\r\n        let strMessage = '';\r\n        missData.forEach(item => {\r\n          strMessage += ` ${item},`;\r\n          document.getElementsByName(item).forEach(elem => {\r\n            elem.classList.add(s.required);\r\n          })\r\n        });\r\n        strMessage.slice(-1);\r\n        alert(`Отсутствуют необходимые данные:\\n\\r${strMessage}!`);\r\n        return;\r\n      }\r\n\r\n      validateZeroData(body, props.formData);\r\n      if (!state.isNewData) body.id = state.id;\r\n      delete body.isNewData;\r\n\r\n      // alert(JSON.stringify(body, null, 2));\r\n\r\n      let i = 0;\r\n      Object.keys(body).forEach(item => i++);\r\n      if (i <= 1) {\r\n        alert('Данные не изменились!');\r\n        return;\r\n      }\r\n      let typeQuery = !state.isNewData ? 'put' : 'post';\r\n      props.postFormData('product', typeQuery, body);\r\n      props.toggleFormPost(true);\r\n    } else {\r\n      props.setFormData();\r\n      props.setViewForm(false);\r\n    }\r\n    document.body.style.overflow = 'auto';\r\n  }\r\n\r\n  const canselClick = (ev) => {\r\n    props.setViewForm(false);\r\n    props.setFormData(null);\r\n    document.body.style.overflow = 'auto';\r\n  }\r\n\r\n  const pictureClick = ev => {\r\n    let p = ev.target;\r\n    if (p.tagName === 'SPAN') {\r\n      if (!state.allow_edit) return;\r\n      let prevElem = p.previousElementSibling;\r\n      deleteFromArray(prevElem.id, 'photos');\r\n      return;\r\n    }\r\n    p.addEventListener('blur', () => {\r\n      setState({ ...state, bigImg: null })\r\n      p.removeEventListener('blur', this);\r\n    })\r\n    setState({ ...state, bigImg: p.src })\r\n  }\r\n\r\n  const onPicInputClick = ev => {\r\n    ev.preventDefault();\r\n    let picInput = document.getElementById('picInput');\r\n    picInput.click();\r\n  }\r\n\r\n  const deleteFromArray = (elemId, arrName) => {\r\n    let i = state[arrName].findIndex(item => item === elemId);\r\n    let arr = state[arrName];\r\n    arr.splice(i, 1);\r\n    setState({ ...state, [arrName]: arr });\r\n  }\r\n\r\n  const [pId, setPid] = useState(parentId);\r\n\r\n  const [treeView, setTreeView] = useState(false);\r\n\r\n  const callbackTree = (eId) => {\r\n    let parent_id = eId ? eId : 0;\r\n    setPid(parent_id);\r\n  }\r\n\r\n  const clickGroups = () => {\r\n    setTreeView(!treeView);\r\n  }\r\n\r\n  const onBlurGroup = () => {\r\n    setState({ ...state, parent_id: pId });\r\n  }\r\n\r\n  const closeTree = e => {\r\n    if (e.target.tagName !== 'I') return;\r\n    setState({ ...state, parent_id: pId });\r\n    setTreeView(false);\r\n  }\r\n\r\n  const gProps = {\r\n    groups: props.groups, disabled, parent_id: pId, onClick: clickGroups, onBlurGroup,\r\n    treeView, classDiv: s['g-tree'], classTree: s.tree, callbackTree, closeTree\r\n  };\r\n\r\n  const mnProps = { disabled, handleChange, id: s.measure_name, measure_name: state.measure_name };\r\n  const tProps = { disabled, handleChange, id: s.type, type: state.type };\r\n  const taxProps = { disabled, handleChange, id: s.tax, tax: state.tax };\r\n\r\n  const bProps = {\r\n    barcodes: state.barcodes, bc: state.currentBarcode, addBc: s['add-bc'], delBc: s['del-bc'],\r\n    handleChange, handleBlur, deleteFromArray, allow_edit: state.allow_edit, disabled,\r\n    view_barcode: s['view-barcode']\r\n  };\r\n\r\n  const pProps = { id: s.picture, className: s['picture-small'], divPicture: s['div-picture'], pictureClick };\r\n\r\n  if (props.formPost) {\r\n    return <Preloader />\r\n  } else {\r\n    return (\r\n      <>\r\n        {state.bigImg &&\r\n          <FormModalWrapper\r\n            form={<FormImg photo={state.bigImg} />}\r\n          />}\r\n        <form id={s['form-product']} onSubmit={handleSubmit} >\r\n          <div className={s['menu-buttons']}><span className='fa fa-window-close' onClick={handleSubmit}></span></div>\r\n          <fieldset name='Product'>\r\n            <legend>Product Info</legend>\r\n            <div>\r\n              <b>ID: </b><input id={s.uuid} value={state.id || ''} disabled={!isNewData} onChange={handleChange} />\r\n              {\r\n                state.isNewData ? null :\r\n                  <label>\r\n                    Allow Edit:\r\n            <input type='checkbox' id={s['allow-edit']} name={'allow_edit'} checked={state.allow_edit} onChange={handleChange} />\r\n                  </label>\r\n              }\r\n            </div>\r\n            <div>\r\n              {\r\n                !state.photos?.length ?\r\n                  // <ComponentsProducts.Picture {...pProps} photo='image3D.png' /> :\r\n                  <div><img src={noPhoto} alt=\"NoPhotos\" className={s['picture-small']} /></div> :\r\n                  state.photos.map(ph => {\r\n                    return <ComponentsProducts.Picture {...pProps} photo={ph} key={ph} />\r\n                  })\r\n              }\r\n            </div>\r\n            {\r\n              state.photo || !state.allow_edit ? null :\r\n                <>\r\n                  <input type=\"file\" name=\"picture\" id='picInput' multiple={true}\r\n                    onChange={handleChange} ref={fileInput} style={{ display: 'none' }} />\r\n                  <label htmlFor=\"picture\" onClick={onPicInputClick}>Input Image</label>\r\n                </>\r\n            }\r\n            <ComponentsProducts.Barcodes {...bProps} />\r\n            <div className={s.code_article}>\r\n              <label>Code:</label>\r\n              <input type=\"text\" name=\"code\" value={state.code} onChange={handleChange} disabled={disabled} />\r\n              <label>Aticle:</label>\r\n              <input type=\"text\" name='article_number' value={state.article_number || ''}\r\n                onChange={handleChange} disabled={disabled} />\r\n            </div>\r\n            <div className={s.propertyes}>\r\n              <ComponentsProducts.MeasureNames {...mnProps} />\r\n              <ComponentsProducts.Types {...tProps} />\r\n              <ComponentsProducts.Taxes {...taxProps} />\r\n            </div>\r\n            <ComponentsProducts.GroupsTree {...gProps} />\r\n            <label>\r\n              Name:\r\n              <TextArea name=\"name\" value={state.name} placeholder='Input name ...' onChange={handleChange} disabled={disabled} />\r\n            </label>\r\n            <label>Description:\r\n              <input type=\"text\" name=\"description\" value={state.description || ''} onChange={handleChange} disabled={disabled} />\r\n            </label>\r\n            <div className={s.prices}>\r\n              <label htmlFor='price'>Price:</label>\r\n              <input name=\"price\" defaultValue={formatPrice(state.price)} className={s.price}\r\n                onBlur={handleBlur} onChange={handleChange} disabled={disabled} /><span></span>\r\n              <label htmlFor='cost_price'>Cost Price:</label>\r\n              <input name=\"cost_price\" defaultValue={formatPrice(state.cost_price)} className={s.price}\r\n                onBlur={handleBlur} disabled={disabled} /><span></span>\r\n              <label>Allow to sell:</label>\r\n              <input type=\"checkbox\" name=\"allow_to_sell\" defaultChecked={state.allow_to_sell} disabled={disabled} />\r\n            </div>\r\n          </fieldset>\r\n          <div className={s.buttons}>\r\n            <input type=\"submit\" value=\"Ready\" />\r\n            <button id={s.cansel} onClick={canselClick}>Cansel</button>\r\n          </div>\r\n        </form>\r\n      </>\r\n    );\r\n  }\r\n}\r\nexport default FormProduct;\r\n","import React from \"react\";\r\nimport s from \"./Commodity.module.css\";\r\nimport Tree from \"../common/Tree/Tree\";\r\nimport ListCommodities from \"./ListCommodities/ListCommodities\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport FormModalWrapper from \"./Forms/FormModalWrapper\";\r\nimport FormProduct from \"./Forms/FormProduct\";\r\n\r\nconst Commodity = props => {\r\n\r\n  if (!props.isLoaded) {\r\n    props.setPid('0');\r\n    props.getGroups();\r\n  }\r\n  if (!props.comIsLoaded) {\r\n    props.getProducts(props.pid);\r\n  }\r\n\r\n  if (props.error) {\r\n    alert(`${props.error.name}\\n\\r${props.error.message}`);\r\n    props.setError(null);\r\n  }\r\n\r\n  function newData() {\r\n    props.getProductId('');\r\n  }\r\n\r\n  const changePid = eId => {\r\n    if (props.pid === eId) return;\r\n    props.setPid(eId);\r\n  }\r\n\r\n  if (props.error) {\r\n    return <div>Ошибка...{props.error.message}</div>;\r\n  } else if (!props.isLoaded) {\r\n    return <Preloader />\r\n  } else {\r\n    return (\r\n      <>\r\n        <div className={s.head}>\r\n          <div className={s.buttons}>\r\n            <button onClick={newData}>New Product</button>\r\n          </div>\r\n        </div>\r\n        {props.viewForm ?\r\n          // <FormProductFormik />\r\n          <FormModalWrapper\r\n            form={\r\n              <FormProduct\r\n                groups={props.groups}\r\n                formData={props.formData}\r\n                formPost={props.formPost}\r\n                formError={props.formError}\r\n                setViewForm={props.setViewForm}\r\n                setFormData={props.setFormData}\r\n                toggleFormPost={props.toggleFormPost}\r\n                postFormData={props.postFormData}\r\n                setFormError={props.setFormError}\r\n                pid={props.pid}\r\n              />\r\n            }\r\n          />\r\n          : null}\r\n        <div className={s.container}>\r\n          <Tree data={props.groups} price=\"Price\" treeLabel=\"Groups\" /* handleClick={handleClick} */ callback={changePid} pId={props.pid} />\r\n          <div className={s.list}>\r\n            <h3>Commodities</h3>\r\n            <ListCommodities\r\n              commodities={props.commodities}\r\n              comIsLoaded={props.comIsLoaded}\r\n              error={props.error}\r\n              getProductId={props.getProductId}\r\n              deleteProduct={props.deleteProduct}\r\n              pid={props.pid}\r\n            />\r\n          </div>\r\n\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n};\r\n\r\nexport default Commodity;\r\n","import api_v2 from './api_v2_axios.json';\r\n\r\nasync function createRequest(action) {\r\n\r\n  api_v2.headers['X-Authorization'] = localStorage.appKey;\r\n\r\n  action.storeUuid = localStorage.storeKey;\r\n\r\n  api_v2.params = action.cursor ? { cursor: action.cursor } : null;\r\n\r\n  let request = selectOption(action);\r\n\r\n  return { ...request, action: action.type };\r\n}\r\n\r\nfunction selectOption(action) {\r\n  let url, method, body, headers;\r\n\r\n  switch (action.type) {\r\n    case 'store_v2':\r\n      url = 'stores';\r\n      return { ...api_v2, method: 'GET', url };\r\n\r\n    case 'bulks_v1':\r\n      if (action.value) {\r\n        url = 'bulks/' + action.value;\r\n      } else {\r\n        url = 'bulks';\r\n      }\r\n      return { ...api_v2, method: 'GET', url };\r\n\r\n    /* Получить товар по ID или все товары */\r\n    case 'products_v2':\r\n      method = 'GET';\r\n      url = 'stores/' + action.storeUuid + '/products';\r\n      if (action.value) {\r\n        url += '/' + action.value;\r\n        action.value = '';\r\n      }\r\n      return { ...api_v2, method, url };\r\n    /*-------------------------------------*/\r\n\r\n    /* Получить группу по ID или список групп */\r\n    case 'groups_v2':\r\n      method = 'GET';\r\n      if (action.value) {\r\n        url = 'stores/' + action.storeUuid + '/product-groups/' + action.value;\r\n        action.value = '';\r\n      } else {\r\n        url = 'stores/' + action.storeUuid + '/product-groups';\r\n      }\r\n      return { ...api_v2, method, url };\r\n    /*--------------------------------------*/\r\n\r\n    /* Получить документы (за пред. месяц, продажа) */\r\n    case 'documents_v2':\r\n      method = 'GET';\r\n      if (action.value) {\r\n        url = 'stores/' + action.storeUuid + '/documents/' + action.value;\r\n      } else {\r\n        url = 'stores/' + action.storeUuid + '/documents';\r\n        if (!api_v2.cursor) {\r\n          let date = new Date();\r\n          date.setMonth(date.getMonth() - 1);\r\n          url += `?since=${date.getTime()}&type=SELL`;\r\n        }\r\n      }\r\n      return { ...api_v2, method, url };\r\n    /*----------------------------------------------*/\r\n\r\n    case 'put_product_v2':\r\n      method = 'PUT';\r\n      url =\r\n        'stores/' + action.storeUuid + '/products/' + action.body.id;\r\n      body = JSON.stringify(action.body);\r\n      return { ...api_v2, method, url, body };\r\n\r\n    case 'post_product_v2':\r\n      method = 'POST';\r\n      url = 'stores/' + action.storeUuid + '/products';\r\n      body = JSON.stringify(action.body);\r\n      return { ...api_v2, method, url, body };\r\n\r\n    case 'delete_product_v2':\r\n      method = 'DELETE';\r\n      url = 'stores/' + action.storeUuid + '/products/' + action.id;\r\n      return { ...api_v2, method, url };\r\n\r\n    case 'put_array_products_v2':\r\n      if (!action.body || !action.body.length) {\r\n        return {};\r\n      }\r\n      method = 'PUT';\r\n      headers = {\r\n        ...api_v2.headers,\r\n        'Content-Type': 'application/vnd.evotor.v2+bulk+json',\r\n      };\r\n      url = 'stores/' + action.storeUuid + '/products';\r\n      body = JSON.stringify(action.body);\r\n      return { ...api_v2, method, headers, url, body };\r\n\r\n    case 'put_array_groups_v2':\r\n      method = 'PUT';\r\n      headers = {\r\n        ...api_v2.headers,\r\n        'Content-Type': 'application/vnd.evotor.v2+bulk+json',\r\n      };\r\n      url = 'stores/' + action.storeUuid + '/product-groups';\r\n      body = JSON.stringify(action.body);\r\n      return { ...api_v2, method, headers, url, body };\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nexport default createRequest;\r\n","import { default as Axios } from 'axios';\r\n\r\nasync function fetchEvo({\r\n  baseURL,\r\n  url,\r\n  headers,\r\n  method,\r\n  body,\r\n  params,\r\n  action,\r\n}) {\r\n  try {\r\n    let request = { baseURL, url, headers, method, params };\r\n    // console.log(request);\r\n    if (body) {\r\n      request.data = body;\r\n    }\r\n    let response = await Axios(request);\r\n    let result;\r\n    if (method === 'DELETE') {\r\n      result = response;\r\n    } else {\r\n      result = await response.data;\r\n    }\r\n    if (result.paging && result.paging.next_cursor) {\r\n      request.params = { cursor: result.paging.next_cursor };\r\n      let response = await fetchEvo(request);\r\n      result.items = result.items.concat(response.items);\r\n    }\r\n    result.paging = {};\r\n    return result;\r\n  } catch (err) {\r\n    return err;\r\n  }\r\n}\r\n\r\nexport default fetchEvo;\r\n","import { createRequest, fetchEvo } from './api_evotor';\r\n\r\nexport const apiForIdb = {\r\n\r\n  async getStores() {\r\n    let request = await createRequest({ type: 'store_v2' });\r\n    let stores = await fetchEvo(request);\r\n    return stores.items;\r\n  },\r\n\r\n  async getGroupsEvo() {\r\n    let request = await createRequest({ type: 'groups_v2' });\r\n    return await fetchEvo(request);\r\n  },\r\n\r\n  async getProductsEvo() {\r\n    let request = await createRequest({ type: 'products_v2' });\r\n    return await fetchEvo(request);\r\n  },\r\n\r\n  async postData(path, body) {\r\n    let request = await createRequest({ type: `post_${path}_v2`, body });\r\n    return await fetchEvo(request);\r\n  },\r\n  async putData(path, body) {\r\n    let request = await createRequest({ type: `put_${path}_v2`, body });\r\n    return await fetchEvo(request);\r\n  },\r\n  async deleteData(path, id) {\r\n    let request = await createRequest({ type: `delete_${path}_v2`, id });\r\n    return await fetchEvo(request);\r\n  },\r\n};\r\n","import { deleteDB, openDB } from 'idb';\r\n\r\nexport async function initDb() {\r\n  const db = await openDB('Evo', 3, {\r\n    async upgrade(db, oldVersion, newVersion) {\r\n      if (oldVersion < newVersion) {\r\n        alert('База данных будет обновлена до версии: ' + newVersion);\r\n        // await db.delete();\r\n        console.log(`New version: ${newVersion}`);\r\n      }\r\n      if (!db.objectStoreNames.contains('groups')) {\r\n        const store = db.createObjectStore('groups', { keyPath: 'id' });\r\n        store.createIndex('name', 'name');\r\n        store.createIndex('date', 'created_at');\r\n      }\r\n      if (!db.objectStoreNames.contains('products')) {\r\n        const store = db.createObjectStore('products', { keyPath: 'id' });\r\n        store.createIndex('name', 'name');\r\n        store.createIndex('date', 'created_at');\r\n        store.createIndex('parent_id', 'parent_id');\r\n        store.createIndex('code', 'code');\r\n        store.createIndex('price', 'price');\r\n      }\r\n    },\r\n  });\r\n\r\n  return db;\r\n}\r\n\r\nexport async function getGroup(id) {\r\n  const db = await initDb();\r\n  let group;\r\n  if (id === 'all') {\r\n    group = await db.getAll('groups');\r\n  } else {\r\n    group = await db.get('groups', id);\r\n  }\r\n  return group;\r\n}\r\nexport async function getProduct(id) {\r\n  const db = await initDb();\r\n  let product;\r\n  if (id === 'all') {\r\n    product = await db.getAll('products');\r\n  } else {\r\n    product = await db.get('products', id);\r\n  }\r\n  return product;\r\n}\r\n\r\nexport async function getProductsPid(pid) {\r\n  const db = await initDb();\r\n  const products = await db.getAllFromIndex('products', 'parent_id', pid);\r\n  return products;\r\n}\r\n\r\nexport async function pushItems(store, items) {\r\n  let resItems = [];\r\n  items.forEach((item) => {\r\n    resItems.push(item);\r\n  });\r\n  /* Init IDB */\r\n  const db = await initDb();\r\n  const tx = db.transaction(store, 'readwrite');\r\n  const promises = resItems.map((item) => {\r\n    return tx.store.put(item);\r\n  });\r\n  promises.push(tx.done);\r\n  await Promise.all(promises);\r\n}\r\n\r\nexport async function delDb(nameDb) {\r\n  await deleteDB(nameDb);\r\n}\r\n\r\nexport async function putData(storeName, data) {\r\n  const db = await initDb();\r\n  await db.put(storeName, data);\r\n  return data;\r\n}\r\n\r\nexport async function deleteData(storeName, id) {\r\n  const db = await initDb();\r\n  await db.delete(storeName, id);\r\n  return id;\r\n}\r\n","export class SequelizeError extends Error {};\r\n\r\nexport class SequelizeValidationError extends SequelizeError {\r\n  constructor(errors = []) {\r\n    super(`Ошибка базы данных:\\n\\r ${errors[0].message}`);\r\n    this.name = 'SequelizeValidationError';\r\n    this.errors = errors;\r\n  }\r\n}\r\nexport class SequelizeUniqueConstraintError extends SequelizeError {\r\n  constructor(errors = []) {\r\n    super(\r\n      `Ошибка уникальности ключа:\r\n        ${errors[0].path}: ${errors[0].value}\r\n        Попробуйте обновить данные с помощью метода PUT`,\r\n    );\r\n    this.name = 'SequelizeUniqueConstraintError';\r\n    this.errors = errors;\r\n  }\r\n}\r\n","export class EvoError extends Error {}\r\n\r\nexport class EvoValidationError extends EvoError {\r\n  constructor(err) {\r\n    let message = err.message;\r\n    err.errors.forEach((item) => {\r\n      message += `\\n${item.subject.toUpperCase()} -> ${item.reason}`;\r\n    });\r\n    super(`Ошибка записи в облако!\\n${message}`);\r\n    this.name = 'EvoValidationError';\r\n    this.errors = err.errors;\r\n  }\r\n}\r\n","import { SequelizeValidationError, SequelizeUniqueConstraintError } from \"./SequelizeErrors\";\r\nimport { /* EvoError, */ EvoValidationError } from \"./EvoErrors\";\r\n\r\nexport const chooseError = (err) => {\r\n    let res = err.response;\r\n    if (res.data.name === 'SequelizeValidationError') {\r\n      return new SequelizeValidationError(res.data.errors);\r\n    } else if (res.data.name === 'SequelizeUniqueConstraintError') {\r\n      return new SequelizeUniqueConstraintError(res.data.errors);\r\n    } else if (res.data.name === 'validation_failed') {\r\n      return new EvoValidationError({ message: res.data.message, errors: res.data.errors});\r\n    } else {\r\n        return new Error(res.data.message);\r\n    }\r\n};\r\n","import { apiForIdb } from '../api/api';\r\nimport { deleteData, getGroup, getProduct, getProductsPid, putData } from '../api/apiIDB';\r\nimport { chooseError } from '../components/Errors/chooseError';\r\n\r\nconst GET_GROUPS = 'GET-GROUPS';\r\nconst SET_PID = 'SET-PID';\r\nconst GET_COMMODITIES = 'GET-COMMODITIES';\r\nconst SET_ERROR = 'SET-ERROR';\r\nconst UPDATE_COMMODITY = 'UPDATE-COMMODITY';\r\nconst SET_UPDATED = 'SET-UPDATED';\r\nconst VIEW_FORM = 'VIEW-FORM';\r\nconst SET_FORM_DATA = 'SET-FORM-DATA';\r\nconst TOGGLE_FORM_POST = 'TOGGLE-FORM-POST';\r\nconst SET_FORM_ERROR = 'SET-FORM-ERROR';\r\nconst SET_APP_KEY = 'SET-APP-KEY';\r\n\r\nexport const getGroupsAC = (groups) => {\r\n  return { type: GET_GROUPS, groups };\r\n};\r\n\r\nexport const setPidAC = (pid) => {\r\n  return { type: SET_PID, pid: pid };\r\n};\r\n\r\nexport const getCommoditiesAC = (commodities) => {\r\n  return { type: GET_COMMODITIES, commodities };\r\n};\r\n\r\nexport const setErrorAC = (error) => {\r\n  return { type: SET_ERROR, error };\r\n};\r\n\r\nexport const setFormErrorAC = (error) => {\r\n  return { type: SET_FORM_ERROR, error };\r\n};\r\n\r\nexport const updateCommodityAC = () => {\r\n  return { type: UPDATE_COMMODITY };\r\n};\r\n\r\nexport const setUpdatedAC = (update) => {\r\n  return { type: SET_UPDATED, update };\r\n};\r\n\r\nexport const viewFormAC = (view) => {\r\n  return { type: VIEW_FORM, viewForm: view };\r\n};\r\n\r\nexport const setFormDataAC = (formData) => {\r\n  formData = formData === null ? initialState.form.formData : formData;\r\n  return { type: SET_FORM_DATA, formData };\r\n};\r\n\r\nexport const toggleFormPostAC = (formPost) => {\r\n  return { type: TOGGLE_FORM_POST, formPost };\r\n};\r\n\r\nexport const setAppKeyAC = (key) => {\r\n  return { type: SET_APP_KEY, key };\r\n};\r\n\r\nlet initialState = {\r\n  groups: [],\r\n  commodities: [],\r\n  pid: null,\r\n  isLoaded: false,\r\n  comIsLoaded: false,\r\n  error: null,\r\n  lastUpdate: 1585166400000,\r\n  isUpdated: false,\r\n  viewForm: false,\r\n  form: {\r\n    formData: {\r\n      id: null,\r\n      name: '',\r\n      code: '',\r\n      measure_name: 'шт',\r\n      tax: 'NO_VAT',\r\n      allow_to_sell: true,\r\n      description: '',\r\n      article_number: '',\r\n      // parent_id: null,\r\n      type: 'NORMAL',\r\n      price: 0,\r\n      cost_price: 0,\r\n      quantity: 0,\r\n      photos: [],\r\n      barcodes: [],\r\n    },\r\n    formPost: false,\r\n    resMessage: null,\r\n    formError: null,\r\n  },\r\n};\r\n\r\nconst commodityReduser = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case GET_GROUPS:\r\n      let groups = [];\r\n      action.groups.forEach((item) => {\r\n        let group = {\r\n          id: item.id,\r\n          pid: item.parent_id ? item.parent_id : null,\r\n          label: item.name,\r\n          // code: Date.parse(item.createdAt)\r\n        };\r\n        groups.push(group);\r\n      });\r\n      // groups.sort((a,b) => a.code - b.code);\r\n      return { ...state, groups: groups, isLoaded: true };\r\n\r\n    case SET_PID:\r\n      return Object.assign({}, state, {\r\n        pid: action.pid,\r\n        comIsLoaded: false,\r\n      });\r\n\r\n    case GET_COMMODITIES:\r\n      let commodities = [];\r\n      action.commodities.forEach((item) => {\r\n        // if (item.g) return;\r\n        let commodity = {\r\n          uuid: item.id,\r\n          code: item.code,\r\n          label: item.name,\r\n          price: item.price,\r\n        };\r\n        commodities.push(commodity);\r\n      });\r\n      return Object.assign({}, state, {\r\n        commodities: commodities,\r\n        comIsLoaded: true,\r\n      });\r\n\r\n    case SET_ERROR:\r\n      return Object.assign({}, state, {\r\n        error: action.error,\r\n      });\r\n\r\n    case SET_FORM_ERROR:\r\n      return { ...state, form: { ...state.form, formError: action.error } };\r\n\r\n    case UPDATE_COMMODITY:\r\n      let lastUpdate = Date.now();\r\n      if (!state.updateOk) {\r\n        lastUpdate = state.lastUpdate;\r\n      } else {\r\n        lastUpdate = Date.now();\r\n      }\r\n      return { ...state, lastUpdate };\r\n\r\n    case SET_UPDATED:\r\n      return { ...state, isUpdated: action.update };\r\n\r\n    case VIEW_FORM:\r\n      return { ...state, viewForm: action.viewForm };\r\n\r\n    case TOGGLE_FORM_POST:\r\n      return { ...state, form: { ...state.form, formPost: action.formPost } };\r\n\r\n    case SET_FORM_DATA:\r\n      return { ...state, form: { ...state.form, formData: action.formData } };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const getProducts = (pId) => {\r\n  return (dispatch) => {\r\n    getProductsPid(pId)\r\n      .then((res) => dispatch(getCommoditiesAC(res)));\r\n  };\r\n};\r\n\r\nexport const getProductId = (id) => {\r\n  if (!id) return (dispatch) => dispatch(viewFormAC(true));\r\n  return (dispatch) => {\r\n    getProduct(id)\r\n      .then((res) => {\r\n        dispatch(setFormDataAC(res));\r\n        return true;\r\n      })\r\n      .then((result) => {\r\n        if (result) dispatch(viewFormAC(true));\r\n      });\r\n  };\r\n};\r\n\r\nexport const getGroups = () => {\r\n  return (dispatch) => {\r\n    getGroup('all').then((res) => {\r\n      let groups = res.map((item) => {\r\n        return {\r\n          ...item,\r\n          pid: item.parent_id ? item.parent_id : null,\r\n          label: item.name,\r\n        };\r\n      });\r\n      dispatch(getGroupsAC(groups));\r\n    });\r\n  };\r\n};\r\n\r\nexport const updateProducts = (pId) => {\r\n  return (dispatch) => {\r\n    // productsApi.getData('products/update').then((res) => {\r\n    //   dispatch(updateCommodityAC());\r\n    //   dispatch(setUpdatedAC(false));\r\n      alert(`Updated at ${Date()}`);\r\n      dispatch(setPidAC(pId || 0));\r\n    // });\r\n  };\r\n};\r\n\r\nexport const setUpdated = (updated) => (dispatch) =>\r\n  dispatch(setUpdatedAC(updated));\r\n\r\nexport const setViewForm = (view) => (dispatch) => dispatch(viewFormAC(view));\r\n\r\nexport const setFormData = (formData) => (dispatch) => {\r\n  formData = formData ? formData : initialState.form.formData;\r\n  dispatch(setFormDataAC(formData));\r\n};\r\n\r\nexport const postFormData = (typeData, typeQuery, body) => (dispatch) => {\r\n  // debugger\r\n  let path;\r\n  switch (typeData) {\r\n    case 'product':\r\n      path = 'product';\r\n      break;\r\n    case 'group':\r\n      path = 'group';\r\n      break;\r\n    default:\r\n      path = 'product';\r\n      break;\r\n  }\r\n  let callbackApi;\r\n  switch (typeQuery) {\r\n    case 'post':\r\n      callbackApi = apiForIdb.postData;\r\n      break;\r\n    case 'put':\r\n      callbackApi = apiForIdb.putData;\r\n      break;\r\n    default:\r\n      callbackApi = apiForIdb.postData;\r\n      break;\r\n  }\r\n  callbackApi(path, body)\r\n    .then(res => {\r\n      putData(`${path}s`, res);\r\n      return res;\r\n    })\r\n    .then((res) => {\r\n      // console.log(res);\r\n      return res.parent_id;\r\n    })\r\n    .then((pid) => {\r\n      dispatch(toggleFormPostAC(false));\r\n      dispatch(viewFormAC(false));\r\n      dispatch(setFormDataAC(initialState.form.formData));\r\n      dispatch(setPidAC(pid || 0));\r\n    })\r\n    .catch((err) => {\r\n      console.dir(err);\r\n      dispatch(setFormErrorAC(chooseError(err)));\r\n      dispatch(toggleFormPostAC(false));\r\n    });\r\n}\r\n\r\nexport const deleteProduct = (id, pid) => async (dispatch) => {\r\n  try {\r\n    let res = await apiForIdb.deleteData('product', id);\r\n    console.log(res.status)\r\n    await deleteData('products', id);\r\n    dispatch(setPidAC(pid));\r\n    return id;\r\n  } catch (err) {\r\n    console.dir(err);\r\n    dispatch(setErrorAC(chooseError(err)));\r\n  }\r\n}\r\n\r\nexport default commodityReduser;\r\n","import Commodity from \"./Commodity\";\r\nimport { setPidAC, getGroups, getProducts,\r\n  setViewForm, getProductId, deleteProduct,setFormData,\r\n  toggleFormPostAC, postFormData, setFormErrorAC, setErrorAC } from \"../../redux/commodityReduser\";\r\nimport { connect } from \"react-redux\";\r\nimport { compose } from \"redux\";\r\n\r\nconst mapState = state => {\r\n  state = state.commodityPage;\r\n  return {\r\n    isLoaded: state.isLoaded,\r\n    groups: state.groups,\r\n    price: \"Price\",\r\n    pid: state.pid,\r\n    commodities: state.commodities,\r\n    comIsLoaded: state.comIsLoaded,\r\n    error: state.error,\r\n    viewForm: state.viewForm,\r\n    formData: state.form.formData,\r\n    formPost: state.form.formPost,\r\n    formError: state.form.formError\r\n  };\r\n};\r\n\r\nconst setPid = (pId) => {\r\n  return (dispatch) => {\r\n    dispatch(setPidAC(pId));\r\n  };\r\n};\r\n\r\nconst toggleFormPost = formPost => {\r\n  return dispatch => dispatch(toggleFormPostAC(formPost));\r\n}\r\n\r\nconst setFormError = err => {\r\n  return dispatch => dispatch(setFormErrorAC(err));\r\n}\r\n\r\nconst setError = err => {\r\n  return dispatch => dispatch(setErrorAC(err));\r\n}\r\n\r\nexport default compose(\r\n  connect(mapState, {\r\n  getGroups,\r\n  getProducts,\r\n  setPid,\r\n  setViewForm,\r\n  getProductId,\r\n  deleteProduct,\r\n  setFormData,\r\n  toggleFormPost,\r\n  postFormData,\r\n  setFormError,\r\n  setError\r\n})\r\n)(Commodity);\r\n","import React from \"react\";\r\nimport s from \"../ImpExcel.module.css\";\r\n\r\nconst News = props => {\r\n  let element;\r\n\r\n  element = (\r\n    <div >\r\n      {props.name}<hr />\r\n      {props.description}<hr />\r\n      {props.article}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <article className={s.article}>\r\n      {/* {props.index}\r\n      {rowsElements} */}\r\n      <h3>{props.index}</h3>\r\n      {element}\r\n    </article>\r\n  );\r\n};\r\nexport default News;\r\n","import React from \"react\";\r\nimport News from \"./News/News\";\r\nimport s from \"./ImpExcel.module.css\";\r\nimport readXlsxFile from \"read-excel-file\";\r\nimport { useState } from \"react\";\r\n\r\nconst ImpExcel = props => {\r\n\r\n  const [childElements, setChildElements] = useState([]);\r\n\r\n  let elements = [];\r\n\r\n  const inpChange = (e) => {\r\n    readXlsxFile(e.target.files[0]).then(rows => {\r\n      rows.forEach((item, idx) => {\r\n        if (!idx) return;\r\n        const element = <News\r\n          index={item[3]}\r\n          key={item[0]}\r\n          name={item[1]}\r\n          description={item[8]}\r\n          article={item[9]} />;\r\n        elements.push(element);\r\n      });\r\n    }).then(() => {\r\n      setChildElements(elements)\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className={s.page}>\r\n      <input type=\"file\" id=\"input\" onChange={(e) => inpChange(e)} />\r\n      <h1>LATEST NEWS</h1>\r\n      <div className={s.archive}>{childElements}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImpExcel;\r\n","import React, { useEffect } from 'react';\r\n\r\nconst Example = ({ count }) => {\r\n\r\n    useEffect(() => {\r\n        console.log('render - ' + count)\r\n        return () => {\r\n            console.log('unmount - ' + count);\r\n        }\r\n    }, [count])\r\n\r\n    return (\r\n        <div>example: {count}</div>\r\n    );\r\n}\r\n\r\nexport default Example;","import React, { useState } from 'react';\r\nimport Example from './Example';\r\n\r\nconst Wrapper = (props) => {\r\n\r\n    const [count, setCount] = useState(0);\r\n    const clickButton = () => setCount(count + 1);\r\n\r\n    return (\r\n        <>\r\n            <button onClick={clickButton}>{count}</button>\r\n            {count < 5 && <Example count={count} />}\r\n            {count < 5 && <Example count={-1} />}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Wrapper;","import React, { useState } from 'react';\r\nimport { apiForIdb } from '../../api/api';\r\nimport Tree from '../common/Tree/Tree';\r\nimport { getGroup, pushItems } from '../../api/apiIDB';\r\n\r\nconst IdbTest = () => {\r\n\r\n    const [groups, setGroups] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    async function callbackTree(id) {\r\n        let group = await getGroup(id);\r\n        console.log(group);\r\n        alert(JSON.stringify(group, null, 2));\r\n    }\r\n\r\n    async function butGetGroups() {\r\n        setIsLoading(true);\r\n        let res = await apiForIdb.getGroupsEvo();\r\n        console.log(res);\r\n        let g = await res.items;\r\n        await pushItems('groups', g);\r\n        /*\r\n         created_at: \"2018-08-01T06:00:27.605+0000\"\r\n         id: \"96639e0c-6409-9faa-d4e0-a8212b9fa795\"\r\n         name: \"Веревки\"\r\n         parent_id: \"3257cd3d-6e61-4315-8d83-084578c507be\"\r\n         store_id: \"20180608-EEA0-408D-807D-6AB73272E383\"\r\n         updated_at: \"2019-04-13T07:58:19.537+0000\"\r\n         user_id: \"01-000000000910281\"\r\n         */\r\n        let groups = await getGroup('all');\r\n        groups.forEach((item) => {\r\n            // if (idx === 1) console.log(item);\r\n            item.pid = item.parent_id ? item.parent_id : null;\r\n            item.label = item.name;\r\n        });\r\n        setGroups(groups);\r\n        setIsLoading(false);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <h1>IDB Test</h1>\r\n            <button onClick={() => butGetGroups()} disabled={isLoading}>get Groups Evo</button>\r\n            { isLoading && <p>Loading...</p>}\r\n            { !!groups.length && <Tree data={groups} price=\"Price\" treeLabel=\"Groups\" callback={callbackTree} />}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default IdbTest;\r\n","const SET_APP_KEY = 'SET-APP-KEY';\r\nconst SET_STORE_KEY = 'SET-STORE-KEY';\r\nconst INIT_APP = 'INIT-APP';\r\nconst SET_STORES = 'SET-STORES';\r\n\r\nexport const setAppKeyAC = (key) => {\r\n  return { type: SET_APP_KEY, key };\r\n};\r\n\r\nexport const setStoreKeyAC = (key) => {\r\n  return { type: SET_STORE_KEY, key };\r\n};\r\n\r\nexport const initAppAC = (init) => {\r\n  return { type: INIT_APP, init };\r\n};\r\n\r\nexport const setStoresAC = (stores) => {\r\n  return { type: SET_STORES, stores };\r\n};\r\n\r\nconst initialState = {\r\n  appKey: null,\r\n  storeKey: null,\r\n  isInit: false,\r\n  stores: [],\r\n};\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_APP_KEY:\r\n      return { ...state, appKey: action.key };\r\n    case SET_STORE_KEY:\r\n      return { ...state, storeKey: action.key };\r\n    case INIT_APP:\r\n      return { ...state, isInit: action.init };\r\n    case SET_STORES:\r\n      return { ...state, stores: [...action.stores] };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const setAppKey = (key) => (dispatch) => {\r\n  return dispatch(setAppKeyAC(key));\r\n};\r\n\r\nexport const setStoreKey = (key) => (dispatch) => {\r\n  return dispatch(setStoreKeyAC(key));\r\n};\r\n\r\nexport const initApp = (init) => (dispatch) => {\r\n  return dispatch(initAppAC(init));\r\n};\r\n\r\nexport const setStores = (stores) => (dispatch) => {\r\n  return dispatch(setStoresAC(stores));\r\n};\r\n\r\nexport const initializeApp = () => (dispatch) => {\r\n  if (localStorage.appKey) {\r\n    dispatch(setAppKeyAC(localStorage.appKey));\r\n    if (localStorage.storeKey) {\r\n      dispatch(setStoreKeyAC(localStorage.storeKey));\r\n    }\r\n  }\r\n};\r\n\r\nexport default appReducer;\r\n","import { getGroup, getProduct } from './apiIDB';\r\n\r\nfunction blobFromObj(obj) {\r\n  let json = JSON.stringify(obj, null, 2);\r\n  let blob = new Blob([json], { type: 'application/json' });\r\n  return blob;\r\n}\r\n\r\nfunction blobToUrl(blob, fileName = 'test') {\r\n  let link = document.createElement('a');\r\n  link.download = `${fileName}.json`;\r\n  link.href = URL.createObjectURL(blob);\r\n  link.click();\r\n  URL.revokeObjectURL(link.href);\r\n}\r\n\r\nfunction getObjfromLocalStorage() {\r\n  let keys = Object.keys(localStorage);\r\n  let obj = {};\r\n  for (let key of keys) {\r\n    obj[key] = localStorage.getItem(key);\r\n  }\r\n  return obj;\r\n}\r\n\r\nasync function getObjfromIdb() {\r\n  let obj = {};\r\n\r\n  obj.groups = await getGroup('all');\r\n\r\n  obj.products = await getProduct('all');\r\n\r\n  return obj;\r\n}\r\n\r\nexport async function saveConfig({ type, fileName = 'config'}) {\r\n  let obj = {};\r\n\r\n  switch (type) {\r\n    case 'config':\r\n      obj.config = getObjfromLocalStorage();\r\n      break;\r\n    case 'commodities':\r\n      obj.commodities = await getObjfromIdb();\r\n      break;\r\n    default:\r\n      obj.config = getObjfromLocalStorage();\r\n      break;\r\n  }\r\n\r\n  let blob = blobFromObj(obj);\r\n  blobToUrl(blob, fileName);\r\n}\r\n\r\nexport async function readJsonFile(input) {\r\n  let file = input.files[0];\r\n  let reader = new FileReader();\r\n  reader.readAsText(file);\r\n\r\n  return new Promise((resolve, reject) => {\r\n    reader.onload = function () {\r\n      var json = JSON.parse(reader.result);\r\n      resolve(json);\r\n    };\r\n\r\n    reader.onerror = function () {\r\n      console.error(reader.error);\r\n      reject(reader.error);\r\n    };\r\n  });\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { setAppKey, setStoreKey, setStores, initApp } from \"../../redux/appReducer\";\r\nimport { apiForIdb } from \"../../api/api\";\r\nimport { readJsonFile, saveConfig } from \"../../api/apiFile\";\r\nimport { delDb } from \"../../api/apiIDB\";\r\n\r\nfunction addKey(id) {\r\n    var key = document.getElementById(id).value;\r\n    if (!key) return;\r\n    window.localStorage[id] = key;\r\n    return key;\r\n}\r\n\r\nconst MainSettings = props => {\r\n\r\n\r\n    let inpRef = React.createRef();\r\n\r\n    async function saveData() {\r\n\r\n        await saveConfig({ fileName: `backup_config_${new Date().toJSON()}` });\r\n\r\n        console.log('File with config saved');\r\n        let saveData = window.confirm('Сохранить список товаров?');\r\n        if (saveData) {\r\n            await saveConfig({ type: 'commodities', fileName: `backup_commodities_${new Date().toJSON()}` });\r\n            console.log('File with Data saved');\r\n        }\r\n    }\r\n\r\n\r\n    async function setAppKeyAndStores(key) {\r\n        localStorage.appKey = key;\r\n        props.setAppKey(key);\r\n        try {\r\n            let stores = await apiForIdb.getStores();\r\n            props.setStores(stores);\r\n        } catch (err) {\r\n            delete localStorage.appKey;\r\n            props.setAppKey(null);\r\n            console.error(err);\r\n        }\r\n    }\r\n\r\n    async function clickAddAppKey() {\r\n        var key = addKey('appKey');\r\n        if (!key) return;\r\n        await setAppKeyAndStores(key);\r\n    }\r\n\r\n    function liClick(e) {\r\n        let storeKey = e.target.id;\r\n        localStorage.storeKey = storeKey;\r\n        props.setStoreKey(storeKey);\r\n        // props.initApp(true);\r\n    }\r\n\r\n    const [clean, setClean] = useState(false);\r\n\r\n    async function cleareStorage(storageName) {\r\n        setClean(true);\r\n        localStorage.clear();\r\n        await delDb(storageName);\r\n        props.setAppKey(null);\r\n        props.setStoreKey(null);\r\n        props.initApp(false);\r\n        setClean(false);\r\n        window.location.reload();\r\n    }\r\n\r\n    async function restoreConfig() {\r\n        let file = inpRef.current;\r\n        let config = (await readJsonFile(file)).config;\r\n        await setAppKeyAndStores(config.appKey);\r\n        localStorage.storeKey = config.storeKey;\r\n        props.setStoreKey(config.storeKey);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {props.appKey && props.storeKey && !props.isInit &&\r\n                <div>\r\n                    <h2>Идет инициализация приложения...</h2>\r\n                </div>\r\n            }\r\n            {!props.appKey &&\r\n                <div>\r\n                    <h2>Необходимо инициализировать приложение!</h2>\r\n                    <p>Введите токен приложения...</p>\r\n                </div>\r\n            }\r\n            {clean &&\r\n                <div>\r\n                    <h2>Идет очистка хранилища...</h2>\r\n                    <p>Страница перезагрузится автоматически.</p>\r\n                    <p>Если процесс затянулся, перезагрузите страницу вручную.</p>\r\n                </div>\r\n            }\r\n            {!props.appKey &&\r\n                <div>\r\n                    <input id={'appKey'} />\r\n                    <button onClick={clickAddAppKey}>Установить токен приложения</button>\r\n                </div>\r\n            }\r\n            {!!props.appKey && !props.isInit &&\r\n                <div>\r\n                    <h3>Токен приложения</h3>\r\n                    <p>{props.appKey}</p>\r\n                </div>\r\n            }\r\n            { props.appKey && !!props.stores.length && !props.storeKey &&\r\n                <div style={{ cursor: 'pointer' }}>\r\n                    <h3>Выберите магазин</h3>\r\n                    <ul>\r\n                        {props.stores.map(item => {\r\n                            return (\r\n                                <li key={item.id} id={item.id} onClick={liClick}>{item.id}: {item.name}</li>\r\n                            )\r\n                        })}\r\n                    </ul>\r\n                </div>\r\n            }\r\n            { !!props.storeKey && !props.isInit &&\r\n                <div>\r\n                    <h3>Выбранный магазин</h3>\r\n                    <p>{props.storeKey}</p>\r\n                </div>\r\n            }\r\n            { props.isInit && !clean && <h2>Приложение инициализировано!</h2>}\r\n            { props.isInit && !clean &&\r\n                <div>\r\n                    <button onClick={() => cleareStorage('Evo')}>cleare Storage</button>\r\n                    <button onClick={saveData}>Save Config</button>\r\n                </div>\r\n            }\r\n            {\r\n                !props.appKey &&\r\n                <div>\r\n                    <p>или выберите восстановление конфигурации...</p>\r\n                    <label>Восстановить конфигурацию из файла\r\n                    <input type=\"file\" ref={inpRef} onChange={restoreConfig} hidden />\r\n                    </label>\r\n                </div>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapState = state => {\r\n    return {\r\n        appKey: state.app.appKey,\r\n        storeKey: state.app.storeKey,\r\n        isInit: state.app.isInit,\r\n        stores: state.app.stores\r\n    }\r\n}\r\n\r\nexport default connect(mapState, { setAppKey, setStoreKey, setStores, initApp })(MainSettings);\r\n","import React from \"react\";\r\nimport \"./App.css\";\r\nimport \"./css/fontawesome.css\";\r\nimport \"./css/solid.css\";\r\nimport \"./css/regular.css\";\r\nimport \"./css/brands.css\";\r\nimport { Route } from \"react-router-dom\";\r\nimport Game from \"./components/Game/Game\";\r\nimport NavbarContainer from \"./components/Navbar/NavbarContainer\";\r\nimport MuzikContainer from \"./components/Muzik/MuzikContainer\";\r\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\r\nimport CommodityContainer from \"./components/Commodity/CommodityContainer\";\r\nimport ImpExcel from \"./components/ImpExcel/ImpExcel\";\r\nimport Wrapper from \"./components/Example/Wrapper\";\r\nimport IdbTest from \"./components/IdbTest/IdbTest\";\r\nimport MainSettings from \"./components/Settings/MainSettings\";\r\nimport { initializeApp, initApp, setAppKey, setStoreKey } from './redux/appReducer';\r\nimport { connect } from \"react-redux\";\r\nimport { pushItems } from \"./api/apiIDB\";\r\nimport { apiForIdb } from \"./api/api\";\r\n\r\nasync function getProductsForIdb() {\r\n  // Get groups;\r\n  let res = await apiForIdb.getGroupsEvo();\r\n  let groups = await res.items;\r\n  await pushItems('groups', groups);\r\n\r\n  res = await apiForIdb.getProductsEvo();\r\n  let products = await res.items;\r\n  products = products.map(item => {\r\n    if (!item.parent_id) item.parent_id = '0';\r\n    if (!item.barcodes) item.barcodes = [];\r\n    return item;\r\n  })\r\n  await pushItems('products', products);\r\n}\r\n\r\nconst App = props => {\r\n\r\n  if (!props.isInit) props.initializeApp();\r\n\r\n  if (props.appKey && props.storeKey && !props.isInit) {\r\n    getProductsForIdb().then(res => props.initApp(true));\r\n\r\n  }\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <HeaderContainer />\r\n      <NavbarContainer />\r\n      <div className=\"app-content\">\r\n        <Route exact path=\"/\"/>\r\n        <Route exact path=\"/settings\" component={MainSettings}/>\r\n        <Route path=\"/example\" component={Wrapper} />\r\n        <Route path=\"/muzik\" component={MuzikContainer} />\r\n        <Route path=\"/commodity\" component={CommodityContainer} />\r\n        <Route path=\"/game\" component={Game} />\r\n        <Route path=\"/table\" component={ImpExcel} />\r\n        <Route path=\"/test\" component={IdbTest} />\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapState = state => {\r\n  return {\r\n    appKey: state.app.appKey,\r\n    storeKey: state.app.storeKey,\r\n    isInit: state.app.isInit\r\n  }\r\n}\r\n\r\nexport default connect(mapState, {initializeApp, initApp, setAppKey, setStoreKey})(App);\r\n","import { createStore, combineReducers, applyMiddleware } from 'redux';\r\nimport navReduser from './navReduser';\r\nimport commodityReduser from './commodityReduser';\r\nimport muzReduser from './MuzikReduser';\r\nimport thunkMidleware from 'redux-thunk';\r\nimport appReducer from './appReducer';\r\n\r\nlet redusers = combineReducers({\r\n  navigation: navReduser,\r\n  commodityPage: commodityReduser,\r\n  muzik: muzReduser,\r\n  app: appReducer\r\n});\r\n\r\nlet store = createStore(redusers, applyMiddleware(thunkMidleware));\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport store from \"./redux/redux-store\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { Provider } from \"react-redux\";\r\n\r\n/** RENDER */\r\n  ReactDOM.render(\r\n    <Provider store={store}>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </Provider>\r\n    ,document.getElementById(\"root\")\r\n  );\r\n\r\n  window.store = store;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Commodity_container__1LqhZ\",\"list\":\"Commodity_list__QqPvi\",\"selected\":\"Commodity_selected__3W-at\",\"buttons\":\"Commodity_buttons__SywLo\",\"del\":\"Commodity_del__tLEa_\",\"head\":\"Commodity_head__ntAD9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tree\":\"Tree_tree__1H_Cp\",\"selected\":\"Tree_selected__23aTD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Muzik_container__18qw7\",\"item\":\"Muzik_item__2RdRO\",\"textdiv\":\"Muzik_textdiv__1lKKu\",\"text\":\"Muzik_text__24yDA\",\"result\":\"Muzik_result__3JF2L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"ImpExcel_image__mhHMd\",\"page\":\"ImpExcel_page__2mpyc\",\"archive\":\"ImpExcel_archive__3N_96\",\"article\":\"ImpExcel_article__1V_lv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cover-div\":\"FormModalWrapper_cover-div__37lKS\",\"container\":\"FormModalWrapper_container__3gLRJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Navbar_item__Gmt0s\",\"active\":\"Navbar_active__1akZn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form-product\":\"Form_form-product__2bDsP\",\"uuid\":\"Form_uuid__3ZUEM\",\"barcodes\":\"Form_barcodes__3eXqh\",\"g-tree\":\"Form_g-tree__3WZeo\",\"tree\":\"Form_tree__1spfl\",\"price\":\"Form_price__1jjy1\",\"picture-small\":\"Form_picture-small__20BDG\",\"div-picture\":\"Form_div-picture__1k6r1\",\"select\":\"Form_select__2MzES\",\"buttons\":\"Form_buttons__2RRN8\",\"big-img\":\"Form_big-img__1Na6j\",\"view-barcode\":\"Form_view-barcode__1VWps\",\"del-bc\":\"Form_del-bc__14rW3\",\"add-bc\":\"Form_add-bc__ciQtv\",\"menu-buttons\":\"Form_menu-buttons__w0Smx\",\"required\":\"Form_required__OxjrS\",\"propertyes\":\"Form_propertyes__3Rs1K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrong\":\"TextArea_wrong__19g7T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"needupdate\":\"Header_needupdate__1B24q\",\"updated\":\"Header_updated__13H3P\",\"loginBlock\":\"Header_loginBlock__2Q2GB\"};"],"sourceRoot":""}