{"version":3,"sources":["components/Game/Game.js","components/Navbar/Navbar.jsx","redux/Types/appTypes.js","redux/Types/navigationTypes.js","redux/Types/commodityTypes.js","redux/Actions/appActions.js","redux/Actions/navigationActions.js","api/api_evotor/createRequestAxios.js","api/api_evotor/fetchEvoAxios.js","api/api.js","api/apiIDB.js","components/Errors/SequelizeErrors.js","components/Errors/EvoErrors.js","components/Errors/chooseError.js","redux/Actions/commodityActions.js","components/Navbar/NavLinkContainer.js","components/Navbar/NavbarContainer.jsx","Assets/img/terminal-5.png","components/common/ProgressBar/ProgressBar.js","api/apiUtils.js","components/Header/Header.jsx","components/Header/HeaderContainer.jsx","components/common/Tree/treeFunction.js","components/common/Tree/Node.jsx","components/common/Tree/Tree.jsx","Assets/img/placeholder.svg","components/common/Preloader/Preloader.js","components/Commodity/Forms/FormModalWrapper.jsx","components/Commodity/Forms/frmUtilites.js","components/Commodity/Forms/schemas/ComponentsProducts.jsx","components/common/TextArea/TextArea.jsx","components/Commodity/Forms/FormImg.jsx","components/Commodity/Forms/FormProduct.jsx","Hooks/useSortableData.js","components/common/Table/utilsTable.js","components/common/Table/Table.jsx","components/common/ProgressBar/ProgressBar2.js","components/Commodity/Commodity.jsx","components/Commodity/CommodityContainer.js","components/ImpExcel/News/News.jsx","components/ImpExcel/ImpExcel.jsx","components/Example/Example.jsx","components/Example/Wrapper.jsx","components/IdbTest/IdbTest.jsx","api/apiFile.js","components/Settings/MainSettings.jsx","components/Documents/Documents.jsx","components/App/App.jsx","redux/navReduser.js","redux/commodityReduser.js","redux/appReducer.js","redux/redux-store.js","index.js","components/Commodity/Commodity.module.css","components/common/Tree/Tree.module.css","components/common/Table/Table.module.css","components/ImpExcel/ImpExcel.module.css","components/Commodity/Forms/FormModalWrapper.module.css","components/Navbar/Navbar.module.css","components/Commodity/Forms/Form.module.css","components/common/TextArea/TextArea.module.css"],"names":["Square","props","className","onClick","value","Board","i","sqSel","this","sq","setTimeout","squares","rows","t","j","push","renderSquare","React","Component","calculateWinner","lines","a","b","c","document","querySelectorAll","forEach","item","index","classList","remove","line","toggle","interval","setInterval","clearInterval","length","Game","state","history","Array","fill","square","xIsNext","stepNumber","slice","setState","concat","firstElementChild","step","e","target","status","current","winner","moves","map","move","coords","Math","floor","desc","jumpTo","handleClick","Navbar","navElements","SET_APP_KEY","SET_STORE_KEY","INIT_APP","SET_STORES","SET_LAST_UPDATE","SET_PERIOD_UPDATE","GET_TITLE","CHOOSE_LANG","SET_GROUPS","SET_PID","SET_COMMODITIES","SET_ERROR","UPDATE_COMMODITY","SET_UPDATED","VIEW_FORM","SET_FORM_DATA","TOGGLE_FORM_POST","SET_FORM_ERROR","SET_FORM_PHOTOS","setAppKeyAC","key","type","setStoreKeyAC","toggleInitAppAC","init","setLastUpdateAC","dateUpdate","setAppKey","dispatch","setStoreKey","toggleInitApp","setLastUpdate","getState","localStorage","lastUpdate","setPeriodUpdate","periodUpdate","isNaN","setPeriodUpdateAC","getTitle","path","getTitleAC","action","api_v2","headers","appKey","storeUuid","storeKey","params","cursor","request","selectOption","url","method","body","period","dateStart","dateEnd","until","date","Date","setMonth","getMonth","getTime","docType","employee_id","id","JSON","stringify","deviceId","from","getFullYear","getDate","to","createRequest","fetchEvo","baseURL","data","Axios","response","result","paging","next_cursor","items","apiForIdb","stores","initDb","openDB","upgrade","db","oldVersion","newVersion","alert","console","log","objectStoreNames","contains","store","createObjectStore","keyPath","createIndex","apiIDB","getAll","group","get","product","pid","getAllFromIndex","groups","products","resItems","tx","transaction","promises","put","done","Promise","all","nameDb","deleteDB","storeName","delete","SequelizeError","Error","SequelizeValidationError","errors","message","name","SequelizeUniqueConstraintError","EvoError","EvoValidationError","err","subject","toUpperCase","reason","violations","EvoPutError","code","chooseError","res","setGroupsAC","setPidAC","setCommoditiesAC","commodities","setErrorAC","error","setFormErrorAC","viewFormAC","view","viewForm","setFormDataAC","formData","toggleFormPostAC","formPost","NavLinkContainer","connect","ownProps","exact","activeClassName","NavLink","getNavElements","currentLang","navigation","navBar","nav","idx","ex","link","s","active","title","NavbarContainer","ProgressBar","useState","p","setP","useEffect","limit","timer","delay","style","display","text","backgroundColor","color","compose","fns","x","reduceRight","acc","fn","testNeedUpdate","needUpdate","now","fetchGroupsProducts","parent_id","barcodes","photos","setItem","pId","groupsLength","productsLength","Header","isInit","setIsInit","updated","setUpdated","setNeedUpdate","load","toString","styleH5","src","logo","alt","ev","lng","chooseLang","checked","onChange","app","chooseLangAC","withRouter","location","pathname","split","addNode","subNode","parentNode","pNode","findNode","undefined","childs","sort","label","find","node","createTree","root","notFoundNodes","notFoundNode","createNode","Node","icon","setIcon","isOpen","setIsOpen","hasChildren","setHasChildren","hidden","children","Tree","nodeRoot","price","tree","treeLabel","treeElements","createSubTree","lvl","elem","tagName","getElementById","selected","closest","querySelector","nextSibling","match","callback","Preloader","spiner","FormModalWrapper","useLayoutEffect","overflow","top","container","form","setNewCode","arr","codes","maxCode","max","apply","newCode","viewBarcode","barcode","f1","f2","bcStr","n","Number","String","fromCharCode","substr","validateBarcode","includes","ComponentsProducts","measure_name","handleChange","disabled","schema","measure_names","m","types","description","tax","taxes","g","gLabel","onDivClick","treeView","classTree","callbackTree","classDiv","tabIndex","delBcClick","allow_edit","deleteFromArray","view_barcode","delBc","defaultValue","bc","onBlur","handleBlur","addBc","divPicture","pictureClick","photo","URL","createObjectURL","TextArea","placeholder","wrong","onKeyDown","ref","refrence","wrap","autoFocus","FormImg","height","position","left","verticalAlign","FormProduct","isNewData","fileInput","createRef","isGroup","setIsGroup","bigImg","currentBarcode","esc","focus","revokeObjectURL","then","formError","setFormError","formatPrice","isFinite","toFixed","required","files","Object","values","elements","uuid","removeAttribute","currentTarget","newValue","prefix","window","prompt","A1","repeat","A2","newBarcode","warn","valBc","handleSubmit","preventDefault","stopPropagation","changes","formChanged","confirm","createdAt","updatedAt","alcocodes","missData","reqData","keys","validateRequiredData","strMessage","getElementsByName","add","curr","prev","validateZeroData","typeQuery","postFormData","toggleFormPost","setFormData","setViewForm","canselClick","elemId","arrName","findIndex","splice","setTreeView","gProps","mnProps","tProps","taxProps","bProps","pProps","picture","addEventListener","removeEventListener","prevElem","previousElementSibling","onSubmit","keyCode","ph","multiple","htmlFor","click","code_article","article_number","propertyes","prices","cost_price","defaultChecked","allow_to_sell","buttons","cansel","useSortableData","config","sortConfig","setSortConfig","sortedItems","useMemo","sortedProducts","direction","requestSort","clickCell","row","column","getAttribute","cell","innerText","delRow","del","Table","getClassName","asc","clickTable","deleteProduct","ProgressBar2","styleDiv","width","border","padding","Commodity","groupIsEmpty","setGroupIsEmpty","isEmptyGroup","groupName","setGroupName","RegExp","source","returnBeforeSearch","filter","setCommodities","getProducts","gName","parentGroup","isLoaded","setPid","getGroups","comIsLoaded","setError","li","ul","currentLi","toggleHidden","head","getProductId","search","eId","list","commodityPage","dir","typeData","callbackApi","catch","News","element","article","ImpExcel","childElements","setChildElements","page","readXlsxFile","archive","Example","count","Wrapper","setCount","IdbTest","setGroups","isLoading","setIsLoading","butGetGroups","blobFromObj","obj","rest","json","blob","Blob","blobToUrl","fileName","ext","createElement","download","href","getObjfromLocalStorage","getItem","getObjfromIdb","saveConfig","readJsonFile","input","file","reader","FileReader","readAsText","resolve","reject","onload","parse","onerror","addKey","setStores","setStoresAC","inpRef","toJSON","setAppKeyAndStores","liClick","clean","setClean","storageName","clear","reload","setPUpdate","cleareStorage","dateToString","strDate","dblDigit","dgt","getMinData","min","year","month","day","typesOfDocs","docs","setDocs","setDocType","dateMin","setPeriod","changeDate","setHours","docClick","doc","styleSpan","paddingTop","paddingLeft","paddingRight","background","margin","initializeApp","getProductsForIdb","component","MainSettings","CommodityContainer","Documents","initialState","langs","ru","en","navReduser","isUpdated","quantity","resMessage","commodityReduser","assign","commodity","updateOk","update","appReducer","redusers","combineReducers","createStore","applyMiddleware","thunkMidleware","ReactDOM","render","module","exports"],"mappings":"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","file":"static/js/main.5adeb01e.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./Game.css\";\r\n\r\nfunction Square(props) {\r\n  return (\r\n    <button className={props.className} onClick={props.onClick}>\r\n      {props.value}\r\n    </button>\r\n  );\r\n}\r\n\r\nclass Board extends React.Component {\r\n  renderSquare(i) {\r\n    let sqSel =\r\n      this.props.sq === i && this.props.sqSel ? \"square selected\" : \"square\";\r\n    setTimeout(() => (sqSel = \"square\"), 500);\r\n    return (\r\n      <Square\r\n        value={this.props.squares[i]}\r\n        className={sqSel}\r\n        key={i}\r\n        onClick={() => this.props.onClick(i)}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const rows = [];\r\n    let t = 0;\r\n    while (t < 9) {\r\n      for (let j = 1; j <= 3; j++) {\r\n        const sq = [];\r\n        for (let i = 1; i <= 3; i++) {\r\n          sq.push(this.renderSquare(t));\r\n          t++;\r\n        }\r\n        rows.push(\r\n          <div className=\"board-row\" key={j}>\r\n            {sq}\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n    return <div>{rows}</div>;\r\n  }\r\n}\r\n\r\nclass Game extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      history: [\r\n        {\r\n          squares: Array(9).fill(null),\r\n          square: null\r\n        }\r\n      ],\r\n      xIsNext: true,\r\n      stepNumber: 0\r\n    };\r\n  }\r\n\r\n  handleClick(i) {\r\n    const history = this.state.history.slice(0, this.state.stepNumber + 1);\r\n    const current = history[history.length - 1];\r\n    const squares = current.squares.slice();\r\n\r\n    if (calculateWinner(squares) || squares[i]) {\r\n      return;\r\n    }\r\n    squares[i] = this.state.xIsNext ? \"X\" : \"O\";\r\n    this.setState({\r\n      history: history.concat([{ squares: squares, square: i }]),\r\n      stepNumber: history.length,\r\n      xIsNext: !this.state.xIsNext\r\n    });\r\n    let arrLi = document.querySelectorAll(\"li\");\r\n    arrLi.forEach(item => {\r\n      item.firstElementChild.classList.remove(\"selected\");\r\n    });\r\n  }\r\n\r\n  jumpTo(step, e) {\r\n    let arrLi = document.querySelectorAll(\"li\");\r\n    arrLi.forEach(item => {\r\n      item.firstElementChild.classList.remove(\"selected\");\r\n    });\r\n    e.target.classList.toggle(\"selected\");\r\n    this.setState({\r\n      stepNumber: step,\r\n      xIsNext: step % 2 === 0\r\n    });\r\n    this.setState({ sqSel: true });\r\n    setTimeout(() => this.setState({ sqSel: false }), 500);\r\n  }\r\n\r\n  render() {\r\n    const history = this.state.history;\r\n    const current = history[this.state.stepNumber];\r\n    const winner = calculateWinner(current.squares);\r\n\r\n    const moves = history.map((step, move) => {\r\n      let i = step.square;\r\n      if (move) {\r\n        var coords =\r\n          \" row: \" + (Math.floor(i / 3) + 1) + \" col: \" + ((i % 3) + 1);\r\n        var desc = \"Goto step #\" + move;\r\n      } else {\r\n        desc = \"Goto Start\";\r\n        coords = \"\";\r\n      }\r\n\r\n      return (\r\n        <li key={move}>\r\n          <button onClick={e => this.jumpTo(move, e)}>{desc}</button>\r\n          {coords}\r\n        </li>\r\n      );\r\n    });\r\n\r\n    let status;\r\n\r\n    if (winner) {\r\n      status = \"Winner \" + winner;\r\n    } else if (history.length === 10) {\r\n      status = \"X === O\";\r\n    } else {\r\n      status = \"Next step \" + (this.state.xIsNext ? \"X\" : \"O\");\r\n    }\r\n\r\n    return (\r\n      <div className=\"game\">\r\n        <h2>Game X vs O</h2>\r\n        <div className=\"game-wrapper\">\r\n          <div className=\"game-board\">\r\n            <Board\r\n              squares={current.squares}\r\n              onClick={i => this.handleClick(i)}\r\n              sqSel={this.state.sqSel}\r\n              sq={current.square}\r\n            />\r\n          </div>\r\n          <div className=\"game-info\">\r\n            <div>{status}</div>\r\n            <ol>{moves}</ol>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction calculateWinner(squares) {\r\n  const lines = [\r\n    [0, 1, 2],\r\n    [3, 4, 5],\r\n    [6, 7, 8],\r\n    [0, 3, 6],\r\n    [1, 4, 7],\r\n    [2, 5, 8],\r\n    [0, 4, 8],\r\n    [2, 4, 6]\r\n  ];\r\n  for (let i = 0; i < lines.length; i++) {\r\n    const [a, b, c] = lines[i];\r\n    if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {\r\n      let arrSq = document.querySelectorAll(\".square\");\r\n      arrSq.forEach((item, index) => {\r\n        item.classList.remove(\"selected\");\r\n        lines[i].forEach(line => {\r\n          if (index === line) {\r\n            item.classList.toggle(\"selected\");\r\n            let interval = setInterval(() => {\r\n              item.classList.toggle(\"selected\");\r\n            }, 500);\r\n            setTimeout(() => {\r\n              clearInterval(interval);\r\n              item.classList.remove(\"selected\");\r\n            }, 3000);\r\n          }\r\n        });\r\n      });\r\n\r\n      return squares[a];\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default Game;\r\n","import React from 'react';\r\n\r\nconst Navbar = props => {\r\n\r\n  return (\r\n    <nav className='navbar'>\r\n      {props.navElements}\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Navbar;","export const SET_APP_KEY = 'SET-APP-KEY';\r\nexport const SET_STORE_KEY = 'SET-STORE-KEY';\r\nexport const INIT_APP = 'INIT-APP';\r\nexport const SET_STORES = 'SET-STORES';\r\nexport const SET_LAST_UPDATE = 'SET-LAST-UPDATE';\r\nexport const SET_PERIOD_UPDATE = 'SET-PERIOD-UPDATE';\r\n","export const GET_TITLE = 'GET-TITLE';\r\nexport const CHOOSE_LANG = 'CHOOSE-LANG';\r\n","export const SET_GROUPS = 'GET-GROUPS';\r\nexport const SET_PID = 'SET-PID';\r\nexport const SET_COMMODITIES = 'GET-COMMODITIES';\r\nexport const SET_ERROR = 'SET-ERROR';\r\nexport const UPDATE_COMMODITY = 'UPDATE-COMMODITY';\r\nexport const SET_UPDATED = 'SET-UPDATED';\r\nexport const VIEW_FORM = 'VIEW-FORM';\r\nexport const SET_FORM_DATA = 'SET-FORM-DATA';\r\nexport const TOGGLE_FORM_POST = 'TOGGLE-FORM-POST';\r\nexport const SET_FORM_ERROR = 'SET-FORM-ERROR';\r\nexport const SET_FORM_PHOTOS = 'SET-FORM-FOTOS';\r\n","import {\r\n  INIT_APP,\r\n  SET_APP_KEY,\r\n  SET_LAST_UPDATE,\r\n  SET_PERIOD_UPDATE,\r\n  SET_STORES,\r\n  SET_STORE_KEY,\r\n} from '../Types';\r\n\r\nconst setAppKeyAC = (key) => {\r\n  return { type: SET_APP_KEY, key };\r\n};\r\n\r\nconst setStoreKeyAC = (key) => {\r\n  return { type: SET_STORE_KEY, key };\r\n};\r\n\r\nconst toggleInitAppAC = (init) => {\r\n  return { type: INIT_APP, init };\r\n};\r\n\r\nconst setStoresAC = (stores) => {\r\n  return { type: SET_STORES, stores };\r\n};\r\n\r\nconst setLastUpdateAC = (dateUpdate) => {\r\n  return { type: SET_LAST_UPDATE, dateUpdate };\r\n};\r\n\r\nconst setPeriodUpdateAC = periodUpdate  => {\r\n  if (isNaN(+periodUpdate)) {\r\n    periodUpdate = 24;\r\n  } else if (+periodUpdate < 1) {\r\n    periodUpdate = 1;\r\n  } else if (+periodUpdate > 24) {\r\n    periodUpdate = 24;\r\n  } else {\r\n    periodUpdate = +periodUpdate;\r\n  }\r\n  return { type: SET_PERIOD_UPDATE, periodUpdate }\r\n}\r\n\r\nexport const setAppKey = (key) => (dispatch) => {\r\n  dispatch(setAppKeyAC(key));\r\n};\r\n\r\nexport const setStoreKey = (key) => (dispatch) => {\r\n  dispatch(setStoreKeyAC(key));\r\n};\r\n\r\nexport const toggleInitApp = (init) => (dispatch) => {\r\n  dispatch(toggleInitAppAC(init));\r\n};\r\n\r\nexport const setStores = (stores) => (dispatch) => {\r\n  dispatch(setStoresAC(stores));\r\n};\r\n\r\n\r\nexport const initializeApp = () => (dispatch) => {\r\n  if (localStorage.appKey) {\r\n    dispatch(setAppKeyAC(localStorage.appKey));\r\n    if (localStorage.storeKey) {\r\n      dispatch(setStoreKeyAC(localStorage.storeKey));\r\n    }\r\n    if (localStorage.lastUpdate) {\r\n      dispatch(setLastUpdateAC(localStorage.lastUpdate));\r\n      dispatch(toggleInitAppAC(true));\r\n    }\r\n    if (localStorage.periodUpdate) {\r\n      dispatch(setPeriodUpdate(localStorage.periodUpdate));\r\n    }\r\n  }\r\n};\r\n\r\nexport const setLastUpdate = () => (dispatch, getState) => {\r\n  // const dateBefore = getState().app.lastUpdate;\r\n  // console.log('Date Before: ' + new Date(dateBefore).toString());\r\n  dispatch(setLastUpdateAC(localStorage.lastUpdate));\r\n  // const dateAfter = getState().app.lastUpdate;\r\n  // console.log('Date After: ' + new Date(dateAfter).toString());\r\n};\r\n\r\nexport const setPeriodUpdate = periodUpdate => dispatch => {\r\n  dispatch(setPeriodUpdateAC(periodUpdate));\r\n};\r\n","import { CHOOSE_LANG, GET_TITLE } from '../Types';\r\n\r\nconst getTitleAC = (path) => ({ type: GET_TITLE, path });\r\n\r\nconst chooseLangAC = (lng) => ({ type: CHOOSE_LANG, lng });\r\n\r\nexport const getTitle = (path) => {\r\n  return (dispatch) => {\r\n    dispatch(getTitleAC(path));\r\n  };\r\n};\r\n\r\nexport const chooseLang = (lng) => {\r\n  return (dispatch) => {\r\n    dispatch(chooseLangAC(lng));\r\n  };\r\n};\r\n","import api_v2 from './api_v2_axios.json';\r\n\r\nasync function createRequest(action) {\r\n  api_v2.headers['X-Authorization'] = localStorage.appKey;\r\n\r\n  action.storeUuid = localStorage.storeKey;\r\n\r\n  api_v2.params = action.cursor ? { cursor: action.cursor } : null;\r\n\r\n  let request = selectOption(action);\r\n\r\n  return { ...request, action: action.type };\r\n}\r\n\r\nfunction selectOption(action) {\r\n  let url, method, body, headers;\r\n\r\n  switch (action.type) {\r\n    case 'store_v2':\r\n      url = 'stores';\r\n      return { ...api_v2, method: 'GET', url };\r\n\r\n    case 'bulks_v1':\r\n      if (action.value) {\r\n        url = 'bulks/' + action.value;\r\n      } else {\r\n        url = 'bulks';\r\n      }\r\n      return { ...api_v2, method: 'GET', url };\r\n\r\n    /* Получить товар по ID или все товары */\r\n    case 'products_v2':\r\n      method = 'GET';\r\n      url = 'stores/' + action.storeUuid + '/products';\r\n      if (action.value) {\r\n        url += '/' + action.value;\r\n        action.value = '';\r\n      }\r\n      return { ...api_v2, method, url };\r\n    /*-------------------------------------*/\r\n\r\n    /* Получить группу по ID или список групп */\r\n    case 'groups_v2':\r\n      method = 'GET';\r\n      if (action.value) {\r\n        url = 'stores/' + action.storeUuid + '/product-groups/' + action.value;\r\n        action.value = '';\r\n      } else {\r\n        url = 'stores/' + action.storeUuid + '/product-groups';\r\n      }\r\n      return { ...api_v2, method, url };\r\n    /*--------------------------------------*/\r\n\r\n    /* Получить документы (за пред. месяц, продажа) */\r\n    /*\r\n      ACCEPT - Приемка товаров,\r\n      INVENTORY - Документ инвентаризации,\r\n      REVALUATION - Переоценка,\r\n      RETURN - Возврат поставщику,\r\n      WRITE_OFF - Списание,\r\n      SELL - Продажа,\r\n      PAYBACK - Возврат,\r\n\r\n    */\r\n    case 'documents_v2':\r\n      method = 'GET';\r\n      if (action.value) {\r\n        url = 'stores/' + action.storeUuid + '/documents/' + action.value;\r\n      } else {\r\n        url = 'stores/' + action.storeUuid + '/documents';\r\n        if (!api_v2.cursor) {\r\n          if (action.period) {\r\n            let dateStart = action.period.dateStart;\r\n            let dateEnd = action.period.dateEnd;\r\n            let until = dateEnd ? `&until=${dateEnd}` : null;\r\n            url += `?since=${dateStart}${until}`;\r\n          } else {\r\n            let date = new Date();\r\n            date.setMonth(date.getMonth() - 1);\r\n            url += `?since=${date.getTime()}`;\r\n          }\r\n          url += `&type=${action.docType}`;\r\n        }\r\n      }\r\n      return { ...api_v2, method, url };\r\n    /*----------------------------------------------*/\r\n\r\n    /* Получить список сотрудников */\r\n    case 'get_employees':\r\n      method = 'GET';\r\n      if (action.employee_id) {\r\n        url = 'employees/' + action.employee_id;\r\n        action.employee_id = '';\r\n      } else {\r\n        url = 'employees';\r\n      }\r\n      return { ...api_v2, method, url };\r\n    /*---------------------------------------------*/\r\n\r\n    case 'put_product_v2':\r\n      method = 'PUT';\r\n      url = 'stores/' + action.storeUuid + '/products/' + action.body.id;\r\n      body = JSON.stringify(action.body);\r\n      return { ...api_v2, method, url, body };\r\n\r\n    case 'post_product_v2':\r\n      method = 'POST';\r\n      url = 'stores/' + action.storeUuid + '/products';\r\n      body = JSON.stringify(action.body);\r\n      return { ...api_v2, method, url, body };\r\n\r\n    case 'delete_product_v2':\r\n      method = 'DELETE';\r\n      url = 'stores/' + action.storeUuid + '/products/' + action.id;\r\n      return { ...api_v2, method, url };\r\n\r\n    case 'put_group_v2':\r\n      method = 'PUT';\r\n      url = 'stores/' + action.storeUuid + '/product-groups/' + action.body.id;\r\n      body = JSON.stringify(action.body);\r\n      return { ...api_v2, method, url, body };\r\n\r\n    case 'post_group_v2':\r\n      method = 'POST';\r\n      url = 'stores/' + action.storeUuid + '/product-groups/';\r\n      body = JSON.stringify(action.body);\r\n      return { ...api_v2, method, url, body };\r\n\r\n    case 'delete_group_v2':\r\n      method = 'DELETE';\r\n      url = 'stores/' + action.storeUuid + '/product-groups/' + action.id;\r\n      return { ...api_v2, method, url };\r\n\r\n    case 'put_array_products_v2':\r\n      if (!action.body || !action.body.length) {\r\n        return {};\r\n      }\r\n      method = 'PUT';\r\n      headers = {\r\n        ...api_v2.headers,\r\n        'Content-Type': 'application/vnd.evotor.v2+bulk+json',\r\n      };\r\n      url = 'stores/' + action.storeUuid + '/products';\r\n      body = JSON.stringify(action.body);\r\n      return { ...api_v2, method, headers, url, body };\r\n\r\n    case 'put_array_groups_v2':\r\n      method = 'PUT';\r\n      headers = {\r\n        ...api_v2.headers,\r\n        'Content-Type': 'application/vnd.evotor.v2+bulk+json',\r\n      };\r\n      url = 'stores/' + action.storeUuid + '/product-groups';\r\n      body = JSON.stringify(action.body);\r\n      return { ...api_v2, method, headers, url, body };\r\n\r\n    case 'get_ofd_documents':\r\n      method = 'GET';\r\n      url = `/api/v1/ofd/documents/${action.storeUuid}`;\r\n      let date = new Date();\r\n      /* let dateFrom = date.getTime();\r\n      date.setDate(date.getDate() - 1);\r\n      let dateTo = date.getTime(); */\r\n      let dateFrom = `${date.getFullYear()}-0${date.getMonth() + 1}-${\r\n        date.getDate() - 1\r\n      }T00:00:00.000Z`;\r\n      let dateTo = `${date.getFullYear()}-0${\r\n        date.getMonth() + 1\r\n      }-${date.getDate()}T00:00:00.000Z`;\r\n      let params = {\r\n        deviceId: '20180608-D09E-409D-8015-A35AAA2D3487',\r\n        type: 'SELL',\r\n        from: dateFrom,\r\n        to: dateTo,\r\n      };\r\n      return { ...api_v2, method, url, params };\r\n\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nexport default createRequest;\r\n","import { default as Axios } from 'axios';\r\n\r\nasync function fetchEvo({\r\n  baseURL,\r\n  url,\r\n  headers,\r\n  method,\r\n  body,\r\n  params,\r\n  action,\r\n}) {\r\n  try {\r\n    let request = { baseURL, url, headers, method, params };\r\n    // console.log(request);\r\n    if (body) {\r\n      request.data = body;\r\n    }\r\n    let response = await Axios(request);\r\n    let result;\r\n    if (method === 'DELETE') {\r\n      result = response;\r\n    } else {\r\n      result = await response.data;\r\n    }\r\n    if (result.paging && result.paging.next_cursor) {\r\n      request.params = { cursor: result.paging.next_cursor };\r\n      let response = await fetchEvo(request);\r\n      result.items = result.items.concat(response.items);\r\n    }\r\n    result.paging = {};\r\n    return result;\r\n  } catch (err) {\r\n    return err;\r\n  }\r\n}\r\n\r\nexport default fetchEvo;\r\n","import { createRequest, fetchEvo } from './api_evotor';\r\n\r\nexport const apiForIdb = {\r\n\r\n  async getStores() {\r\n    let request = await createRequest({ type: 'store_v2' });\r\n    let stores = await fetchEvo(request);\r\n    return stores.items;\r\n  },\r\n\r\n  async getGroupsEvo() {\r\n    let request = await createRequest({ type: 'groups_v2' });\r\n    return await fetchEvo(request);\r\n  },\r\n\r\n  async getProductsEvo() {\r\n    let request = await createRequest({ type: 'products_v2' });\r\n    return await fetchEvo(request);\r\n  },\r\n\r\n  async postData(path, body) {\r\n    let request = await createRequest({ type: `post_${path}_v2`, body });\r\n    return await fetchEvo(request);\r\n  },\r\n  async putData(path, body) {\r\n    let request = await createRequest({ type: `put_${path}_v2`, body });\r\n    return await fetchEvo(request);\r\n  },\r\n  async deleteData(path, id) {\r\n    let request = await createRequest({ type: `delete_${path}_v2`, id });\r\n    return await fetchEvo(request);\r\n  },\r\n  async getDocuments(docType, period = null, value = null) {\r\n    let request = await createRequest({ type: 'documents_v2', docType, period, value });\r\n    return await fetchEvo(request);\r\n  },\r\n  async getOfdDocuments() {\r\n    // let request = await createRequest({ type: 'get_ofd_documents' });\r\n    // return await fetchEvo(request);\r\n    return {items: [{id: 'Временно не работает!'}]};\r\n  },\r\n  async getEmoloyees(employee_id = null) {\r\n    let request = await createRequest({ type: 'get_employees', employee_id });\r\n    return await fetchEvo(request);\r\n  },\r\n};\r\n","import { deleteDB, openDB } from 'idb';\r\n\r\nexport async function initDb() {\r\n  const db = await openDB('Evo', 4, {\r\n    async upgrade(db, oldVersion, newVersion) {\r\n      if (oldVersion < newVersion) {\r\n        alert('База данных будет обновлена до версии: ' + newVersion);\r\n        // await db.delete();\r\n        console.log(`New version: ${newVersion}`);\r\n      }\r\n      if (!db.objectStoreNames.contains('groups')) {\r\n        const store = db.createObjectStore('groups', { keyPath: 'id' });\r\n        store.createIndex('name', 'name');\r\n        store.createIndex('date', 'created_at');\r\n        store.createIndex('parent_id', 'parent_id');\r\n      }\r\n      if (!db.objectStoreNames.contains('products')) {\r\n        const store = db.createObjectStore('products', { keyPath: 'id' });\r\n        store.createIndex('name', 'name');\r\n        store.createIndex('date', 'created_at');\r\n        store.createIndex('parent_id', 'parent_id');\r\n        store.createIndex('code', 'code');\r\n        store.createIndex('price', 'price');\r\n      }\r\n    },\r\n  });\r\n\r\n  return db;\r\n}\r\n\r\nexport const apiIDB = {\r\n  async getGroup(id) {\r\n    const db = await initDb();\r\n    let group;\r\n    if (id === 'all') {\r\n      group = await db.getAll('groups');\r\n    } else {\r\n      group = await db.get('groups', id);\r\n    }\r\n    return group;\r\n  },\r\n\r\n  async getProduct(id) {\r\n    const db = await initDb();\r\n    let product;\r\n    if (id === 'all' || !id) {\r\n      product = await db.getAll('products');\r\n    } else {\r\n      product = await db.get('products', id);\r\n    }\r\n    return product;\r\n  },\r\n\r\n  async getGroupsPid(pid) {\r\n    const db = await initDb();\r\n    const groups = await db.getAllFromIndex('groups', 'parent_id', pid);\r\n    return groups;\r\n  },\r\n  async getProductsPid(pid) {\r\n    const db = await initDb();\r\n    const products = await db.getAllFromIndex('products', 'parent_id', pid);\r\n    return products;\r\n  },\r\n\r\n  async getProductsName(name) {\r\n    const db = await initDb();\r\n    const products = await db.getAllFromIndex('products', 'name', name);\r\n    return products;\r\n  },\r\n\r\n  async pushItems(store, items) {\r\n    let resItems = [];\r\n    items.forEach((item) => {\r\n      resItems.push(item);\r\n    });\r\n    /* Init IDB */\r\n    const db = await initDb();\r\n    const tx = db.transaction(store, 'readwrite');\r\n    const promises = resItems.map((item) => {\r\n      return tx.store.put(item);\r\n    });\r\n    promises.push(tx.done);\r\n    await Promise.all(promises);\r\n  },\r\n\r\n  async delDb(nameDb) {\r\n    await deleteDB(nameDb);\r\n  },\r\n\r\n  async putData(storeName, data) {\r\n    const db = await initDb();\r\n    await db.put(storeName, data);\r\n    return data;\r\n  },\r\n\r\n  async deleteData(storeName, id) {\r\n    const db = await initDb();\r\n    await db.delete(storeName, id);\r\n    return id;\r\n  },\r\n};\r\n","export class SequelizeError extends Error {};\r\n\r\nexport class SequelizeValidationError extends SequelizeError {\r\n  constructor(errors = []) {\r\n    super(`Ошибка базы данных:\\n\\r ${errors[0].message}`);\r\n    this.name = 'SequelizeValidationError';\r\n    this.errors = errors;\r\n  }\r\n}\r\nexport class SequelizeUniqueConstraintError extends SequelizeError {\r\n  constructor(errors = []) {\r\n    super(\r\n      `Ошибка уникальности ключа:\r\n        ${errors[0].path}: ${errors[0].value}\r\n        Попробуйте обновить данные с помощью метода PUT`,\r\n    );\r\n    this.name = 'SequelizeUniqueConstraintError';\r\n    this.errors = errors;\r\n  }\r\n}\r\n","export class EvoError extends Error {}\r\n\r\n/*\r\n  errorFromEvo = {\r\n    \"value\":\"line 1, column 161\",\r\n    \"code\":\"invalid_format\",\r\n    \"message\":\"invalid value format for field\",\r\n    \"violations\":[{\"reason\":\"недейсвительное значение\",\"subject\":\"allow_to_sell\"}]\r\n  }\r\n*/\r\n\r\nexport class EvoValidationError extends EvoError {\r\n  constructor(err) {\r\n    let message = err.message;\r\n    err.errors.forEach((item) => {\r\n      message += `\\n${item.subject.toUpperCase()} -> ${item.reason}`;\r\n    });\r\n    super(`Ошибка записи в облако!\\n${message}`);\r\n    this.name = 'EvoValidationError';\r\n    this.errors = err.violations;\r\n  }\r\n}\r\nexport class EvoPutError extends EvoError {\r\n  constructor(err) {\r\n    let message = err.message;\r\n    err.violations.forEach((item) => {\r\n      message += `\\n${item.subject.toUpperCase()} -> ${item.reason}`;\r\n    });\r\n    super(`Ошибка записи в облако!\\n${message}`);\r\n    this.name = err.code;\r\n    this.violations = err.violations;\r\n  }\r\n}\r\n","import {\r\n  SequelizeValidationError,\r\n  SequelizeUniqueConstraintError,\r\n} from './SequelizeErrors';\r\nimport { /* EvoError, */ EvoValidationError, EvoPutError } from './EvoErrors';\r\n\r\n/*\r\n  errorFromEvo = {\r\n    \"value\":\"line 1, column 161\",\r\n    \"code\":\"invalid_format\",\r\n    \"message\":\"invalid value format for field\",\r\n    \"violations\":[{\"reason\":\"недейсвительное значение\",\"subject\":\"allow_to_sell\"}]\r\n  }\r\n*/\r\n\r\nexport const chooseError = (err) => {\r\n  if (err?.response) {\r\n    let res = err.response;\r\n    if (res.data?.name === 'SequelizeValidationError') {\r\n      return new SequelizeValidationError(res.data.errors);\r\n    } else if (\r\n      res.data.name &&\r\n      res.data.name === 'SequelizeUniqueConstraintError'\r\n    ) {\r\n      return new SequelizeUniqueConstraintError(res.data.errors);\r\n    } else if (res.data?.code === 'validation_failed') {\r\n      return new EvoValidationError({\r\n        message: res.data.message,\r\n        errors: res.data.errors,\r\n      });\r\n    } else {\r\n      return new EvoPutError(res.data);\r\n    }\r\n  }\r\n};\r\n","import { apiForIdb } from '../../api/api';\r\nimport { apiIDB } from '../../api/apiIDB';\r\nimport { chooseError } from '../../components/Errors/chooseError';\r\nimport {\r\n  SET_COMMODITIES,\r\n  SET_GROUPS,\r\n  SET_ERROR,\r\n  SET_FORM_DATA,\r\n  SET_FORM_ERROR,\r\n  SET_FORM_PHOTOS,\r\n  SET_PID,\r\n  TOGGLE_FORM_POST,\r\n  VIEW_FORM,\r\n} from '../Types';\r\n\r\nconst setGroupsAC = (groups) => {\r\n  return { type: SET_GROUPS, groups };\r\n};\r\nconst setPidAC = (pid) => {\r\n  return { type: SET_PID, pid: pid };\r\n};\r\nconst setCommoditiesAC = (commodities) => {\r\n  return { type: SET_COMMODITIES, commodities };\r\n};\r\nconst setErrorAC = (error) => {\r\n  return { type: SET_ERROR, error };\r\n};\r\nconst setFormErrorAC = (error) => {\r\n  return { type: SET_FORM_ERROR, error };\r\n};\r\nconst viewFormAC = (view) => {\r\n  return { type: VIEW_FORM, viewForm: view };\r\n};\r\nconst setFormDataAC = (formData) => {\r\n  return { type: SET_FORM_DATA, formData };\r\n};\r\nconst toggleFormPostAC = (formPost) => {\r\n  return { type: TOGGLE_FORM_POST, formPost };\r\n};\r\nconst setFormPhotosAC = (photos) => {\r\n  return { type: SET_FORM_PHOTOS, photos };\r\n};\r\n\r\nexport const getProducts = (pId) => {\r\n  return (dispatch) => {\r\n    apiIDB.getProductsPid(pId).then((res) => {\r\n      // console.log(res)\r\n      dispatch(setCommoditiesAC(res));\r\n    });\r\n  };\r\n};\r\n\r\nexport const getProductId = (id) => {\r\n  if (!id) return (dispatch) => dispatch(viewFormAC(true));\r\n  return (dispatch) => {\r\n    apiIDB\r\n      .getProduct(id)\r\n      .then((res) => {\r\n        // console.log(res)\r\n        dispatch(setFormDataAC(res));\r\n        return true;\r\n      })\r\n      .then((result) => {\r\n        if (result) dispatch(viewFormAC(true));\r\n      });\r\n  };\r\n};\r\n\r\nexport const getGroups = () => {\r\n  return (dispatch) => {\r\n    apiIDB.getGroup('all').then((res) => {\r\n      dispatch(setGroupsAC(res));\r\n    });\r\n  };\r\n};\r\n\r\nexport const setViewForm = (view) => (dispatch) => {\r\n  dispatch(viewFormAC(view));\r\n};\r\n\r\nexport const setFormData = (formData) => (dispatch) => {\r\n  dispatch(setFormDataAC(formData));\r\n};\r\n\r\nexport const postFormData = (typeData, typeQuery, body) => (dispatch) => {\r\n  // debugger\r\n  let path;\r\n  switch (typeData) {\r\n    case 'product':\r\n      path = 'product';\r\n      break;\r\n    case 'group':\r\n      path = 'group';\r\n      break;\r\n    default:\r\n      path = 'product';\r\n      break;\r\n  }\r\n  let callbackApi;\r\n  switch (typeQuery) {\r\n    case 'post':\r\n      callbackApi = apiForIdb.postData;\r\n      break;\r\n    case 'put':\r\n      callbackApi = apiForIdb.putData;\r\n      break;\r\n    default:\r\n      callbackApi = apiForIdb.postData;\r\n      break;\r\n  }\r\n  callbackApi(path, body)\r\n    .then((res) => {\r\n      if (res.status < 400 || res.id) {\r\n        apiIDB.putData(`${path}s`, res);\r\n      } else {\r\n        throw chooseError(res);\r\n      }\r\n      return res;\r\n    })\r\n    .then((res) => {\r\n      if (typeData === 'group') return res.id;\r\n      return res.parent_id ? res.parent_id : '0';\r\n    })\r\n    .then((pid) => {\r\n      dispatch(toggleFormPostAC(false));\r\n      dispatch(viewFormAC(false));\r\n      dispatch(setFormDataAC(null));\r\n      if (typeData === 'group') {\r\n        apiIDB\r\n          .getGroup('all')\r\n          .then((res) => dispatch(setGroupsAC(res)))\r\n          .then(dispatch(setPidAC(pid)));\r\n      } else {\r\n        dispatch(setPidAC(pid));\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.dir(err);\r\n      alert(err);\r\n      dispatch(setFormErrorAC(chooseError(err)));\r\n      dispatch(toggleFormPostAC(false));\r\n    });\r\n};\r\n\r\nexport const deleteProduct = (id, pid, path = 'product') => async (\r\n  dispatch,\r\n  getState,\r\n) => {\r\n  try {\r\n    pid = !pid ? getState().commodityPage.pid : pid;\r\n    let res = await apiForIdb.deleteData(path, id);\r\n    // console.log(res.status);\r\n    if (res.status >= 400) {\r\n      throw new Error(`Error deleting object \\n\\r id: ${id}`);\r\n    } else {\r\n      await apiIDB.deleteData(`${path}s`, id);\r\n      if (path === 'group') {\r\n        apiIDB.getGroup('all').then((res) => dispatch(setGroupsAC(res)));\r\n      }\r\n      dispatch(setPidAC(pid || '0'));\r\n      return id;\r\n    }\r\n  } catch (err) {\r\n    console.dir(err);\r\n    dispatch(setErrorAC(chooseError(err)));\r\n  }\r\n};\r\n\r\nexport const setCommodities = (commodities) => (dispatch) =>\r\n  dispatch(setCommoditiesAC(commodities));\r\n\r\nexport const setFormPhotos = (photos) => (dispatch) =>\r\n  dispatch(setFormPhotosAC(photos));\r\n\r\nexport const setPid = (pId) => (dispatch) => dispatch(setPidAC(pId));\r\n\r\nexport const setError = (err) => (dispatch) => dispatch(setErrorAC(err));\r\n\r\nexport const setFormError = (err) => (dispatch) =>\r\n  dispatch(setFormErrorAC(err));\r\n\r\nexport const toggleFormPost = (formPost) => (dispatch) =>\r\n  dispatch(toggleFormPostAC(formPost));\r\n","import { NavLink } from \"react-router-dom\";\r\nimport { getTitle } from \"../../redux/Actions\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst mapState = (state, ownProps) => {\r\n  let { to, exact, activeClassName } = ownProps;\r\n  return { activeClassName, to, exact };\r\n};\r\n\r\nconst mapDispatch = (dispatch, ownProps) => {\r\n  let { to } = ownProps;\r\n  return {\r\n    onClick: () => {\r\n      getTitle(to);\r\n    },\r\n  };\r\n};\r\n\r\nconst NavLinkContainer = connect(mapState, mapDispatch)(NavLink);\r\n\r\nexport default NavLinkContainer;\r\n","import React from 'react';\r\nimport s from './Navbar.module.css';\r\nimport Navbar from './Navbar';\r\nimport { connect } from 'react-redux';\r\nimport NavLinkContainer from './NavLinkContainer';\r\n\r\nfunction getNavElements(state) {\r\n\r\n  let currentLang = state.navigation.currentLang;\r\n  let navElements = state.navigation.navBar.map((nav, idx) => {\r\n    let ex;\r\n    nav.link === \"/\" ? ex = true : ex = false;\r\n    return (\r\n      <div className={s.item} key={idx}>\r\n        <NavLinkContainer\r\n          exact={ex}\r\n          to={nav.link}\r\n          activeClassName={s.active}>\r\n          {nav.title[currentLang]}\r\n        </NavLinkContainer>\r\n      </div>\r\n    );\r\n  });\r\n  return navElements;\r\n}\r\n\r\nconst mapState = state => {\r\n  return {\r\n    navElements: getNavElements(state)\r\n  }\r\n}\r\n\r\nconst NavbarContainer = connect(mapState)(Navbar);\r\n\r\nexport default NavbarContainer;","export default __webpack_public_path__ + \"static/media/terminal-5.6357e026.png\";","import React, { useEffect, useState } from 'react';\r\n\r\nconst ProgressBar = (props) => {\r\n  const [p, setP] = useState('_');\r\n\r\n  useEffect(() => {\r\n    let limit = props.limit;\r\n    let c = 0;\r\n    let timer = setInterval(() => {\r\n      c++;\r\n      if (c > limit) {\r\n        c = 0;\r\n        setP('_');\r\n      }\r\n      setP((p) => (p += '_'));\r\n    }, props.delay);\r\n    return () => clearInterval(timer);\r\n  }, [props.delay, props.limit]);\r\n\r\n  const styleSpan = {\r\n    backgroundColor: 'blue',\r\n    color: 'blue',\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h5 style={{display: 'inline'}}>{props.text}</h5><span style={styleSpan}>{p}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProgressBar;\r\n","import { apiForIdb } from \"./api\";\r\nimport { apiIDB } from \"./apiIDB\";\r\n\r\nexport function compose(...fns) {\r\n  return (x) => fns.reduceRight((acc, fn) => fn(acc), x);\r\n}\r\n\r\nexport function map(cb) {\r\n  return (arr) => arr.map(cb);\r\n}\r\n\r\nexport function testNeedUpdate(date, periodUpdate = 24) {\r\n  // debugger\r\n  if (typeof date === 'string') {\r\n    date = new Date(date).getTime();\r\n  }\r\n  if (!date) return true;\r\n  let needUpdate = (Date.now() - date) / 1000 / 3600;\r\n  if (needUpdate > periodUpdate ) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport async function fetchGroupsProducts() {\r\n  // Get groups\r\n  try {\r\n    let res = await apiForIdb.getGroupsEvo();\r\n    let groups = await res.items;\r\n    await apiIDB.pushItems('groups', groups);\r\n    // Get products\r\n    res = await apiForIdb.getProductsEvo();\r\n    let products = await res.items;\r\n    products = products.map(item => {\r\n      if (!item.parent_id) item.parent_id = '0';\r\n      if (!item.barcodes) item.barcodes = [];\r\n      if (!item.photos) item.photos = [];\r\n      return item;\r\n    })\r\n    await apiIDB.pushItems('products', products);\r\n    localStorage.setItem('lastUpdate', Date.now())\r\n    console.log('LS: ' + new Date(+localStorage.lastUpdate));\r\n    return true;\r\n  } catch (e) {\r\n    console.error(e.message);\r\n    return e;\r\n  }\r\n}\r\n\r\nexport async function isEmptyGroup(pId) {\r\n  let groupsLength = (await apiIDB.getGroupsPid(pId)).length;\r\n  let productsLength = (await apiIDB.getProductsPid(pId)).length;\r\n  if (pId === '0' || !pId) return false;\r\n  if (!(groupsLength + productsLength)) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport './Header.module.css';\r\nimport logo from '../../Assets/img/terminal-5.png';\r\nimport ProgressBar from '../common/ProgressBar/ProgressBar';\r\nimport { fetchGroupsProducts, testNeedUpdate } from '../../api/apiUtils';\r\n// import ProgressBar2 from '../common/ProgressBar/ProgressBar2';\r\n\r\nconst Header = (props) => {\r\n\r\n    const [isInit, setIsInit] = useState(false);\r\n    const [lastUpdate, setLastUpdate] = useState(null);\r\n    const [updated, setUpdated] = useState(false);\r\n    const [needUpdate, setNeedUpdate] = useState(false);\r\n    // const periodUpdate = props.periodUpdate;\r\n\r\n    function clickLang(ev) {\r\n        let lng;\r\n        if (ev.target.name === 'lng') {\r\n            lng = ev.target.value;\r\n            props.chooseLang(lng);\r\n            props.getTitle(props.path);\r\n        } else {\r\n            return;\r\n        }\r\n    }\r\n    async function clickDateUpdate() {\r\n        setUpdated(true);\r\n        let load = await fetchGroupsProducts();\r\n        console.log('fetchGroupsProducts - ' + load);\r\n        props.setLastUpdate();\r\n        setUpdated(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (props.isInit) {\r\n            setIsInit(true)\r\n            setTimeout(() => {\r\n                setIsInit(false)\r\n                let date = new Date(+props.lastUpdate);\r\n                setLastUpdate(date.toString());\r\n            }, 2000);\r\n        }\r\n    }, [props.isInit, props.lastUpdate])\r\n\r\n    useEffect(() => {\r\n        setNeedUpdate(testNeedUpdate(lastUpdate, props.periodUpdate));\r\n    }, [lastUpdate, props.periodUpdate])\r\n\r\n    let styleH5 = (needUpdate && { color: 'red' }) || { color: 'blue' };\r\n\r\n    return (\r\n        <header>\r\n            { !props.isInit && <h4>Initializing App...</h4>}\r\n            { isInit && <h4>App Is Init!</h4>}\r\n            {updated && <ProgressBar limit={20} delay={500} text='updated - ' />}\r\n            {!isInit && !updated &&\r\n                <div style={{ cursor: 'pointer' }} onClick={clickDateUpdate}>\r\n                    <h5 style={styleH5}>{lastUpdate && 'Синхронизировано - '}{lastUpdate}</h5>\r\n                </div>}\r\n            <img src={logo} alt='Logo'></img>\r\n            <h2>{props.title}</h2>\r\n            <div onClick={clickLang}>\r\n                <input name=\"lng\" type=\"radio\" value='ru' checked={!props.currentLang} onChange={(ev) => ev.target.checked = !props.currentLang} />RU\r\n                <input name=\"lng\" type=\"radio\" value='en' checked={props.currentLang} onChange={(ev) => ev.target.checked = props.currentLang} />EN\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Header from './Header';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { useEffect } from 'react';\r\nimport { getTitle, chooseLang, setLastUpdate } from '../../redux/Actions';\r\n\r\nconst HeaderContainer = props => {\r\n\r\n    let path = '/' + props.location.pathname.split('/')[1];\r\n\r\n    const getTitle = props.getTitle;\r\n    useEffect(() => {\r\n        getTitle(path);\r\n    }, [path, getTitle])\r\n\r\n    return <Header {...props} path={path} />\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\r\n    let className;\r\n    return {\r\n        navBar: state.navigation.navBar,\r\n        title: state.navigation.title,\r\n        className,\r\n        currentLang: state.navigation.currentLang,\r\n        isInit: state.app.isInit,\r\n        lastUpdate: state.app.lastUpdate,\r\n        periodUpdate: state.app.periodUpdate,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, { getTitle, chooseLang, setLastUpdate })(withRouter(HeaderContainer));\r\n","/* Target\r\n    tree = {\r\n        id:'root',\r\n        label: 'root'\r\n        childs: [\r\n            node:{\r\n                id: 'id',\r\n                pid: 'pid',\r\n                label: 'label',\r\n                childs: [\r\n                    node: {\r\n                        id: 'id',\r\n                        pid: 'pid',\r\n                        label: 'label',\r\n                        childs: []\r\n                    },\r\n                    node: {...},\r\n                    node: {...},\r\n                    node: {...},\r\n                ]\r\n            },\r\n            node: {...},\r\n            node: {...},\r\n        ]\r\n    }\r\n*/\r\n\r\nfunction createNode(item) {\r\n  let node = {...item};\r\n  node.childs = [];\r\n  return node;\r\n}\r\n\r\nfunction addNode(subNode, parentNode) {\r\n  let pNode = findNode(subNode.pid, parentNode);\r\n  try {\r\n    if (pNode === undefined) return subNode;\r\n    pNode.childs.push(subNode);\r\n    pNode.childs.sort((a, b) => {\r\n      if (a.label > b.label) return 1;\r\n      if (a.label < b.label) return -1;\r\n      return 0;\r\n    });\r\n    return false;\r\n  } catch (e) {\r\n    console.error(e.message);\r\n  }\r\n}\r\n\r\nfunction findNode(pid, pNode) {\r\n  if (pid === null) pid = 0;\r\n  let result = pNode.childs.find(item => item.id === pid);\r\n\r\n  if (result === undefined) {\r\n    for (let node of pNode.childs) {\r\n      result = findNode(pid, node);\r\n      if (result) break;\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction createTree(data, root) {\r\n  let notFoundNodes = [];\r\n  data.forEach(item => {\r\n    let node = createNode(item);\r\n    let notFoundNode = addNode(node, root);\r\n    if (notFoundNode) {\r\n      notFoundNodes.push(notFoundNode);\r\n    }\r\n  });\r\n  if (notFoundNodes.length) {\r\n    createTree(notFoundNodes, root);\r\n  }\r\n  notFoundNodes = [];\r\n  return root;\r\n}\r\nexport default createTree;\r\n","import React, { useEffect, useState } from \"react\";\r\n\r\nconst Node = props => {\r\n\r\n  //const icon = props.hidden ? [\"far fa-folder\", \"closed\"] : [\"far fa-folder-open\", \"open\"];\r\n\r\n  const [icon, setIcon] = useState(null);\r\n\r\n  const [isOpen, setIsOpen] = useState(null);\r\n\r\n  const [hasChildren, setHasChildren] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (props.hidden) {\r\n      setIcon(\"far fa-folder\");\r\n      setIsOpen(\"closed\");\r\n    } else {\r\n      setIcon(\"far fa-folder-open\");\r\n      setIsOpen(\"open\");\r\n    }\r\n  }, [props.hidden])\r\n\r\n  useEffect(() => {\r\n    if (props.children.length) {\r\n      setHasChildren(true);\r\n      setIsOpen(isOpen => `${isOpen} children`)\r\n    } else {\r\n      setHasChildren(false);\r\n      setIsOpen(isOpen => isOpen);\r\n    }\r\n  }, [props.children.length]);\r\n\r\n  return (\r\n    <>\r\n      <li id={props.id} className={isOpen}>\r\n        <i className={icon}></i>\r\n        <span>\r\n          {props.label}\r\n        </span>\r\n        {!!props.id && hasChildren &&\r\n          <span className={props.className}>\r\n            {props.children.length}\r\n          </span>}\r\n        {hasChildren && <ul hidden={props.hidden}>{props.children}</ul>}\r\n      </li>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Node;\r\n","import React from \"react\";\r\nimport s from \"./Tree.module.css\";\r\nimport createTree from \"./treeFunction\";\r\nimport Node from \"./Node\";\r\n\r\nconst Tree = props => {\r\n\r\n  let nodeRoot = { id: 0, label: props.price, childs: [] };\r\n  let tree = { id: \"Tree\", label: props.treeLabel, childs: [nodeRoot] };\r\n\r\n  createTree(props.data, tree);\r\n\r\n  function handleClick(e) {\r\n    const testTarget = () => {\r\n      if (e.target.tagName !== \"SPAN\" &&\r\n          e.target.tagName !== \"I\" &&\r\n          e.target.tagName !== \"LI\" &&\r\n          e.target.className !== s['children-length']) return false;\r\n      return true;\r\n    }\r\n    if (!testTarget()) return;\r\n    // ***SPAN toggle selected\r\n    document\r\n      .getElementById(\"Tree\")\r\n      .querySelectorAll(\"span\")\r\n      .forEach(item => {\r\n        if (item.className === s.selected) item.className = null;\r\n      });\r\n    let elem;\r\n    if (e.target.tagName === \"SPAN\") {\r\n      e.target.className = s.selected;\r\n      elem = e.target.closest(\"li\");\r\n    } else if (e.target.tagName === \"LI\") {\r\n      e.target.querySelector('span').className = s.selected;\r\n      elem = e.target;\r\n    } else {\r\n      e.target.nextSibling.className = s.selected;\r\n      elem = e.target.closest(\"li\");\r\n    }\r\n    // SPAN***\r\n    if (!elem) return;\r\n    let hasChildren = !!elem.className.match(/children/)?.length\r\n    if (elem.id !== \"0\") {\r\n      let target = elem.querySelector(\"ul\");\r\n      if (target) {\r\n        target.hidden = !target.hidden;\r\n        if (target.hidden) {\r\n          elem.className = hasChildren ? \"closed children\" : \"closed\";\r\n          elem.firstElementChild.className = \"far fa-folder\";\r\n        } else {\r\n          elem.className = hasChildren ? \"open children\" : \"open\";\r\n          elem.firstElementChild.className = \"far fa-folder-open\";\r\n        }\r\n      }\r\n    }\r\n\r\n    if (props.callback) {\r\n      let tagName = e.target.tagName;\r\n      props.callback(elem.id, tagName);\r\n    }\r\n\r\n  }\r\n\r\n  function createSubTree(item, lvl = 0) {\r\n    let hidden;\r\n    lvl += 1;\r\n    let children = [];\r\n    if (item.childs?.length) {\r\n      children = item.childs.map(elem => {\r\n        return createSubTree(elem, lvl);\r\n      });\r\n    }\r\n    hidden = lvl > 1 ? \"hidden\" : null;\r\n    return (\r\n      <Node\r\n        id={item.id}\r\n        key={item.id}\r\n        label={item.label}\r\n        children={children}\r\n        hidden={hidden}\r\n        className={s['children-length']}\r\n      />\r\n    );\r\n  }\r\n\r\n  let treeElements = createSubTree(nodeRoot);\r\n\r\n  return (\r\n    <div id={tree.id} className={s.tree} onClick={handleClick}>\r\n      <h3>{tree.label}</h3>\r\n      <ul>{treeElements}</ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tree;\r\n","export default __webpack_public_path__ + \"static/media/placeholder.e2f04097.svg\";","import React from \"react\";\r\nimport spiner from \"../../../Assets/img/placeholder.svg\";\r\n\r\nlet Preloader = (props) => {\r\n  return (\r\n    <div>\r\n      <img src={spiner} alt=\"\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Preloader;","import React, { useLayoutEffect } from \"react\";\r\nimport s from './FormModalWrapper.module.css';\r\n\r\nconst FormModalWrapper = props => {\r\n\r\n  const showForm = () => {\r\n    document.body.style.overflow = 'hidden';\r\n    setTimeout(() => document.getElementById(s['container']).style.top = 0, 0);\r\n  }\r\n\r\n  useLayoutEffect(showForm, []);\r\n\r\n  return (\r\n    <>\r\n      <div id={s['cover-div']}></div>\r\n      <div className={s.container} id={s['container']}>\r\n        {props.form}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\n\r\n\r\nexport default FormModalWrapper;\r\n","import { apiIDB } from '../../../api/apiIDB';\r\n\r\nexport const setNewCode = async () => {\r\n  //let maxCode = Math.floor(Math.random() * 1e5);//await productsApi.getData('products', { max: 'code' });\r\n  let arr = await apiIDB.getProduct();\r\n  // debugger\r\n  let codes = arr.map((item) => +item.code || 0);\r\n  let maxCode = Math.max.apply(null, codes);\r\n  let newCode = maxCode + 1;\r\n  return newCode;\r\n};\r\n\r\nexport function newBarcode(code, prefix = '0000') {\r\n  // if (!prefix) prefix = '0000';\r\n  let A1 =\r\n    '20'.concat(prefix) +\r\n    '0'.repeat(6 - code.toString().length) +\r\n    code.toString();\r\n  let A2 = 0;\r\n  A1.split('').forEach((item, i) => {\r\n    if (i % 2 !== 0) {\r\n      A2 += Number(item) * 3;\r\n    } else {\r\n      A2 += Number(item);\r\n    }\r\n  });\r\n  A2 = (10 - (A2 % 10)) % 10;\r\n  return A1.concat(A2);\r\n}\r\n\r\nexport function viewBarcode(barcode) {\r\n  let f1 = 65;\r\n  let f2 = 75;\r\n  let s = [\r\n    [f1, f1, f1, f1, f1, f1],\r\n    [f1, f1, f2, f1, f2, f2],\r\n    [f1, f1, f2, f2, f1, f2],\r\n    [f1, f1, f2, f2, f2, f1],\r\n    [f1, f2, f1, f1, f2, f2],\r\n    [f1, f2, f2, f1, f1, f2],\r\n    [f1, f2, f2, f2, f1, f1],\r\n    [f1, f2, f1, f2, f1, f2],\r\n    [f1, f2, f1, f2, f2, f1],\r\n    [f1, f2, f2, f1, f2, f1],\r\n  ];\r\n\r\n  let bcStr = barcode.split('')[0];\r\n  let n = Number(bcStr);\r\n\r\n  for (let i = 1; i <= 6; i++) {\r\n    bcStr += String.fromCharCode(Number(barcode.substr(i, 1)) + s[n][i - 1]);\r\n  }\r\n  bcStr += String.fromCharCode(42);\r\n  for (let i = 7; i <= 12; i++) {\r\n    bcStr += String.fromCharCode(Number(barcode.substr(i, 1)) + 97);\r\n  }\r\n\r\n  bcStr += String.fromCharCode(43);\r\n  return bcStr;\r\n}\r\n\r\nexport function validateBarcode(barcode) {\r\n  if (![7, 8, 12, 13].includes(barcode.length)) {\r\n    return `Not valid Length barcode: ${barcode.length}`;\r\n  }\r\n  let res = 0;\r\n  barcode.split('').forEach((item, i) => {\r\n    if (i % 2 !== 0) {\r\n      res += Number(item) * 3;\r\n      res = res % 10;\r\n    } else {\r\n      res += Number(item);\r\n      res = res % 10;\r\n    }\r\n  });\r\n  if (res !== 0) {\r\n    let message = '';\r\n    if (barcode.length === 13 || barcode.length === 8) {\r\n      let errDig = barcode.slice(-1);\r\n      message += 'Not valid control digit: ' + errDig + '\\r\\n';\r\n      message += validateBarcode(barcode.slice(0, -1));\r\n    } else if (barcode.length === 12 || barcode.length === 7) {\r\n      let newRes = 10 - res;\r\n      message += 'Need add control digit: ' + newRes;\r\n    } else {\r\n      message += 'Not valid Length barcode: ' + barcode.length;\r\n    }\r\n    return message;\r\n  }\r\n  return res;\r\n}\r\n\r\nexport function validateZeroData(curr, prev) {\r\n  for (let key in curr) {\r\n    /* let arrNotChanged = false;\r\n    if (Array.isArray(curr[key])) {\r\n      let compare = arrCompare(curr[key], prev[key]);\r\n      arrNotChanged = !compare.resArrMinus.length && !compare.resArrPlus.length;\r\n    } */\r\n\r\n    let isNotData = curr[key] === null || curr[key] === undefined;\r\n    // (curr.isNewData && !curr[key]);\r\n\r\n    // let isNotChanged = !curr.isNewData && curr[key] === prev[key];\r\n\r\n    if (/* arrNotChanged || */ isNotData /* || isNotChanged */) {\r\n      delete curr[key];\r\n    }\r\n  }\r\n}\r\n\r\nexport function validateRequiredData(body, isGroup = false) {\r\n  let reqData;\r\n\r\n  if (isGroup) {\r\n    reqData = ['name'];\r\n  } else {\r\n    reqData = [\r\n      'type',\r\n      'name',\r\n      // 'price',\r\n      'measure_name',\r\n      'tax',\r\n      'allow_to_sell',\r\n    ];\r\n  }\r\n  let missData = [];\r\n\r\n  Object.keys(body).forEach((key) => {\r\n    if (!body[key] && reqData.includes(key)) {\r\n      missData.push(key);\r\n    }\r\n  });\r\n\r\n  return missData;\r\n}\r\n\r\nexport function arrCompare(arr1 = [], arr2 = []) {\r\n  let resArrPlus = [];\r\n  arr2.forEach((item) => {\r\n    if (!arr1.includes(item)) {\r\n      resArrPlus.push(item);\r\n    }\r\n  });\r\n  let resArrMinus = [];\r\n  arr1.forEach((item) => {\r\n    if (!arr2.includes(item)) {\r\n      resArrMinus.push(item);\r\n    }\r\n  });\r\n  return { resArrPlus, resArrMinus };\r\n}\r\n","import React from 'react';\r\nimport schema from './products.json';\r\nimport { viewBarcode } from '../frmUtilites';\r\nimport Tree from '../../../common/Tree/Tree';\r\n\r\nexport const ComponentsProducts = {\r\n    MeasureNames: props => {\r\n        return (\r\n            <label>\r\n                Measure Name\r\n                <select name=\"measure_name\"\r\n                    id={props.id}\r\n                    value={props.measure_name}\r\n                    onChange={props.handleChange}\r\n                    disabled={props.disabled}>\r\n                    {\r\n                        schema.measure_names.map((m, i) => {\r\n                            return <option key={i} value={m}>{m}</option>\r\n                        })\r\n                    }\r\n                </select>\r\n            </label>\r\n        )\r\n    },\r\n    Types: props => {\r\n        return (\r\n            <label>\r\n                Type\r\n                <select name=\"type\"\r\n                    id={props.id}\r\n                    value={props.type}\r\n                    onChange={props.handleChange}\r\n                    disabled={props.disabled}>\r\n                    {\r\n                        schema.types.map((t, i) => {\r\n                            return <option key={i} value={t.type}>{t.description}</option>\r\n                        })\r\n                    }\r\n                </select>\r\n            </label>\r\n        )\r\n    },\r\n    Taxes: props => {\r\n        return (\r\n            <label>\r\n                Tax\r\n                <select name=\"tax\"\r\n                    id={props.id}\r\n                    value={props.tax}\r\n                    onChange={props.handleChange}\r\n                    disabled={props.disabled}>\r\n                    {\r\n                        schema.taxes.map((t, i) => {\r\n                            return <option key={i} value={t.tax}>{t.description}</option>\r\n                        })\r\n                    }\r\n                </select>\r\n            </label>\r\n        )\r\n    },\r\n    Groups: props => {\r\n        let groups = props.groups.sort((a, b) => {\r\n            if (a.label > b.label) return 1;\r\n            if (a.label < b.label) return -1;\r\n            return 0;\r\n        })\r\n        return (\r\n            <label>\r\n                Group:\r\n                <select name=\"parent_id\" id={props.id}\r\n                    value={props.parent_id} onChange={props.handleChange} disabled={props.disabled}>\r\n                    <option key='0' value='0'>Root</option>\r\n                    {groups.map(g => {\r\n                        return <option key={g.id} value={g.id}>{g.label}</option>\r\n                    })}\r\n                </select>\r\n            </label>\r\n        )\r\n    },\r\n    GroupsTree: props => {\r\n        const groups = [...props.groups];\r\n        let g = groups.find(item => item.id === props.parent_id);\r\n        let gLabel = g ? g.label : 'Root';\r\n        let onDivClick = props.disabled ? null : props.onClick;\r\n\r\n        return (\r\n            <>\r\n                {props.treeView &&\r\n                    <div className={props.classTree} >\r\n                        <Tree data={groups} price=\"Price\" treeLabel=\"Groups\" callback={props.callbackTree} />\r\n                    </div>\r\n                }\r\n                <div className={props.classDiv} onClick={onDivClick} tabIndex={-1} /* onBlur={props.onBlurGroup} */>\r\n                    <div name='parent_id'>\r\n                        {gLabel}\r\n                        <i className='fa fa-angle-down'></i>\r\n                    </div>\r\n                </div >\r\n            </>\r\n        )\r\n    },\r\n    Barcodes: props => {\r\n\r\n        let barcodes = [];\r\n        if (props.barcodes?.length) {\r\n            barcodes = [...props.barcodes];\r\n        }\r\n\r\n        const delBcClick = ev => {\r\n            if (!props.allow_edit) return;\r\n            let elem;\r\n            if (ev.target.tagName === 'SPAN') {\r\n                elem = ev.target.closest('li');\r\n            }\r\n            if (!elem) return;\r\n            props.deleteFromArray(elem.id, 'barcodes');\r\n        }\r\n\r\n        return (\r\n            <fieldset name='img_barcodes'>\r\n                <legend>Barcodes</legend>\r\n                <div className={props.view_barcode}>\r\n                    <ul>\r\n                        {barcodes.map(b => {\r\n                            return (\r\n                                <li key={b} id={b} onClick={delBcClick}>{viewBarcode(b)}\r\n                                    <span className={props.delBc}></span>\r\n                                </li>\r\n                            )\r\n                        })}\r\n                    </ul>\r\n                    <input name='barcodes' type=\"text\" defaultValue={props.bc}\r\n                        onChange={props.handleChange} onBlur={props.handleBlur} disabled={props.disabled} />\r\n                    <span className={props.addBc}></span>\r\n                </div>\r\n            </fieldset >\r\n        )\r\n    },\r\n    Picture: props => {\r\n        return (\r\n            <div className={props.divPicture} onClick={props.pictureClick}>\r\n                <img id={props.photo.name} className={props.className}\r\n                    src={URL.createObjectURL(props.photo)}\r\n                    alt=\"no\" tabIndex='-1'\r\n                />\r\n                <span></span>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport s from './TextArea.module.css';\r\n\r\nfunction TextArea(props) {\r\n\r\n  let placeholder;\r\n  let className;\r\n  if (props.placeholder) {\r\n    placeholder = props.placeholder;\r\n    className = s.wrong;\r\n  } else {\r\n    placeholder = \"add new ...\";\r\n    className = \"\";\r\n  }\r\n\r\n    return (\r\n        <textarea\r\n          name={props.name}\r\n          onChange={props.onChange}\r\n          onBlur={props.onBlur}\r\n          onKeyDown={props.onKeyDown}\r\n          ref={props.refrence}\r\n          wrap={\"hard\"}\r\n          value={props.value}\r\n          placeholder={placeholder}\r\n          className={className}\r\n          disabled={props.disabled}\r\n          autoFocus\r\n        />\r\n    );\r\n}\r\nexport default TextArea;\r\n","import React from \"react\";\r\nimport s from './Form.module.css';\r\n\r\nconst FormImg = ({photo}) => {\r\n\r\n  return (\r\n    <>\r\n      <img className={s['big-img']}\r\n        src={photo}\r\n        alt=\"no\" tabIndex='-1'\r\n        style={{display: 'inline-block', height: '60vh',\r\n               position: 'fixed', top: '10vh', left: '30vw',\r\n               verticalAlign: 'middle'}}\r\n      /><span></span>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FormImg;\r\n","import React, { useEffect } from 'react';\r\nimport s from './Form.module.css';\r\nimport { useState } from \"react\";\r\nimport Preloader from '../../common/Preloader/Preloader';\r\nimport { ComponentsProducts } from './schemas/ComponentsProducts';\r\nimport TextArea from '../../common/TextArea/TextArea';\r\nimport { setNewCode, newBarcode, validateBarcode, validateZeroData, validateRequiredData } from './frmUtilites';\r\nimport FormImg from './FormImg';\r\nimport FormModalWrapper from './FormModalWrapper';\r\n// import noPhoto from '../../../Assets/img/terminal-5.png';\r\n\r\nconst FormProduct = props => {\r\n\r\n  const isNewData = !props.formData.id;\r\n  const fileInput = React.createRef();\r\n  const [isGroup, setIsGroup] = useState(false);\r\n  const [state, setState] = useState({\r\n    ...props.formData,\r\n    allow_edit: isNewData,\r\n    parent_id: isNewData ? props.pid : props.formData.parent_id || 0, //parentId,\r\n    photos: (props.formData.photos?.length && [...props.formData.photos]) || [],\r\n    barcodes: [...props.formData.barcodes] || [],\r\n    bigImg: null,\r\n    currentBarcode: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!state.allow_edit) {\r\n      let esc = document.getElementById(s.esc);\r\n      esc.focus();\r\n    }\r\n  })\r\n\r\n  useEffect(() => { //cleare URL objects Photo\r\n    return () => {\r\n      if (state.photos?.length) {\r\n        state.photos.forEach(item => URL.revokeObjectURL(item))\r\n      }\r\n    }\r\n  })\r\n\r\n  if (!state.code) {\r\n    setNewCode().then(code => setState({ ...state, code }))\r\n  }\r\n\r\n  if (props.formError) {\r\n    let err = props.formError;\r\n    alert(err.message);\r\n    props.setFormError(null);\r\n  }\r\n\r\n  const toggleGroup = () => {\r\n    if (!isNewData) return;\r\n    setIsGroup(!isGroup);\r\n  }\r\n\r\n  const disabled = !isNewData && !state.allow_edit;\r\n\r\n  const formChanged = () => {\r\n    let changes = [];\r\n    for (let key in props.formData) {\r\n      if (key === 'photos' || key === 'barcodes') {\r\n\r\n        if (state[key].length !== props.formData[key].length)\r\n          changes.push({ [key]: state[key] });\r\n      } else {\r\n        if (state[key] !== props.formData[key]) {\r\n          changes.push({ [key]: state[key] });\r\n        }\r\n      }\r\n    }\r\n    if (state.parent_id && !props.formData.parent_id) {\r\n      changes.push({ parent_id: state.parent_id })\r\n    }\r\n    if (changes.length === 1 && isNewData && changes[0].code) changes = [];\r\n    return changes.length;\r\n  }\r\n\r\n  const formatPrice = price => {\r\n    return isFinite(price) ? Number(price).toFixed(2) : '0.00';\r\n  }\r\n\r\n  const handleChange = (ev) => {\r\n\r\n    let elem = ev.target;\r\n    let name = elem.name;\r\n    let value = elem.value;\r\n    elem.classList.remove(s.required);\r\n\r\n    if (name === 'barcodes') {\r\n      if (state.barcodes.includes(value)) {\r\n        alert(`Barcode ${value} is exist in this product!`);\r\n        return;\r\n      }\r\n      setState({ ...state, currentBarcode: value });\r\n      return;\r\n    } else if (name === 'picture') {\r\n      let photos = state.photos;\r\n      Array.from(fileInput.current.files).forEach(item => {\r\n        photos.push(item);\r\n      })\r\n      setState({ ...state, photos });\r\n      return;\r\n    } else if (name === 'allow_edit') {\r\n      let form = document.getElementById(s['form-product']);\r\n      Object.values(form.elements).forEach(item => {\r\n        if (item.disabled && item.id !== s.uuid) item.removeAttribute('disabled');\r\n      })\r\n      setState({ ...state, allow_edit: true });\r\n      form.allow_edit.parentNode.remove();\r\n    } else if (name === 'allow_to_sell') {\r\n      value = elem.checked;\r\n      // console.log(name + ': ' + value)\r\n      setState({ ...state, [name]: value });\r\n    } else {\r\n      setState({ ...state, [name]: value });\r\n    }\r\n  }\r\n\r\n  const handleBlur = ev => {\r\n    let name = ev.target.name || ev.currentTarget.name;\r\n    let value = ev.target.value || ev.currentTarget.value;\r\n\r\n    if (name === 'barcodes') {\r\n      let newValue;\r\n      if (!value) {\r\n        let prefix = window.prompt(`Введите префикс!\\r\\n\r\n          Рекомендуется последние 4 цифры ИНН.\\r\\n\r\n          По умолчанию -> '0000'`, '7321');\r\n        // if (!prefix || !isFinite(prefix)) prefix = '0000';\r\n        newValue = newBarcode(state.code, prefix);\r\n        if (state.barcodes.includes(newValue)) {\r\n          console.warn(`Barcode ${newValue} is Exist!`)\r\n          return;\r\n        }\r\n\r\n      }\r\n      let valBc = validateBarcode(value || newValue);\r\n      if (valBc !== 0) {\r\n        window.alert(valBc);\r\n        return;\r\n      }\r\n      let barcodes = [...state.barcodes, state.currentBarcode || newValue];\r\n      setState({ ...state, barcodes });\r\n      ev.target.value = '';\r\n      return;\r\n    }\r\n\r\n    if (name === 'price' || name === 'cost_price') {\r\n      value = isFinite(value) ? Number(value) : 0;\r\n    }\r\n    setState({ ...state, [name]: value });\r\n    ev.target.value = formatPrice(value);\r\n  }\r\n\r\n  const handleSubmit = (ev) => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    // console.log(state);\r\n    if (state.allow_edit && formChanged() && window.confirm('Save changes')) {\r\n      // if (state.photos.length) setFormPhotos([...state.photos]);\r\n      let body;\r\n      if (isGroup) {\r\n        body = {\r\n          id: state.id,\r\n          parent_id: state.parent_id,\r\n          name: state.name,\r\n          isNewData\r\n        }\r\n      } else {\r\n        body = { ...state };\r\n        delete body.createdAt;\r\n        delete body.updatedAt;\r\n        delete body.allow_edit;\r\n        delete body.bigImg;\r\n        delete body.currentBarcode;\r\n        delete body.treeView;\r\n        delete body.alcocodes;\r\n      }\r\n\r\n      if (body.parent_id === '0' || body.parent_id === 0) {\r\n        delete body.parent_id;\r\n      }\r\n\r\n      let missData = validateRequiredData(body, isGroup);\r\n      if (missData.length) {\r\n        let strMessage = '';\r\n        missData.forEach(item => {\r\n          strMessage += ` ${item},`;\r\n          document.getElementsByName(item).forEach(elem => {\r\n            elem.classList.add(s.required);\r\n          })\r\n        });\r\n        strMessage.slice(-1);\r\n        alert(`Отсутствуют необходимые данные:\\n\\r${strMessage}!`);\r\n        return;\r\n      }\r\n\r\n      validateZeroData(body, props.formData);\r\n      if (!isNewData) body.id = state.id;\r\n\r\n      // alert(JSON.stringify(body, null, 2));\r\n\r\n      let i = 0;\r\n      Object.keys(body).forEach(item => i++);\r\n      if (i <= 1 && !body.name) {\r\n        alert('Данные не изменились!');\r\n        return;\r\n      }\r\n      let typeQuery = !isNewData ? 'put' : 'post';\r\n      let path = isGroup ? 'group' : 'product';\r\n      props.postFormData(path, typeQuery, body);\r\n      props.toggleFormPost(true);\r\n    } else {\r\n      props.setFormData(null);\r\n      props.setViewForm(false);\r\n    }\r\n    document.body.style.overflow = 'auto';\r\n  }\r\n\r\n  const canselClick = (ev) => {\r\n    props.setViewForm(false);\r\n    props.setFormData(null);\r\n    document.body.style.overflow = 'auto';\r\n  }\r\n\r\n  const pictureClick = ev => {\r\n    let p = ev.target;\r\n    if (p.tagName === 'SPAN') {\r\n      if (!state.allow_edit) return;\r\n      let prevElem = p.previousElementSibling;\r\n      deleteFromArray(prevElem.id, 'photos');\r\n      return;\r\n    }\r\n    p.addEventListener('blur', () => {\r\n      setState({ ...state, bigImg: null })\r\n      p.removeEventListener('blur', this);\r\n    })\r\n    setState({ ...state, bigImg: p.src })\r\n  }\r\n\r\n  const onPicInputClick = ev => {\r\n    ev.preventDefault();\r\n    let picInput = document.getElementById('picInput');\r\n    picInput.click();\r\n  }\r\n\r\n  const deleteFromArray = (elemId, arrName) => {\r\n    let i = state[arrName].findIndex(item => item === elemId);\r\n    let arr = state[arrName];\r\n    arr.splice(i, 1);\r\n    setState({ ...state, [arrName]: arr });\r\n  }\r\n\r\n  const [treeView, setTreeView] = useState(false);\r\n\r\n  const callbackTree = async (id, tagName) => {\r\n    let parent_id = id ? id : 0;\r\n    if (tagName !== 'SPAN') return;\r\n    setState({ ...state, parent_id });\r\n    setTreeView(false);\r\n  }\r\n\r\n  const clickGroups = () => {\r\n    setTreeView(!treeView);\r\n  }\r\n\r\n  const chooseKeyDown = ev => {\r\n    // console.log(ev.keyCode, ev.metaKey)\r\n    if (ev.keyCode !== 27) return;\r\n    canselClick();\r\n  }\r\n\r\n  const gProps = {\r\n    groups: props.groups, disabled, parent_id: state.parent_id, onClick: clickGroups,\r\n    treeView, classDiv: s['g-tree'], classTree: s.tree, callbackTree\r\n  };\r\n\r\n  const mnProps = { disabled, handleChange, id: s.measure_name, measure_name: state.measure_name };\r\n  const tProps = { disabled, handleChange, id: s.type, type: state.type };\r\n  const taxProps = { disabled, handleChange, id: s.tax, tax: state.tax };\r\n\r\n  const bProps = {\r\n    barcodes: state.barcodes, bc: state.currentBarcode, addBc: s['add-bc'], delBc: s['del-bc'],\r\n    handleChange, handleBlur, deleteFromArray, allow_edit: state.allow_edit, disabled,\r\n    view_barcode: s['view-barcode']\r\n  };\r\n\r\n  const pProps = { id: s.picture, className: s['picture-small'], divPicture: s['div-picture'], pictureClick };\r\n\r\n  if (props.formPost) {\r\n    return <Preloader />\r\n  } else {\r\n    return (\r\n      <>\r\n        {state.bigImg &&\r\n          <FormModalWrapper\r\n            form={<FormImg photo={state.bigImg} />}\r\n          />}\r\n        <form id={s['form-product']} onSubmit={handleSubmit} onKeyDown={chooseKeyDown}>\r\n          <div className={s['menu-buttons']}>\r\n            <span style={{ cursor: 'pointer' }} onClick={toggleGroup}>{isGroup ? 'Group' : 'Product'}</span>\r\n            <input type=\"text\" name=\"esc\" id={s.esc} />\r\n            <i className='fa fa-window-close' onClick={handleSubmit}></i>\r\n          </div>\r\n          <fieldset name='Product'>\r\n            <legend>Product Info</legend>\r\n            <div>\r\n              <b>ID: </b><input id={s.uuid} value={state.id || ''} disabled={!isNewData} onChange={handleChange} />\r\n              {\r\n                isNewData ? null :\r\n                  <label>\r\n                    Allow Edit:\r\n            <input type='checkbox' id={s['allow-edit']} name={'allow_edit'} checked={state.allow_edit} onChange={handleChange} />\r\n                  </label>\r\n              }\r\n            </div>\r\n            <div>\r\n              {\r\n                !state.photos?.length ?\r\n                  // <ComponentsProducts.Picture {...pProps} photo='image3D.png' /> :\r\n                  // <div><img src={noPhoto} alt=\"NoPhotos\" className={s['picture-small']} /></div> :\r\n                  null :\r\n                  state.photos.map(ph => {\r\n                    return <ComponentsProducts.Picture {...pProps} photo={ph} key={ph.name} />\r\n                  })\r\n              }\r\n            </div>\r\n            {\r\n              state.photo || !state.allow_edit ? null :\r\n                <>\r\n                  <input type=\"file\" name=\"picture\" id='picInput' multiple={true}\r\n                    onChange={handleChange} ref={fileInput} style={{ display: 'none' }} />\r\n                  <label htmlFor=\"picture\" onClick={onPicInputClick}>Input Image</label>\r\n                </>\r\n            }\r\n            {!isGroup && <ComponentsProducts.Barcodes {...bProps} />}\r\n            {!isGroup &&\r\n              <div className={s.code_article}>\r\n                <label>Code:</label>\r\n                <input type=\"text\" name=\"code\" value={state.code || ''} onChange={handleChange} disabled={disabled} />\r\n                <label>Aticle:</label>\r\n                <input type=\"text\" name='article_number' value={state.article_number || ''}\r\n                  onChange={handleChange} disabled={disabled} />\r\n              </div>\r\n            }\r\n            {!isGroup &&\r\n              <div className={s.propertyes}>\r\n                <ComponentsProducts.MeasureNames {...mnProps} />\r\n                <ComponentsProducts.Types {...tProps} />\r\n                <ComponentsProducts.Taxes {...taxProps} />\r\n              </div>\r\n            }\r\n            <ComponentsProducts.GroupsTree {...gProps} />\r\n            <label>\r\n              Name:\r\n              <TextArea name=\"name\" value={state.name} placeholder='Input name ...'\r\n                onChange={handleChange} disabled={disabled} />\r\n            </label>\r\n            {!isGroup &&\r\n              <div>\r\n                <label>Description:\r\n              <input type=\"text\" name=\"description\" value={state.description || ''} onChange={handleChange} disabled={disabled} />\r\n                </label>\r\n                <div className={s.prices}>\r\n                  <label htmlFor='price'>Price:</label>\r\n                  <input name=\"price\" defaultValue={formatPrice(state.price)} className={s.price}\r\n                    onBlur={handleBlur} onChange={handleChange} disabled={disabled} /><span></span>\r\n                  <label htmlFor='cost_price'>Cost Price:</label>\r\n                  <input name=\"cost_price\" defaultValue={formatPrice(state.cost_price)} className={s.price}\r\n                    onBlur={handleBlur} disabled={disabled} /><span></span>\r\n                  <label>Allow to sell:\r\n                  <input type=\"checkbox\" name=\"allow_to_sell\" id=\"allow_to_sell\"\r\n                      defaultChecked={state.allow_to_sell} disabled={disabled}\r\n                      onChange={handleChange} />\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            }\r\n          </fieldset>\r\n          <div className={s.buttons}>\r\n            <input type=\"submit\" value=\"Ready\" />\r\n            <button id={s.cansel} onClick={canselClick}>Cansel</button>\r\n          </div>\r\n        </form>\r\n      </>\r\n    );\r\n  }\r\n}\r\nexport default FormProduct;\r\n","/*\r\n    items.product =\r\n        {\r\n            \"uuid\":\"03b25d9c-d37c-42c1-a651-c12cb63724cf\",\r\n            \"code\":\"14098\",\r\n            \"label\":\"искуственный букет\",\r\n            \"price\":80,\r\n            \"quantity\":0\r\n        }\r\n*/\r\n\r\nimport { useMemo, useState } from 'react';\r\n\r\nconst useSortableData = (items, config = null) => {\r\n  const [sortConfig, setSortConfig] = useState(config);\r\n\r\n  const sortedItems = useMemo(() => {\r\n    let sortedProducts = [...items];\r\n    if (!sortedProducts.length) return [];\r\n    if (sortConfig !== null) {\r\n      sortedProducts.sort((a, b) => {\r\n        if (a[sortConfig.key] > b[sortConfig.key])\r\n          return sortConfig.direction === 'asc' ? 1 : -1;\r\n        if (a[sortConfig.key] < b[sortConfig.key])\r\n          return sortConfig.direction === 'asc' ? -1 : 1;\r\n        return 0;\r\n      });\r\n    }\r\n    return sortedProducts;\r\n  }, [items, sortConfig]);\r\n\r\n  function requestSort(key) {\r\n    let direction = 'asc';\r\n    if (sortConfig === null) {\r\n      setSortConfig({ key, direction });\r\n      return;\r\n    }\r\n    if (sortConfig.key === key && sortConfig.direction === 'asc') {\r\n      direction = 'desc';\r\n    }\r\n    setSortConfig({ key, direction });\r\n  }\r\n\r\n  return { items: sortedItems, requestSort, sortConfig };\r\n};\r\n\r\nexport default useSortableData;\r\n","import s from './Table.module.css';\r\n\r\nexport function clickCell(ev) {\r\n  let elem = ev.target;\r\n  if (elem.tagName === 'TD' || elem.closest('td')) {\r\n    let row = elem.closest('tr').id;\r\n    let column = elem.getAttribute('name');\r\n    let cell = elem.innerText;\r\n    return { row, column, cell };\r\n  } else {\r\n    return;\r\n  }\r\n}\r\n\r\nexport async function clickTable(ev, callback, delRow) {\r\n  let elem = ev.target;\r\n  let result = clickCell(ev);\r\n  if (!result) return;\r\n  if (elem.tagName === 'SPAN') {\r\n    let testDel =\r\n      delRow &&\r\n      elem.className === s.del &&\r\n      window.confirm(\r\n        `${elem.innerText}\\n\\rYou'r realy wanted delete this product?`,\r\n      );\r\n\r\n    if (testDel) {\r\n      let id = result.row;\r\n      let res = await delRow(id, null, 'product');\r\n      alert(`Product id: ${res}\\n\\rDELETED!`);\r\n    } else {\r\n      alert('CANCEL DELETED!');\r\n    }\r\n    return;\r\n  }\r\n  if (callback) {\r\n    callback(result.row);\r\n  } else {\r\n    alert(JSON.stringify(result, null, 2));\r\n  }\r\n}\r\n","import { React } from 'react';\r\nimport useSortableData from '../../../Hooks';\r\nimport s from './Table.module.css'\r\nimport { clickTable } from './utilsTable';\r\n\r\nexport default function Table(props) {\r\n  const { products } = props;\r\n  const { items, requestSort, sortConfig } = useSortableData(products);\r\n\r\n  if (!items.length) return <p>Empty Group!</p>\r\n\r\n  const schema = props.schema || Object.keys(products[0]);\r\n  const headers = props.headers || [...schema];\r\n\r\n  const getClassName = name => {\r\n    if (!sortConfig) return;\r\n    let className = sortConfig.key === name ? sortConfig.direction : null;\r\n    switch (className) {\r\n      case 'asc':\r\n        return s.asc;\r\n      case 'desc':\r\n        return s.desc;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <table onClick={ev => clickTable(ev, props.callback, props.deleteProduct)}>\r\n      {/* <caption>Commodities</caption> */}\r\n      <thead>\r\n        <tr>\r\n          {\r\n            headers.map((item, idx) => {\r\n              if (item === 'uuid' || item === 'id') return null;\r\n              return <th\r\n                key={item}\r\n                onClick={() => requestSort(schema[idx + 1])}\r\n              >{item}<i className={getClassName(schema[idx + 1])}></i></th>\r\n            })\r\n          }\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {items.map(product => (\r\n          <tr key={product.uuid || product.id} id={product.uuid || product.id}>\r\n           { schema.map(item => {\r\n             if (item === 'uuid' || item === 'id') return null;\r\n             return <td key={`${item}_${product.id || product.uuid}`} name={item}>{product[item]}</td>\r\n            })}\r\n            <td key={`del_${product.id || product.uuid}`}><span className={s.del}></span></td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nconst ProgressBar2 = ({limit = 10, delay = 500, text = 'Processing...'}) => {\r\n  const [p, setP] = useState('');\r\n\r\n  useEffect(() => {\r\n    let c = 0;\r\n    let timer = setInterval(() => {\r\n      c++;\r\n      if (c > limit) {\r\n        c = 0;\r\n        setP('');\r\n      }\r\n      setP((p) => (p += c));\r\n    }, delay);\r\n    return () => clearInterval(timer);\r\n  }, [delay, limit]);\r\n\r\n  const styleSpan = {\r\n    backgroundColor: 'blue',\r\n    color: 'white',\r\n  };\r\n\r\n  const styleDiv = {\r\n    width: limit + 3 + 'ch',\r\n    border: 'solid 1px blue',\r\n    padding: '2px'\r\n  };\r\n\r\n  return (\r\n    <div className={'progressBar'}>\r\n      <h4 style={{ display: 'inline' }}>{text}</h4>\r\n      <div style={styleDiv}>\r\n        <span style={styleSpan}>{p}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProgressBar2;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport s from \"./Commodity.module.css\";\r\nimport Tree from \"../common/Tree/Tree\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport FormModalWrapper from \"./Forms/FormModalWrapper\";\r\nimport FormProduct from \"./Forms/FormProduct\";\r\nimport { apiIDB } from \"../../api/apiIDB\";\r\nimport { isEmptyGroup } from \"../../api/apiUtils\";\r\nimport Table from \"../common/Table\";\r\nimport { ProgressBar } from \"../common/ProgressBar\";\r\n\r\nfunction toggleHidden(pid) {\r\n  if (!pid) pid = '0';\r\n  let tree = document.getElementById('Tree');\r\n  tree.querySelectorAll('span').forEach(item => {\r\n    if (item.className.match(/children-length/)?.length) return;\r\n    item.className = '';\r\n  })\r\n  let li = document.getElementById(pid);\r\n  if (!li) return;\r\n  li.querySelector('span').className = s.selected;\r\n  if (pid === '0') return;\r\n\r\n  let ul = li.closest('ul');\r\n  if (ul.hidden) {\r\n    ul.hidden = !ul.hidden;\r\n  }\r\n  let currentLi = ul.closest('li');\r\n  while (currentLi.id !== '0') {\r\n    currentLi.className = 'open';\r\n    currentLi.closest('ul').hidden = false;\r\n    currentLi = currentLi.closest('ul').closest('li');\r\n  }\r\n}\r\n\r\nconst Commodity = props => {\r\n\r\n  const [groupIsEmpty, setGroupIsEmpty] = useState(false);\r\n\r\n  const headers = [\r\n    ['Code'],\r\n    ['Name'],\r\n    ['Price'],\r\n    ['Quant'],\r\n    ['Del'],\r\n  ];\r\n\r\n  if (!props.isInit) {\r\n    props.history.push('/settings');\r\n  }\r\n\r\n  useEffect(() => {\r\n    isEmptyGroup(props.pid).then(res => setGroupIsEmpty(res));\r\n  }, [props.pid])\r\n\r\n  const [groupName, setGroupName] = useState('Commodities');\r\n\r\n  useEffect(() => {\r\n    if (!props.isLoaded && props.isInit) {\r\n      props.setPid('0');\r\n      props.getGroups();\r\n    }\r\n    if (!props.comIsLoaded && props.isInit) {\r\n      props.getProducts(props.pid);\r\n    }\r\n\r\n    if (props.error) {\r\n      alert(`${props.error.name}\\n\\r${props.error.message}`);\r\n      props.setError(null);\r\n    }\r\n  }, [props])\r\n\r\n  useEffect(() => {\r\n    if (props.groups.length) {\r\n      toggleHidden(props.pid);\r\n      if (props.pid !== '0') {\r\n        const group = props.groups.find(item => item.id === props.pid);\r\n        var gName = group?.label || 'Commodities';\r\n      } else {\r\n        gName = 'Commodities';\r\n      }\r\n      setGroupName(gName);\r\n    }\r\n  }, [props.groups, props.pid]);\r\n\r\n  function newData() {\r\n    props.getProductId();\r\n  }\r\n\r\n  function changePid(eId) {\r\n    if (props.pid === eId) return;\r\n    props.setPid(eId);\r\n  }\r\n\r\n  async function searchProducts(e) {\r\n    setGroupName('Результаты поиска');\r\n    let name = new RegExp(e.target.value, 'gi');\r\n    if (name.source === '(?:)' || name.source.length < 2) {\r\n      returnBeforeSearch();\r\n      return;\r\n    }\r\n    let products = (await apiIDB.getProduct()).filter(item => item.name.match(name));\r\n    props.setCommodities(products);\r\n  }\r\n\r\n  function returnBeforeSearch() {\r\n    props.getProducts(props.pid);\r\n    if (props.pid !== '0') {\r\n      var gName = props.groups.find(item => item.id === props.pid).label;\r\n    } else {\r\n      gName = 'Commodities';\r\n    }\r\n    setGroupName(gName);\r\n  }\r\n\r\n  function clearSearch(e) {\r\n    if (e.target.tagName !== 'I') return;\r\n    e.target.closest('div').querySelector('input').value = '';\r\n    returnBeforeSearch();\r\n  }\r\n\r\n  async function delGroup(ev) {\r\n    if (ev.target.tagName !== 'SPAN') return;\r\n    let confirmDel = window.confirm(`Вы действительно хотите удалить группу\\n\\r${groupName}\\n\\rid: ${props.pid}?`)\r\n    if (confirmDel) {\r\n      let parentGroup = (await apiIDB.getGroup(props.pid)).parent_id;\r\n      await props.deleteProduct(props.pid, parentGroup, 'group')\r\n    } else {\r\n      alert('DELETED CANCEL');\r\n    }\r\n  }\r\n\r\n  if (props.error) {\r\n    return <div>Ошибка...{props.error.message}</div>;\r\n  } else if (!props.isLoaded) {\r\n    return <Preloader />\r\n  } else {\r\n    return (\r\n      <>\r\n        <div className={s.head}>\r\n          <div className={s.buttons}>\r\n            <button onClick={newData}>+Товар</button>\r\n          </div>\r\n          <div className={s.search} onClick={clearSearch}>\r\n            <label>\r\n              Поиск товара\r\n              <input type=\"text\" onChange={searchProducts} />\r\n              <i className='fa fa-times'></i>\r\n            </label>\r\n          </div>\r\n        </div>\r\n        {props.viewForm ?\r\n          // <FormProductFormik />\r\n          <FormModalWrapper\r\n            form={\r\n              <FormProduct\r\n                groups={props.groups}\r\n                formData={props.formData}\r\n                formPost={props.formPost}\r\n                formError={props.formError}\r\n                setViewForm={props.setViewForm}\r\n                setFormData={props.setFormData}\r\n                toggleFormPost={props.toggleFormPost}\r\n                postFormData={props.postFormData}\r\n                setFormError={props.setFormError}\r\n                pid={props.pid}\r\n              />\r\n            }\r\n          />\r\n          : null}\r\n        <div className={s.container}>\r\n          <Tree\r\n            data={props.groups}\r\n            price=\"Price\"\r\n            treeLabel=\"Groups\"\r\n            callback={changePid}\r\n            pId={props.pid}\r\n          />\r\n          <div className={s.list}>\r\n            <h3>{groupName}  {groupIsEmpty && <span className={s.del} onClick={delGroup}></span>}</h3>\r\n            {/* <ListCommodities\r\n              commodities={props.commodities}\r\n              comIsLoaded={props.comIsLoaded}\r\n              error={props.error}\r\n              getProductId={props.getProductId}\r\n              deleteProduct={props.deleteProduct}\r\n              pid={props.pid}\r\n            /> */}\r\n            {!props.comIsLoaded && <ProgressBar limit={20} text={'Processing...'} />}\r\n            {props.comIsLoaded &&\r\n              <Table\r\n                products={props.commodities}\r\n                headers={headers}\r\n                callback={props.getProductId}\r\n                deleteProduct={props.deleteProduct}\r\n              />}\r\n          </div>\r\n\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n};\r\n\r\nexport default Commodity;\r\n","import Commodity from \"./Commodity\";\r\nimport {\r\n  setPid, getGroups, getProducts,\r\n  setViewForm, getProductId, deleteProduct, setFormData,\r\n  toggleFormPost, postFormData, setFormError, setError, setCommodities\r\n} from \"../../redux/Actions\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst mapState = state => {\r\n  const isInit = state.app.isInit;\r\n  state = state.commodityPage;\r\n  return {\r\n    isLoaded: state.isLoaded,\r\n    groups: state.groups,\r\n    price: \"Price\",\r\n    pid: state.pid,\r\n    commodities: state.commodities,\r\n    comIsLoaded: state.comIsLoaded,\r\n    error: state.error,\r\n    viewForm: state.viewForm,\r\n    formData: state.form.formData,\r\n    formPost: state.form.formPost,\r\n    formError: state.form.formError,\r\n    isInit\r\n  };\r\n};\r\n\r\nexport default connect(mapState, {\r\n  getGroups,\r\n  getProducts,\r\n  setPid,\r\n  setViewForm,\r\n  getProductId,\r\n  deleteProduct,\r\n  setFormData,\r\n  toggleFormPost,\r\n  postFormData,\r\n  setFormError,\r\n  setError,\r\n  setCommodities\r\n})(Commodity);\r\n","import React from \"react\";\r\nimport s from \"../ImpExcel.module.css\";\r\n\r\nconst News = props => {\r\n  let element;\r\n\r\n  element = (\r\n    <div >\r\n      {props.name}<hr />\r\n      {props.description}<hr />\r\n      {props.article}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <article className={s.article}>\r\n      {/* {props.index}\r\n      {rowsElements} */}\r\n      <h3>{props.index}</h3>\r\n      {element}\r\n    </article>\r\n  );\r\n};\r\nexport default News;\r\n","import React from \"react\";\r\nimport News from \"./News/News\";\r\nimport s from \"./ImpExcel.module.css\";\r\nimport readXlsxFile from \"read-excel-file\";\r\nimport { useState } from \"react\";\r\n\r\nconst ImpExcel = props => {\r\n\r\n  const [childElements, setChildElements] = useState([]);\r\n\r\n  let elements = [];\r\n\r\n  const inpChange = (e) => {\r\n    readXlsxFile(e.target.files[0]).then(rows => {\r\n      rows.forEach((item, idx) => {\r\n        if (!idx) return;\r\n        const element = <News\r\n          index={item[3]}\r\n          key={item[0]}\r\n          name={item[1]}\r\n          description={item[8]}\r\n          article={item[9]} />;\r\n        elements.push(element);\r\n      });\r\n    }).then(() => {\r\n      setChildElements(elements)\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className={s.page}>\r\n      <input type=\"file\" id=\"input\" onChange={inpChange} />\r\n      <h1>LATEST NEWS</h1>\r\n      <div className={s.archive}>{childElements}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImpExcel;\r\n","import React, { useEffect } from 'react';\r\n/* import { withCompose, withDouble, map, getName } from './testCompose';\r\n\r\nconsole.log(withCompose(5)); //21\r\n\r\nconst arr = [1, 2, 3, 4, 5];\r\nconsole.log(withDouble(arr)); // [ 2, 4, 6, 8, 10 ]\r\n\r\nconst people = [\r\n    { name: \"Alex\" },\r\n    { name: \"Julia\" },\r\n    { name: \"Leo\" },\r\n    { name: \"Den\" }\r\n  ];\r\n\r\nconsole.log(map(getName)(people)); */\r\n\r\nconst Example = ({ count }) => {\r\n\r\n    useEffect(() => {\r\n        console.log('render - ' + count)\r\n        return () => {\r\n            console.log('unmount - ' + count);\r\n        }\r\n    }, [count])\r\n\r\n    return (\r\n        <div>example: {count}</div>\r\n    );\r\n}\r\n\r\nexport default Example;\r\n","import React, { useState } from 'react';\r\nimport ProgressBar from '../common/ProgressBar/ProgressBar';\r\nimport ProgressBar2 from '../common/ProgressBar/ProgressBar2';\r\nimport Example from './Example';\r\n\r\nconst Wrapper = (props) => {\r\n\r\n    const [count, setCount] = useState(0);\r\n    const clickButton = () => {\r\n        setCount(count + 1);\r\n        if (count > 5) setCount(0);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <button onClick={clickButton}>{count}</button>\r\n            {count < 5 && <Example count={count} />}\r\n            {count < 5 && <Example count={-1} />}\r\n            { (count < 3) && <ProgressBar limit={10} text='test' delay={500} /> }\r\n            <ProgressBar2 limit={20} text='test' delay={500} />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Wrapper;\r\n","import React, { useState } from 'react';\r\nimport { apiForIdb } from '../../api/api';\r\nimport Tree from '../common/Tree/Tree';\r\nimport { apiIDB } from '../../api/apiIDB';\r\n\r\nconst IdbTest = () => {\r\n\r\n    const [groups, setGroups] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    async function callbackTree(id) {\r\n        let group = await apiIDB.getGroup(id);\r\n        console.log(group);\r\n        alert(JSON.stringify(group, null, 2));\r\n    }\r\n\r\n    async function butGetGroups() {\r\n        setIsLoading(true);\r\n        let res = await apiForIdb.getGroupsEvo();\r\n        console.log(res);\r\n        let g = await res.items;\r\n        await apiIDB.pushItems('groups', g);\r\n        /*\r\n         created_at: \"2018-08-01T06:00:27.605+0000\"\r\n         id: \"96639e0c-6409-9faa-d4e0-a8212b9fa795\"\r\n         name: \"Веревки\"\r\n         parent_id: \"3257cd3d-6e61-4315-8d83-084578c507be\"\r\n         store_id: \"20180608-EEA0-408D-807D-6AB73272E383\"\r\n         updated_at: \"2019-04-13T07:58:19.537+0000\"\r\n         user_id: \"01-000000000910281\"\r\n         */\r\n        let groups = await apiIDB.getGroup('all');\r\n        groups.forEach((item) => {\r\n            // if (idx === 1) console.log(item);\r\n            item.pid = item.parent_id ? item.parent_id : null;\r\n            item.label = item.name;\r\n        });\r\n        setGroups(groups);\r\n        setIsLoading(false);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <h1>IDB Test</h1>\r\n            <button onClick={() => butGetGroups()} disabled={isLoading}>get Groups Evo</button>\r\n            { isLoading && <p>Loading...</p>}\r\n            { !!groups.length && <Tree data={groups} price=\"Price\" treeLabel=\"Groups\" callback={callbackTree} />}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default IdbTest;\r\n","import { apiIDB } from './apiIDB';\r\nimport { compose } from './apiUtils';\r\n\r\nexport function blobFromObj({ obj, ...rest }) {\r\n  let json = JSON.stringify(obj, null, 2);\r\n  let blob = new Blob([json], { type: 'application/json' });\r\n  return { blob, ...rest };\r\n}\r\n\r\nexport function blobToUrl({ blob, fileName = 'test', ext = 'json' }) {\r\n  let link = document.createElement('a');\r\n  link.download = `${fileName}.${ext}`;\r\n  link.href = URL.createObjectURL(blob);\r\n  link.click();\r\n  URL.revokeObjectURL(link.href);\r\n}\r\n\r\nfunction getObjfromLocalStorage() {\r\n  let keys = Object.keys(localStorage);\r\n  let obj = {};\r\n  for (let key of keys) {\r\n    obj[key] = localStorage.getItem(key);\r\n  }\r\n  return obj;\r\n}\r\n\r\nasync function getObjfromIdb() {\r\n  let obj = {};\r\n\r\n  obj.groups = await apiIDB.getGroup('all');\r\n\r\n  obj.products = await apiIDB.getProduct('all');\r\n\r\n  return obj;\r\n}\r\n\r\nexport async function saveConfig({ type, fileName = 'config' }) {\r\n  let obj = {};\r\n\r\n  switch (type) {\r\n    case 'config':\r\n      obj.config = getObjfromLocalStorage();\r\n      break;\r\n    case 'commodities':\r\n      obj.commodities = await getObjfromIdb();\r\n      break;\r\n    default:\r\n      obj.config = getObjfromLocalStorage();\r\n      break;\r\n  }\r\n  compose(blobToUrl, blobFromObj)({ obj, fileName });\r\n}\r\n\r\nexport async function readJsonFile(input) {\r\n  let file = input.files[0];\r\n  let reader = new FileReader();\r\n  reader.readAsText(file);\r\n\r\n  return new Promise((resolve, reject) => {\r\n    reader.onload = function () {\r\n      var json = JSON.parse(reader.result);\r\n      resolve(json);\r\n    };\r\n\r\n    reader.onerror = function () {\r\n      console.error(reader.error);\r\n      reject(reader.error);\r\n    };\r\n  });\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { setAppKey, setStoreKey, setStores, toggleInitApp, setPeriodUpdate } from \"../../redux/Actions\";\r\nimport { apiForIdb } from \"../../api/api\";\r\nimport { readJsonFile, saveConfig } from \"../../api/apiFile\";\r\nimport { apiIDB } from \"../../api/apiIDB\";\r\n\r\nfunction addKey(id) {\r\n    var key = document.getElementById(id).value;\r\n    if (!key) return;\r\n    window.localStorage[id] = key;\r\n    return key;\r\n}\r\n\r\nconst MainSettings = props => {\r\n\r\n\r\n    let inpRef = React.createRef();\r\n\r\n    async function saveData() {\r\n\r\n        await saveConfig({ fileName: `backup_config_${new Date().toJSON()}` });\r\n\r\n        console.log('File with config saved');\r\n        let saveData = window.confirm('Сохранить список товаров?');\r\n        if (saveData) {\r\n            await saveConfig({ type: 'commodities', fileName: `backup_commodities_${new Date().toJSON()}` });\r\n            console.log('File with Data saved');\r\n        }\r\n    }\r\n\r\n\r\n    async function setAppKeyAndStores(key) {\r\n        localStorage.appKey = key;\r\n        props.setAppKey(key);\r\n        try {\r\n            let stores = await apiForIdb.getStores();\r\n            props.setStores(stores);\r\n        } catch (err) {\r\n            delete localStorage.appKey;\r\n            props.setAppKey(null);\r\n            console.error(err);\r\n        }\r\n    }\r\n\r\n    async function clickAddAppKey() {\r\n        var key = addKey('appKey');\r\n        if (!key) return;\r\n        await setAppKeyAndStores(key);\r\n    }\r\n\r\n    function liClick(e) {\r\n        let storeKey = e.target.id;\r\n        localStorage.storeKey = storeKey;\r\n        props.setStoreKey(storeKey);\r\n        // props.initApp(true);\r\n    }\r\n\r\n    const [clean, setClean] = useState(false);\r\n\r\n    async function cleareStorage(storageName) {\r\n        setClean(true);\r\n        localStorage.clear();\r\n        await apiIDB.delDb(storageName);\r\n        props.setAppKey(null);\r\n        props.setStoreKey(null);\r\n        props.toggleInitApp(false);\r\n        setClean(false);\r\n        window.location.reload();\r\n    }\r\n\r\n    async function restoreConfig() {\r\n        let file = inpRef.current;\r\n        let config = (await readJsonFile(file)).config;\r\n        await setAppKeyAndStores(config.appKey);\r\n        localStorage.storeKey = config.storeKey;\r\n        props.setStoreKey(config.storeKey);\r\n    }\r\n\r\n    const [periodUpdate, setPUpdate] = useState(props.periodUpdate);\r\n\r\n    useEffect(() => setPUpdate(props.periodUpdate), [props.periodUpdate]);\r\n\r\n    function blurPeriodUpdate(ev) {\r\n        localStorage.setItem('periodUpdate', periodUpdate);\r\n        props.setPeriodUpdate(periodUpdate);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {props.appKey && props.storeKey && !props.isInit &&\r\n                <div>\r\n                    <h2>Идет инициализация приложения...</h2>\r\n                </div>\r\n            }\r\n            {!props.appKey &&\r\n                <div>\r\n                    <h2>Необходимо инициализировать приложение!</h2>\r\n                    <p>Введите токен приложения...</p>\r\n                </div>\r\n            }\r\n            {clean &&\r\n                <div>\r\n                    <h2>Идет очистка хранилища...</h2>\r\n                    <p>Страница перезагрузится автоматически.</p>\r\n                    <p>Если процесс затянулся, перезагрузите страницу вручную.</p>\r\n                </div>\r\n            }\r\n            {!props.appKey &&\r\n                <div>\r\n                    <input id={'appKey'} />\r\n                    <button onClick={clickAddAppKey}>Установить токен приложения</button>\r\n                </div>\r\n            }\r\n            {!!props.appKey && !props.isInit &&\r\n                <div>\r\n                    <h3>Токен приложения</h3>\r\n                    <p>{props.appKey}</p>\r\n                </div>\r\n            }\r\n            { props.appKey && !!props.stores.length && !props.storeKey &&\r\n                <div style={{ cursor: 'pointer' }}>\r\n                    <h3>Выберите магазин</h3>\r\n                    <ul>\r\n                        {props.stores.map(item => {\r\n                            return (\r\n                                <li key={item.id} id={item.id} onClick={liClick}>{item.id}: {item.name}</li>\r\n                            )\r\n                        })}\r\n                    </ul>\r\n                </div>\r\n            }\r\n            { !!props.storeKey && !props.isInit &&\r\n                <div>\r\n                    <h3>Выбранный магазин</h3>\r\n                    <p>{props.storeKey}</p>\r\n                </div>\r\n            }\r\n            { props.isInit && !clean && <h2>Приложение инициализировано!</h2>}\r\n            { props.isInit && !clean &&\r\n                <div>\r\n                    <button onClick={() => cleareStorage('Evo')}>cleare Storage</button>\r\n                    <button onClick={saveData}>Save Config</button>\r\n                    <label htmlFor=\"periodUpdate\">Период обновления(час.):</label>\r\n                    <input type=\"number\" name=\"periodUpdate\" id=\"periodUpdate\"\r\n                        style={{width: '3rem'}}\r\n                        value={periodUpdate} onChange={ev => setPUpdate(ev.target.value)}\r\n                        onBlur={blurPeriodUpdate}\r\n                    />\r\n                </div>\r\n            }\r\n            {\r\n                !props.appKey &&\r\n                <div>\r\n                    <p>или выберите восстановление конфигурации...</p>\r\n                    <label>Восстановить конфигурацию из файла\r\n                    <input type=\"file\" ref={inpRef} onChange={restoreConfig} hidden />\r\n                    </label>\r\n                </div>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapState = state => {\r\n    return {\r\n        appKey: state.app.appKey,\r\n        storeKey: state.app.storeKey,\r\n        isInit: state.app.isInit,\r\n        stores: state.app.stores,\r\n        periodUpdate: state.app.periodUpdate,\r\n    }\r\n}\r\n\r\nexport default connect(mapState, { setAppKey, setStoreKey, setStores, toggleInitApp, setPeriodUpdate })(MainSettings);\r\n","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { apiForIdb } from '../../api/api';\r\nimport { compose } from '../../api/apiUtils';\r\nimport ProgressBar from '../common/ProgressBar/ProgressBar';\r\nimport { blobFromObj, blobToUrl } from '../../api/apiFile'\r\n\r\nfunction dateToString(date = new Date()) {\r\n    if (!date) return;\r\n    function dblDigit(dgt) {\r\n        if (dgt.toString().length < 2) {\r\n            return `0${dgt}`;\r\n        } else { return dgt };\r\n    }\r\n    let strDate = `${date.getFullYear()}-${dblDigit(date.getMonth() + 1)}-${dblDigit(date.getDate())}`;\r\n    return strDate;\r\n}\r\n\r\nfunction getMinData(key) {\r\n    if (!key) return '';\r\n    try {\r\n        let min = key.split('-')[0];\r\n        let year = min.slice(0, 4);\r\n        let month = min.slice(4, 6);\r\n        let day = min.slice(6)\r\n        return `${year}-${month}-${day}`;\r\n    } catch (e) {\r\n        console.error(e.message)\r\n    }\r\n}\r\n\r\nconst mapState = state => {\r\n    return {\r\n        isInit: state.app.isInit,\r\n        storeKey: state.app.storeKey,\r\n    }\r\n}\r\n\r\nconst Documents = (props) => {\r\n\r\n    if (!props.isInit) {\r\n        props.history.push('/settings');\r\n    }\r\n\r\n    const typesOfDocs = [\r\n        ['ACCEPT', 'Приемка товаров'],\r\n        ['INVENTORY', 'Документ инвентаризации'],\r\n        ['REVALUATION', 'Переоценка'],\r\n        ['RETURN', 'Возврат поставщику'],\r\n        ['WRITE_OFF', 'Списание'],\r\n        ['SELL', 'Продажа'],\r\n        ['PAYBACK', 'Возврат'],\r\n        ['employees', 'Сотрудники'],\r\n        ['ofd', 'Документы ОФД']\r\n    ]\r\n\r\n    const [docs, setDocs] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [docType, setDocType] = useState(typesOfDocs[0][0]);\r\n\r\n    const [period, setPeriod] = useState({\r\n        dateStart: new Date(),\r\n        dateEnd: new Date(),\r\n        dateMin: getMinData(props.storeKey)\r\n    });\r\n\r\n    useEffect(() => {\r\n        period.dateStart.setHours(0, 0, 0);\r\n    }, [period])\r\n\r\n    async function butGetDocs() {\r\n        setIsLoading(true);\r\n        console.log(docType);\r\n        let res;\r\n        try {\r\n            if (docType === 'employees') {\r\n                res = await apiForIdb.getEmoloyees();\r\n            } else if (docType === 'ofd') {\r\n                res = await apiForIdb.getOfdDocuments();\r\n            } else {\r\n                let p = {\r\n                    dateStart: period.dateStart.getTime(),\r\n                    dateEnd: period.dateEnd.getTime()\r\n                }\r\n                res = await apiForIdb.getDocuments(docType, p);\r\n            }\r\n            if (!res.items) {\r\n                setDocs([]);\r\n            } else {\r\n                setDocs(res.items);\r\n            }\r\n        } catch (e) {\r\n            alert(e.message);\r\n            setDocs([]);\r\n        }\r\n        console.log(res);\r\n        setIsLoading(false);\r\n    }\r\n\r\n    function changeDate(e) {\r\n        let date = new Date(e.currentTarget.value);\r\n        if (e.currentTarget.name === 'dateStart') {\r\n            date.setHours(0);\r\n        } else {\r\n            date.setHours(23);\r\n        }\r\n        setPeriod({ ...period, [e.currentTarget.name]: date });\r\n        // console.log(e.currentTarget.name + ' : ' + e.currentTarget.value)\r\n    }\r\n\r\n    async function docClick(e) {\r\n        if (e.target.tagName !== 'SPAN') return;\r\n        let id = e.currentTarget.id;\r\n        if (id === 'Временно не работает!') {\r\n            alert(id);\r\n            return;\r\n        }\r\n        let doc;\r\n        if (docType === 'employees') {\r\n            doc = await apiForIdb.getEmoloyees(id);\r\n        } else {\r\n            doc = await apiForIdb.getDocuments(null, null, id);\r\n        }\r\n        console.log(doc);\r\n        compose(blobToUrl, blobFromObj)({ obj: doc, fileName: docType });\r\n    }\r\n\r\n    function changeType(e) {\r\n        setDocType(e.target.value);\r\n        setDocs([]);\r\n    }\r\n\r\n    const styleSpan = {\r\n        cursor: 'pointer',\r\n        border: '1px solid green',\r\n        paddingTop: '0.5rem',\r\n        paddingLeft: '0.5rem',\r\n        paddingRight: '0.5rem',\r\n        background: 'yellow'\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <h1>Documents {docType}</h1>\r\n            <div>\r\n                <label htmlFor=\"dateStart\">Date start:</label>\r\n                <input type=\"date\" name=\"dateStart\"\r\n                    id=\"dateStart\"\r\n                    value={dateToString(period.dateStart)}\r\n                    min={period.dateMin}\r\n                    max={dateToString(period.dateEnd)}\r\n                    onChange={changeDate}\r\n                />\r\n                <label htmlFor=\"dateEnd\">Date end:</label>\r\n                <input type=\"date\" name=\"dateEnd\"\r\n                    id=\"dateEnd\"\r\n                    value={dateToString(period.dateEnd)}\r\n                    min={period.dateMin}\r\n                    max={dateToString(period.dateEnd)}\r\n                    onChange={changeDate}\r\n                />\r\n            </div>\r\n            <label>\r\n                DocType\r\n            <select name=\"type_docs\" id=\"typeDocs\" onChange={changeType}>\r\n                    {\r\n                        typesOfDocs.map(item => {\r\n                            return <option key={item[0]} value={item[0]}>{item[1]}</option>\r\n                        })\r\n                    }\r\n                </select>\r\n            </label>\r\n            <button onClick={butGetDocs} disabled={isLoading}>get Documents</button>\r\n            { isLoading && <ProgressBar limit={20} delay={500} text={'Loading '} />}\r\n            { !!docs.length &&\r\n                <ul>\r\n                    {docs.map((item, idx) => {\r\n                        return (idx < 20) && <li key={item.id} id={item.id} onClick={docClick} style={{ margin: '0.5rem' }}>\r\n                            <span style={styleSpan}>{item.id}</span>\r\n                        </li>\r\n                    })}\r\n                </ul>\r\n            }\r\n        </>\r\n    );\r\n}\r\n\r\nexport default connect(mapState)(Documents);\r\n","import React, { useEffect } from \"react\";\r\nimport \"./App.css\";\r\nimport \"../../Assets/css/fontawesome.css\";\r\nimport \"../../Assets/css/solid.css\";\r\nimport \"../../Assets/css/regular.css\";\r\nimport \"../../Assets/css/brands.css\";\r\nimport { Route } from \"react-router-dom\";\r\nimport Game from \"../Game\";\r\nimport NavbarContainer from \"../Navbar/NavbarContainer\";\r\nimport HeaderContainer from \"../Header/HeaderContainer\";\r\nimport CommodityContainer from \"../Commodity\";\r\nimport ImpExcel from \"../ImpExcel/ImpExcel\";\r\nimport Wrapper from \"../Example/Wrapper\";\r\nimport IdbTest from \"../IdbTest/IdbTest\";\r\nimport MainSettings from \"../Settings/MainSettings\";\r\nimport { initializeApp, toggleInitApp, setAppKey, setStoreKey, setLastUpdate, setPeriodUpdate } from '../../redux/Actions';\r\nimport { connect } from \"react-redux\";\r\nimport Documents from \"../Documents\";\r\nimport { fetchGroupsProducts, testNeedUpdate } from \"../../api/apiUtils\";\r\n\r\n\r\n\r\nconst App = props => {\r\n\r\n  useEffect(() => {\r\n\r\n    async function getProductsForIdb(lastUpdate, periodUpdate = 24) {\r\n      if (testNeedUpdate(lastUpdate, periodUpdate)) {\r\n        await fetchGroupsProducts();\r\n        props.setLastUpdate();\r\n      }\r\n    }\r\n\r\n    if (!props.isInit) props.initializeApp();\r\n\r\n    if (props.appKey && props.storeKey && !props.isInit) {\r\n      getProductsForIdb(props.lastUpdate, props.periodUpdate)\r\n        .then(() => props.toggleInitApp(true))\r\n        .catch(e => alert(e.message));\r\n    }\r\n  }, [props])\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <HeaderContainer />\r\n      <NavbarContainer />\r\n      <div className=\"app-content\">\r\n        <Route exact path=\"/\" />\r\n        <Route exact path=\"/settings\" component={MainSettings} />\r\n        <Route path=\"/example\" component={Wrapper} />\r\n        {props.isInit && <Route path=\"/commodity\" component={CommodityContainer} />}\r\n        <Route path=\"/game\" component={Game} />\r\n        <Route path=\"/table\" component={ImpExcel} />\r\n        <Route path=\"/test\" component={IdbTest} />\r\n        <Route path=\"/documents\" component={Documents} />\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapState = state => {\r\n  return {\r\n    appKey: state.app.appKey,\r\n    storeKey: state.app.storeKey,\r\n    isInit: state.app.isInit,\r\n    lastUpdate: state.app.lastUpdate,\r\n    periodUpdate: state.app.periodUpdate,\r\n  }\r\n}\r\n\r\nexport default connect(mapState, { initializeApp, toggleInitApp, setAppKey, setStoreKey, setLastUpdate, setPeriodUpdate })(App);\r\n","import { GET_TITLE, CHOOSE_LANG } from './Types';\r\n\r\nlet initialState = {\r\n  langs: { ru: 0, en: 1 },\r\n  currentLang: 0,\r\n  title: '',\r\n  navBar: [\r\n    { link: '/', title: ['Начало', 'Start'] },\r\n    { link: '/settings', title: ['Настройки', 'Settings'] },\r\n    { link: '/commodity', title: ['Товары', 'Products'] },\r\n    { link: '/documents', title: ['Документы', 'Documents'] },\r\n    { link: '/game', title: ['Играть', 'Game'] },\r\n    { link: '/table', title: ['Экспорт Excel', 'Export Excel'] },\r\n  ],\r\n};\r\n\r\nconst navReduser = (state = initialState, action) => {\r\n  switch (action.type) {\r\n\r\n    case GET_TITLE:\r\n      let title;\r\n      let nav = state.navBar.find((item) => item.link === action.path);\r\n      if (nav !== undefined) {\r\n        title = nav.title[state.currentLang];\r\n      }\r\n      return { ...state, title };\r\n\r\n    case CHOOSE_LANG:\r\n      return { ...state, currentLang: state.langs[action.lng] };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default navReduser;\r\n","import {\r\n  SET_GROUPS,\r\n  SET_PID,\r\n  SET_COMMODITIES,\r\n  SET_ERROR,\r\n  UPDATE_COMMODITY,\r\n  SET_UPDATED,\r\n  VIEW_FORM,\r\n  SET_FORM_DATA,\r\n  TOGGLE_FORM_POST,\r\n  SET_FORM_ERROR,\r\n  SET_FORM_PHOTOS,\r\n} from './Types';\r\n\r\nlet initialState = {\r\n  groups: [],\r\n  commodities: [],\r\n  pid: null,\r\n  isLoaded: false,\r\n  comIsLoaded: false,\r\n  error: null,\r\n  lastUpdate: 1585166400000,\r\n  isUpdated: false,\r\n  viewForm: false,\r\n  form: {\r\n    formData: {\r\n      id: null,\r\n      name: '',\r\n      code: '',\r\n      measure_name: 'шт',\r\n      tax: 'NO_VAT',\r\n      allow_to_sell: true,\r\n      description: '',\r\n      article_number: '',\r\n      parent_id: null,\r\n      type: 'NORMAL',\r\n      price: 0,\r\n      cost_price: 0,\r\n      quantity: 0,\r\n      photos: [],\r\n      barcodes: [],\r\n    },\r\n    formPost: false,\r\n    resMessage: null,\r\n    formError: null,\r\n    photos: [],\r\n  },\r\n};\r\n\r\nconst commodityReduser = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_GROUPS:\r\n      let groups = [];\r\n      action.groups.forEach((item) => {\r\n        let group = {\r\n          id: item.id,\r\n          pid: item.parent_id ? item.parent_id : null,\r\n          label: item.name,\r\n          // code: Date.parse(item.createdAt)\r\n        };\r\n        groups.push(group);\r\n      });\r\n      // groups.sort((a,b) => a.code - b.code);\r\n      return { ...state, groups: [...groups], isLoaded: true };\r\n\r\n    case SET_PID:\r\n      return Object.assign({}, state, {\r\n        pid: action.pid,\r\n        comIsLoaded: false,\r\n      });\r\n\r\n    case SET_COMMODITIES:\r\n      let commodities = [];\r\n      action.commodities.forEach((item) => {\r\n        // if (item.g) return;\r\n        let commodity = {\r\n          uuid: item.id,\r\n          code: item.code,\r\n          label: item.name,\r\n          price: item.price,\r\n          quantity: item.quantity,\r\n        };\r\n        commodities.push(commodity);\r\n      });\r\n      return Object.assign({}, state, {\r\n        commodities: commodities,\r\n        comIsLoaded: true,\r\n      });\r\n\r\n    case SET_ERROR:\r\n      return Object.assign({}, state, {\r\n        error: action.error,\r\n      });\r\n\r\n    case SET_FORM_ERROR:\r\n      return { ...state, form: { ...state.form, formError: action.error } };\r\n\r\n    case UPDATE_COMMODITY:\r\n      let lastUpdate = Date.now();\r\n      if (!state.updateOk) {\r\n        lastUpdate = state.lastUpdate;\r\n      } else {\r\n        lastUpdate = Date.now();\r\n      }\r\n      return { ...state, lastUpdate };\r\n\r\n    case SET_UPDATED:\r\n      return { ...state, isUpdated: action.update };\r\n\r\n    case VIEW_FORM:\r\n      return { ...state, viewForm: action.viewForm };\r\n\r\n    case TOGGLE_FORM_POST:\r\n      return { ...state, form: { ...state.form, formPost: action.formPost } };\r\n\r\n    case SET_FORM_DATA:\r\n      const formData =\r\n        action.formData === null ? initialState.form.formData : action.formData;\r\n      return { ...state, form: { ...state.form, formData } };\r\n\r\n    case SET_FORM_PHOTOS:\r\n      return { ...state, form: action.photos };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default commodityReduser;\r\n","import {\r\n  SET_APP_KEY,\r\n  SET_STORE_KEY,\r\n  INIT_APP,\r\n  SET_STORES,\r\n  SET_LAST_UPDATE,\r\n  SET_PERIOD_UPDATE,\r\n} from './Types'\r\n\r\nconst initialState = {\r\n  appKey: null,\r\n  storeKey: null,\r\n  isInit: false,\r\n  stores: [],\r\n  lastUpdate: null,\r\n  periodUpdate: 24\r\n};\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_APP_KEY:\r\n      return { ...state, appKey: action.key };\r\n    case SET_STORE_KEY:\r\n      return { ...state, storeKey: action.key };\r\n    case INIT_APP:\r\n      return { ...state, isInit: action.init };\r\n    case SET_STORES:\r\n      return { ...state, stores: [...action.stores] };\r\n    case SET_LAST_UPDATE:\r\n      return { ...state, lastUpdate: +action.dateUpdate };\r\n    case SET_PERIOD_UPDATE:\r\n      return { ...state, periodUpdate: action.periodUpdate };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default appReducer;\r\n","import { createStore, combineReducers, applyMiddleware } from 'redux';\r\nimport navReduser from './navReduser';\r\nimport commodityReduser from './commodityReduser';\r\nimport thunkMidleware from 'redux-thunk';\r\nimport appReducer from './appReducer';\r\n\r\nlet redusers = combineReducers({\r\n  navigation: navReduser,\r\n  commodityPage: commodityReduser,\r\n  app: appReducer\r\n});\r\n\r\nlet store = createStore(redusers, applyMiddleware(thunkMidleware));\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./components/App\";\r\nimport store from \"./redux/redux-store\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { Provider } from \"react-redux\";\r\n\r\n/** RENDER */\r\n  ReactDOM.render(\r\n    <Provider store={store}>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </Provider>\r\n    ,document.getElementById(\"root\")\r\n  );\r\n\r\n  window.store = store;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Commodity_container__2O07C\",\"list\":\"Commodity_list__2ILIG\",\"selected\":\"Commodity_selected__3t5hz\",\"del\":\"Commodity_del__RIa5V\",\"head\":\"Commodity_head__2sL_Q\",\"buttons\":\"Commodity_buttons__lNlz7\",\"search\":\"Commodity_search__2fDTI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tree\":\"Tree_tree__2BiYs\",\"selected\":\"Tree_selected__3nfeH\",\"children-length\":\"Tree_children-length__MnPzu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"asc\":\"Table_asc__u1FhI\",\"desc\":\"Table_desc__icxS5\",\"del\":\"Table_del__3ZTVB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"ImpExcel_image__3T78n\",\"page\":\"ImpExcel_page__escWJ\",\"archive\":\"ImpExcel_archive__39uKW\",\"article\":\"ImpExcel_article__23hzN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cover-div\":\"FormModalWrapper_cover-div__R6V-a\",\"container\":\"FormModalWrapper_container__zgoYM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Navbar_item__3BYsL\",\"active\":\"Navbar_active__2-ZqH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form-product\":\"Form_form-product__rFtLH\",\"uuid\":\"Form_uuid__390Ur\",\"barcodes\":\"Form_barcodes__U-W5R\",\"g-tree\":\"Form_g-tree__e4Uyg\",\"tree\":\"Form_tree__3nwNl\",\"price\":\"Form_price__Khzda\",\"picture-small\":\"Form_picture-small__3G_dV\",\"div-picture\":\"Form_div-picture__1ZjeF\",\"select\":\"Form_select__JfE4L\",\"buttons\":\"Form_buttons__3k3hF\",\"big-img\":\"Form_big-img__1-g2E\",\"view-barcode\":\"Form_view-barcode__1dcmC\",\"del-bc\":\"Form_del-bc__1LwSb\",\"add-bc\":\"Form_add-bc__3ZUsN\",\"menu-buttons\":\"Form_menu-buttons__5lLq7\",\"required\":\"Form_required__3vB1c\",\"propertyes\":\"Form_propertyes__39JHl\",\"esc\":\"Form_esc__1eVHg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrong\":\"TextArea_wrong__3jbCe\"};"],"sourceRoot":""}